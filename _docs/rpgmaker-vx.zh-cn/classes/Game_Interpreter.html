<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Game_Interpreter</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            Game_Interpreter 
            
                <span class="parent">&lt; 
                    
                    Object
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/Game_Interpreter_rb.html">Game_Interpreter.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>执行事件命令的解释器。本类在 <a
href="Game_System.html">Game_System</a> 类 与 <a
href="Game_Event.html">Game_Event</a> 类的内部使用。</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-cancel_menu_call">cancel_menu_call</a>,
              </li>
            
              
              <li>
                <a href="#method-i-clear">clear</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_101">command_101</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_102">command_102</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_103">command_103</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_111">command_111</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_112">command_112</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_113">command_113</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_115">command_115</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_117">command_117</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_118">command_118</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_119">command_119</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_121">command_121</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_122">command_122</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_123">command_123</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_124">command_124</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_125">command_125</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_126">command_126</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_127">command_127</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_128">command_128</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_129">command_129</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_132">command_132</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_133">command_133</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_134">command_134</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_135">command_135</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_136">command_136</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_201">command_201</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_202">command_202</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_203">command_203</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_204">command_204</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_205">command_205</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_206">command_206</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_211">command_211</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_212">command_212</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_213">command_213</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_214">command_214</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_221">command_221</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_222">command_222</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_223">command_223</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_224">command_224</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_225">command_225</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_230">command_230</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_231">command_231</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_232">command_232</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_233">command_233</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_234">command_234</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_235">command_235</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_236">command_236</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_241">command_241</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_242">command_242</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_245">command_245</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_246">command_246</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_249">command_249</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_250">command_250</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_251">command_251</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_301">command_301</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_302">command_302</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_303">command_303</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_311">command_311</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_312">command_312</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_313">command_313</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_314">command_314</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_315">command_315</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_316">command_316</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_317">command_317</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_318">command_318</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_319">command_319</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_320">command_320</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_321">command_321</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_322">command_322</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_323">command_323</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_331">command_331</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_332">command_332</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_333">command_333</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_334">command_334</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_335">command_335</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_336">command_336</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_337">command_337</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_339">command_339</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_340">command_340</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_351">command_351</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_352">command_352</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_353">command_353</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_354">command_354</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_355">command_355</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_402">command_402</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_403">command_403</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_411">command_411</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_413">command_413</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_601">command_601</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_602">command_602</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_603">command_603</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_end">command_end</a>,
              </li>
            
              
              <li>
                <a href="#method-i-command_skip">command_skip</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-execute_command">execute_command</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-get_character">get_character</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-iterate_actor_id">iterate_actor_id</a>,
              </li>
            
              
              <li>
                <a href="#method-i-iterate_actor_index">iterate_actor_index</a>,
              </li>
            
              
              <li>
                <a href="#method-i-iterate_battler">iterate_battler</a>,
              </li>
            
              
              <li>
                <a href="#method-i-iterate_enemy_index">iterate_enemy_index</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-operate_value">operate_value</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-running-3F">running?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-screen">screen</a>,
              </li>
            
              
              <li>
                <a href="#method-i-set_message_waiting">set_message_waiting</a>,
              </li>
            
              
              <li>
                <a href="#method-i-setup">setup</a>,
              </li>
            
              
              <li>
                <a href="#method-i-setup_choices">setup_choices</a>,
              </li>
            
              
              <li>
                <a href="#method-i-setup_num_input">setup_num_input</a>,
              </li>
            
              
              <li>
                <a href="#method-i-setup_starting_event">setup_starting_event</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-update">update</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <b>new</b>(depth = 0, main = false)
            
            <a href="../classes/Game_Interpreter.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>初始化标志</p>

<p>depth : 事件的深度 main  : 主标志</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 13</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span>(<span class="ruby-identifier">depth</span> = <span class="ruby-number">0</span>, <span class="ruby-identifier">main</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-ivar">@depth</span> = <span class="ruby-identifier">depth</span>
  <span class="ruby-ivar">@main</span> = <span class="ruby-identifier">main</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@depth</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">100</span>
    <span class="ruby-identifier">print</span>(<span class="ruby-string">&quot;调用公用事件超过了限制。&quot;</span>)
    <span class="ruby-identifier">exit</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">clear</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-cancel_menu_call">
            
              <b>cancel_menu_call</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-cancel_menu_call" name="method-i-cancel_menu_call" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>取消呼出菜单</p>

<p>主角移动中取消按钮被按、呼出菜单画面被预约的状态下
事件启动情况下的对策。</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-cancel_menu_call_source')" id="l_method-i-cancel_menu_call_source">show</a>
                
              </p>
              <div id="method-i-cancel_menu_call_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 59</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">cancel_menu_call</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@main</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;menu&quot;</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">menu_beep</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">menu_beep</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-clear">
            
              <b>clear</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-clear" name="method-i-clear" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>清除</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-clear_source')" id="l_method-i-clear_source">show</a>
                
              </p>
              <div id="method-i-clear_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 26</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">clear</span>
  <span class="ruby-ivar">@map_id</span> = <span class="ruby-number">0</span>                       <span class="ruby-comment"># 启动时的地图 ID</span>
  <span class="ruby-ivar">@original_event_id</span> = <span class="ruby-number">0</span>            <span class="ruby-comment"># 启动时的事件 ID</span>
  <span class="ruby-ivar">@event_id</span> = <span class="ruby-number">0</span>                     <span class="ruby-comment"># 事件 ID</span>
  <span class="ruby-ivar">@list</span> = <span class="ruby-keyword">nil</span>                       <span class="ruby-comment"># 执行内容</span>
  <span class="ruby-ivar">@index</span> = <span class="ruby-number">0</span>                        <span class="ruby-comment"># 索引</span>
  <span class="ruby-ivar">@message_waiting</span> = <span class="ruby-keyword">false</span>          <span class="ruby-comment"># 文章信息结束待机中</span>
  <span class="ruby-ivar">@moving_character</span> = <span class="ruby-keyword">nil</span>           <span class="ruby-comment"># 移动中的人物</span>
  <span class="ruby-ivar">@wait_count</span> = <span class="ruby-number">0</span>                   <span class="ruby-comment"># 窗口计数</span>
  <span class="ruby-ivar">@child_interpreter</span> = <span class="ruby-keyword">nil</span>          <span class="ruby-comment"># 子实例</span>
  <span class="ruby-ivar">@branch</span> = {}                      <span class="ruby-comment"># 分支数据</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_101">
            
              <b>command_101</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_101" name="method-i-command_101" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>显示文章</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_101_source')" id="l_method-i-command_101_source">show</a>
                
              </p>
              <div id="method-i-command_101_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 464</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_101</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">face_name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">face_index</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">background</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">position</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">while</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">401</span>       <span class="ruby-comment"># 文章数据</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>])
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">102</span>          <span class="ruby-comment"># 显示选择项</span>
      <span class="ruby-identifier">setup_choices</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">103</span>       <span class="ruby-comment"># 处理数值输入</span>
      <span class="ruby-identifier">setup_num_input</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_102">
            
              <b>command_102</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_102" name="method-i-command_102" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>显示选择项</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_102_source')" id="l_method-i-command_102_source">show</a>
                
              </p>
              <div id="method-i-command_102_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 496</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_102</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
    <span class="ruby-identifier">setup_choices</span>(<span class="ruby-ivar">@params</span>)                <span class="ruby-comment"># 设置选择项</span>
    <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_103">
            
              <b>command_103</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_103" name="method-i-command_103" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>处理数值输入</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_103_source')" id="l_method-i-command_103_source">show</a>
                
              </p>
              <div id="method-i-command_103_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 547</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_103</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
    <span class="ruby-identifier">setup_num_input</span>(<span class="ruby-ivar">@params</span>)              <span class="ruby-comment"># 设置数值输入</span>
    <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_111">
            
              <b>command_111</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_111" name="method-i-command_111" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>条件分歧</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_111_source')" id="l_method-i-command_111_source">show</a>
                
              </p>
              <div id="method-i-command_111_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 569</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_111</span>
  <span class="ruby-identifier">result</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
  <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 开关</span>
    <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_switches</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]] <span class="ruby-operator">==</span> (<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>))
  <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 变量</span>
    <span class="ruby-identifier">value1</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">value2</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">value2</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 等于</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">value2</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 以上</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">value2</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 以下</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">value2</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 超过</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value2</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 未满</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">value2</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 以外</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">value2</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 独立开关</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@original_event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">key</span> = [<span class="ruby-ivar">@map_id</span>, <span class="ruby-ivar">@original_event_id</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">true</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 计时器</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span>
      <span class="ruby-identifier">sec</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">sec</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">sec</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 角色</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 同伴</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">actor</span>))
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 名称</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 特技</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">skill_learn?</span>(<span class="ruby-identifier">$data_skills</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 武器</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">weapons</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 防具</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">armors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 状态</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">state?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]))
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敌人</span>
    <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 出现</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">exist?</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 状态</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">state?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]))
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 角色</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">character</span>.<span class="ruby-identifier">direction</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 金钱</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 物品</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]])
  <span class="ruby-keyword">when</span> <span class="ruby-number">9</span>  <span class="ruby-comment"># 武器</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
  <span class="ruby-keyword">when</span> <span class="ruby-number">10</span>  <span class="ruby-comment"># 防具</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
  <span class="ruby-keyword">when</span> <span class="ruby-number">11</span>  <span class="ruby-comment"># 按钮</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-constant">Input</span>.<span class="ruby-identifier">press?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
  <span class="ruby-keyword">when</span> <span class="ruby-number">12</span>  <span class="ruby-comment"># 活动块</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
  <span class="ruby-keyword">when</span> <span class="ruby-number">13</span>  <span class="ruby-comment"># 交通工具</span>
    <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">vehicle_type</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">result</span>     <span class="ruby-comment"># 判断结果保存在 hash 中</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_112">
            
              <b>command_112</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_112" name="method-i-command_112" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>循环</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_112_source')" id="l_method-i-command_112_source">show</a>
                
              </p>
              <div id="method-i-command_112_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 687</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_112</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_113">
            
              <b>command_113</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_113" name="method-i-command_113" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>中断循环</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_113_source')" id="l_method-i-command_113_source">show</a>
                
              </p>
              <div id="method-i-command_113_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 704</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_113</span>
  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">413</span> <span class="ruby-keyword">and</span>    <span class="ruby-comment"># 本事件命令为 [重复上次]</span>
       <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@indent</span>   <span class="ruby-comment"># 缩进浅的情况下</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_115">
            
              <b>command_115</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_115" name="method-i-command_115" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>中断事件处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_115_source')" id="l_method-i-command_115_source">show</a>
                
              </p>
              <div id="method-i-command_115_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 720</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_115</span>
  <span class="ruby-identifier">command_end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_117">
            
              <b>command_117</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_117" name="method-i-command_117" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>公共事件</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_117_source')" id="l_method-i-command_117_source">show</a>
                
              </p>
              <div id="method-i-command_117_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 728</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_117</span>
  <span class="ruby-identifier">common_event</span> = <span class="ruby-identifier">$data_common_events</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">common_event</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@child_interpreter</span> = <span class="ruby-constant">Game_Interpreter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@depth</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
    <span class="ruby-ivar">@child_interpreter</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-identifier">common_event</span>.<span class="ruby-identifier">list</span>, <span class="ruby-ivar">@event_id</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_118">
            
              <b>command_118</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_118" name="method-i-command_118" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>标签</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_118_source')" id="l_method-i-command_118_source">show</a>
                
              </p>
              <div id="method-i-command_118_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 740</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_118</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_119">
            
              <b>command_119</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_119" name="method-i-command_119" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>标签跳转</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_119_source')" id="l_method-i-command_119_source">show</a>
                
              </p>
              <div id="method-i-command_119_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 747</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_119</span>
  <span class="ruby-identifier">label_name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-number">0</span><span class="ruby-operator">...</span><span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">118</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@list</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">label_name</span>
      <span class="ruby-ivar">@index</span> = <span class="ruby-identifier">i</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_121">
            
              <b>command_121</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_121" name="method-i-command_121" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>开关操作</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_121_source')" id="l_method-i-command_121_source">show</a>
                
              </p>
              <div id="method-i-command_121_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 761</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_121</span>
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">..</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]   <span class="ruby-comment"># 循环全部操作</span>
    <span class="ruby-identifier">$game_switches</span>[<span class="ruby-identifier">i</span>] = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_122">
            
              <b>command_122</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_122" name="method-i-command_122" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>变量操作</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_122_source')" id="l_method-i-command_122_source">show</a>
                
              </p>
              <div id="method-i-command_122_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 772</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_122</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-number">0</span>
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]  <span class="ruby-comment"># 操作数</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 恒量</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
  <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 变量</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
  <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 随机数</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">rand</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>] <span class="ruby-operator">-</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
  <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 物品</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">item_number</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]])
  <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 角色</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 等级</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">level</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 经验</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">exp</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># HP</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># MP</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">mp</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># MaxHP</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxhp</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># MaxMP</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxmp</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 攻击力</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">atk</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 防御力</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">def</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 精神力</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">spi</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">9</span>  <span class="ruby-comment"># 敏捷性</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">agi</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敌人</span>
    <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># HP</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># MP</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">mp</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># MaxHP</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">maxhp</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># MaxMP</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">maxmp</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 攻击力</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">atk</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 防御力</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">def</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 精神力</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">spi</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 敏捷性</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">agi</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 角色</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># X 坐标</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">x</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># Y 坐标</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">y</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 朝向</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">direction</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 画面 X 坐标</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">screen_x</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 画面 Y 坐标</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">screen_y</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 其它</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 地图 ID</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">map_id</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 同伴人数</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 金钱</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 步数</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">steps</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 游戏时间</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_count</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 计时器</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 存档次数</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">save_count</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">..</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]   <span class="ruby-comment"># 循环全部操作</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]  <span class="ruby-comment"># 操作分支</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 代入</span>
      <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 加法</span>
      <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 减法</span>
      <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">-=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 乘法</span>
      <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">*=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 除法</span>
      <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">/=</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 剰余</span>
      <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-number">99999999</span>    <span class="ruby-comment"># 检查上限</span>
      <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-number">99999999</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-number">-99999999</span>   <span class="ruby-comment"># 检查下限</span>
      <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-number">-99999999</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_123">
            
              <b>command_123</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_123" name="method-i-command_123" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>独立开关操作</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_123_source')" id="l_method-i-command_123_source">show</a>
                
              </p>
              <div id="method-i-command_123_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 894</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_123</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@original_event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
    <span class="ruby-identifier">key</span> = [<span class="ruby-ivar">@map_id</span>, <span class="ruby-ivar">@original_event_id</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_124">
            
              <b>command_124</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_124" name="method-i-command_124" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>计时器操作</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_124_source')" id="l_method-i-command_124_source">show</a>
                
              </p>
              <div id="method-i-command_124_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 906</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_124</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 始動</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] * <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 停止</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_125">
            
              <b>command_125</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_125" name="method-i-command_125" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减金钱</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_125_source')" id="l_method-i-command_125_source">show</a>
                
              </p>
              <div id="method-i-command_125_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 920</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_125</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
  <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_gold</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_126">
            
              <b>command_126</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_126" name="method-i-command_126" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减物品</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_126_source')" id="l_method-i-command_126_source">show</a>
                
              </p>
              <div id="method-i-command_126_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 929</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_126</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
  <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_127">
            
              <b>command_127</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_127" name="method-i-command_127" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减武器</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_127_source')" id="l_method-i-command_127_source">show</a>
                
              </p>
              <div id="method-i-command_127_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 939</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_127</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
  <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_128">
            
              <b>command_128</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_128" name="method-i-command_128" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减防具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_128_source')" id="l_method-i-command_128_source">show</a>
                
              </p>
              <div id="method-i-command_128_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 948</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_128</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
  <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_129">
            
              <b>command_129</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_129" name="method-i-command_129" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>角色的替换</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_129_source')" id="l_method-i-command_129_source">show</a>
                
              </p>
              <div id="method-i-command_129_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 957</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_129</span>
  <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 加入</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 初始化</span>
        <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">setup</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">add_actor</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 离开</span>
      <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">remove_actor</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_132">
            
              <b>command_132</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_132" name="method-i-command_132" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改战斗 BGM</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_132_source')" id="l_method-i-command_132_source">show</a>
                
              </p>
              <div id="method-i-command_132_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 976</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_132</span>
  <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">battle_bgm</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_133">
            
              <b>command_133</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_133" name="method-i-command_133" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改战斗结束的 ME</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_133_source')" id="l_method-i-command_133_source">show</a>
                
              </p>
              <div id="method-i-command_133_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 984</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_133</span>
  <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">battle_end_me</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_134">
            
              <b>command_134</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_134" name="method-i-command_134" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改禁止存档</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_134_source')" id="l_method-i-command_134_source">show</a>
                
              </p>
              <div id="method-i-command_134_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 992</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_134</span>
  <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">save_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_135">
            
              <b>command_135</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_135" name="method-i-command_135" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改禁止菜单</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_135_source')" id="l_method-i-command_135_source">show</a>
                
              </p>
              <div id="method-i-command_135_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1000</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_135</span>
  <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">menu_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_136">
            
              <b>command_136</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_136" name="method-i-command_136" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改禁止遇敌</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_136_source')" id="l_method-i-command_136_source">show</a>
                
              </p>
              <div id="method-i-command_136_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1008</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_136</span>
  <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">encounter_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
  <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">make_encounter_count</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_201">
            
              <b>command_201</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_201" name="method-i-command_201" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>场所移动</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_201_source')" id="l_method-i-command_201_source">show</a>
                
              </p>
              <div id="method-i-command_201_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1017</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_201</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">transfer?</span> <span class="ruby-keyword">or</span>            <span class="ruby-comment"># 场所移动中</span>
     <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>                <span class="ruby-comment"># 文章显示中</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
    <span class="ruby-identifier">map_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-identifier">direction</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
  <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
    <span class="ruby-identifier">map_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
    <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
    <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
    <span class="ruby-identifier">direction</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">reserve_transfer</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-identifier">direction</span>)
  <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_202">
            
              <b>command_202</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_202" name="method-i-command_202" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>设置交通工具位置</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_202_source')" id="l_method-i-command_202_source">show</a>
                
              </p>
              <div id="method-i-command_202_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1042</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_202</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
    <span class="ruby-identifier">map_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
  <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
    <span class="ruby-identifier">map_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
    <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
    <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 小型船</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">boat</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 大型船</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">ship</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
  <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 飞行船</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">airship</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_203">
            
              <b>command_203</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_203" name="method-i-command_203" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>设置事件位置</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_203_source')" id="l_method-i-command_203_source">show</a>
                
              </p>
              <div id="method-i-command_203_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1065</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_203</span>
  <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">new_x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
      <span class="ruby-identifier">new_y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">new_x</span>, <span class="ruby-identifier">new_y</span>)
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 与其它事件交换</span>
      <span class="ruby-identifier">old_x</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">x</span>
      <span class="ruby-identifier">old_y</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">y</span>
      <span class="ruby-identifier">character2</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">character2</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">character2</span>.<span class="ruby-identifier">x</span>, <span class="ruby-identifier">character2</span>.<span class="ruby-identifier">y</span>)
        <span class="ruby-identifier">character2</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">old_x</span>, <span class="ruby-identifier">old_y</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]   <span class="ruby-comment"># 设置角色朝向</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 上</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_up</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 右</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_right</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 下</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_down</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 左</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_left</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_204">
            
              <b>command_204</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_204" name="method-i-command_204" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>地图的滚动</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_204_source')" id="l_method-i-command_204_source">show</a>
                
              </p>
              <div id="method-i-command_204_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1100</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_204</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">scrolling?</span>
  <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">start_scroll</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_205">
            
              <b>command_205</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_205" name="method-i-command_205" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>设置移动路线</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_205_source')" id="l_method-i-command_205_source">show</a>
                
              </p>
              <div id="method-i-command_205_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1110</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_205</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">refresh</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">character</span>.<span class="ruby-identifier">force_move_route</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-ivar">@moving_character</span> = <span class="ruby-identifier">character</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">wait</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_206">
            
              <b>command_206</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_206" name="method-i-command_206" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>交通工具乘降</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_206_source')" id="l_method-i-command_206_source">show</a>
                
              </p>
              <div id="method-i-command_206_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1125</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_206</span>
  <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">get_on_off_vehicle</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_211">
            
              <b>command_211</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_211" name="method-i-command_211" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改透明状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_211_source')" id="l_method-i-command_211_source">show</a>
                
              </p>
              <div id="method-i-command_211_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1133</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_211</span>
  <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">transparent</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_212">
            
              <b>command_212</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_212" name="method-i-command_212" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>显示动画</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_212_source')" id="l_method-i-command_212_source">show</a>
                
              </p>
              <div id="method-i-command_212_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1141</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_212</span>
  <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">character</span>.<span class="ruby-identifier">animation_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_213">
            
              <b>command_213</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_213" name="method-i-command_213" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>显示表情动画</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_213_source')" id="l_method-i-command_213_source">show</a>
                
              </p>
              <div id="method-i-command_213_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1152</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_213</span>
  <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">character</span>.<span class="ruby-identifier">balloon_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_214">
            
              <b>command_214</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_214" name="method-i-command_214" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>暂时消除事件</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_214_source')" id="l_method-i-command_214_source">show</a>
                
              </p>
              <div id="method-i-command_214_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1163</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_214</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>].<span class="ruby-identifier">erase</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_221">
            
              <b>command_221</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_221" name="method-i-command_221" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>淡出画面</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_221_source')" id="l_method-i-command_221_source">show</a>
                
              </p>
              <div id="method-i-command_221_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1174</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_221</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_fadeout</span>(<span class="ruby-number">30</span>)
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-number">30</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_222">
            
              <b>command_222</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_222" name="method-i-command_222" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>淡入画面</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_222_source')" id="l_method-i-command_222_source">show</a>
                
              </p>
              <div id="method-i-command_222_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1187</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_222</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_fadein</span>(<span class="ruby-number">30</span>)
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-number">30</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_223">
            
              <b>command_223</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_223" name="method-i-command_223" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改画面色调</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_223_source')" id="l_method-i-command_223_source">show</a>
                
              </p>
              <div id="method-i-command_223_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1200</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_223</span>
  <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_tone_change</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
  <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_224">
            
              <b>command_224</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_224" name="method-i-command_224" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>画面闪烁</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_224_source')" id="l_method-i-command_224_source">show</a>
                
              </p>
              <div id="method-i-command_224_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1209</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_224</span>
  <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_flash</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
  <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_225">
            
              <b>command_225</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_225" name="method-i-command_225" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>画面震动</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_225_source')" id="l_method-i-command_225_source">show</a>
                
              </p>
              <div id="method-i-command_225_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1218</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_225</span>
  <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_shake</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
  <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_230">
            
              <b>command_230</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_230" name="method-i-command_230" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>等待</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_230_source')" id="l_method-i-command_230_source">show</a>
                
              </p>
              <div id="method-i-command_230_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1227</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_230</span>
  <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_231">
            
              <b>command_231</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_231" name="method-i-command_231" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>显示图片</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_231_source')" id="l_method-i-command_231_source">show</a>
                
              </p>
              <div id="method-i-command_231_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1235</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_231</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 直接指定</span>
    <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
  <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 变量指定</span>
    <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">show</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>],
    <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">6</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">7</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">8</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">9</span>])
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_232">
            
              <b>command_232</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_232" name="method-i-command_232" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>移动图片</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_232_source')" id="l_method-i-command_232_source">show</a>
                
              </p>
              <div id="method-i-command_232_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1251</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_232</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 直接指定</span>
    <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
  <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 变量指定</span>
    <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]]
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">move</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">6</span>],
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">7</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">8</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">9</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">10</span>])
  <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">10</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">11</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_233">
            
              <b>command_233</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_233" name="method-i-command_233" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>旋转图片</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_233_source')" id="l_method-i-command_233_source">show</a>
                
              </p>
              <div id="method-i-command_233_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1268</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_233</span>
  <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">rotate</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_234">
            
              <b>command_234</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_234" name="method-i-command_234" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改图片色调</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_234_source')" id="l_method-i-command_234_source">show</a>
                
              </p>
              <div id="method-i-command_234_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1276</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_234</span>
  <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">start_tone_change</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
  <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_235">
            
              <b>command_235</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_235" name="method-i-command_235" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>消失图片</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_235_source')" id="l_method-i-command_235_source">show</a>
                
              </p>
              <div id="method-i-command_235_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1285</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_235</span>
  <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">erase</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_236">
            
              <b>command_236</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_236" name="method-i-command_236" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>天气设置</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_236_source')" id="l_method-i-command_236_source">show</a>
                
              </p>
              <div id="method-i-command_236_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1293</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_236</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
  <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">weather</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
  <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_241">
            
              <b>command_241</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_241" name="method-i-command_241" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>演奏 BGM</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_241_source')" id="l_method-i-command_241_source">show</a>
                
              </p>
              <div id="method-i-command_241_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1303</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_241</span>
  <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_242">
            
              <b>command_242</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_242" name="method-i-command_242" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>淡出 BGM</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_242_source')" id="l_method-i-command_242_source">show</a>
                
              </p>
              <div id="method-i-command_242_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1311</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_242</span>
  <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">BGM</span>.<span class="ruby-identifier">fade</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] * <span class="ruby-number">1000</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_245">
            
              <b>command_245</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_245" name="method-i-command_245" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>演奏 BGS</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_245_source')" id="l_method-i-command_245_source">show</a>
                
              </p>
              <div id="method-i-command_245_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1319</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_245</span>
  <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_246">
            
              <b>command_246</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_246" name="method-i-command_246" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>淡出 BGS</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_246_source')" id="l_method-i-command_246_source">show</a>
                
              </p>
              <div id="method-i-command_246_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1327</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_246</span>
  <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">BGS</span>.<span class="ruby-identifier">fade</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] * <span class="ruby-number">1000</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_249">
            
              <b>command_249</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_249" name="method-i-command_249" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>演奏 ME</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_249_source')" id="l_method-i-command_249_source">show</a>
                
              </p>
              <div id="method-i-command_249_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1335</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_249</span>
  <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_250">
            
              <b>command_250</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_250" name="method-i-command_250" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>演奏 SE</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_250_source')" id="l_method-i-command_250_source">show</a>
                
              </p>
              <div id="method-i-command_250_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1343</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_250</span>
  <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_251">
            
              <b>command_251</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_251" name="method-i-command_251" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>停止 SE</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_251_source')" id="l_method-i-command_251_source">show</a>
                
              </p>
              <div id="method-i-command_251_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1351</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_251</span>
  <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">SE</span>.<span class="ruby-identifier">stop</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_301">
            
              <b>command_301</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_301" name="method-i-command_301" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>战斗处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_301_source')" id="l_method-i-command_301_source">show</a>
                
              </p>
              <div id="method-i-command_301_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1359</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_301</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
    <span class="ruby-identifier">troop_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
  <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
    <span class="ruby-identifier">troop_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$data_troops</span>[<span class="ruby-identifier">troop_id</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-identifier">troop_id</span>)
    <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_escape</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_lose</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">battle_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">n</span> }
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;battle&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_302">
            
              <b>command_302</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_302" name="method-i-command_302" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>商店的处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_302_source')" id="l_method-i-command_302_source">show</a>
                
              </p>
              <div id="method-i-command_302_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1413</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_302</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;shop&quot;</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_goods</span> = [<span class="ruby-ivar">@params</span>]
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_purchase_only</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">605</span>          <span class="ruby-comment"># 商店 2 行以下</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_goods</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_303">
            
              <b>command_303</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_303" name="method-i-command_303" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>名称输入处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_303_source')" id="l_method-i-command_303_source">show</a>
                
              </p>
              <div id="method-i-command_303_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1430</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_303</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$data_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;name&quot;</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">name_actor_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">name_max_char</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_311">
            
              <b>command_311</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_311" name="method-i-command_311" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减 HP</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_311_source')" id="l_method-i-command_311_source">show</a>
                
              </p>
              <div id="method-i-command_311_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1443</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_311</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
  <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">dead?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> = <span class="ruby-number">1</span>    <span class="ruby-comment"># 如果战斗不能没被准许为1</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">perform_collapse</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">all_dead?</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;gameover&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_312">
            
              <b>command_312</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_312" name="method-i-command_312" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减 MP</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_312_source')" id="l_method-i-command_312_source">show</a>
                
              </p>
              <div id="method-i-command_312_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1463</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_312</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
  <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_313">
            
              <b>command_313</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_313" name="method-i-command_313" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_313_source')" id="l_method-i-command_313_source">show</a>
                
              </p>
              <div id="method-i-command_313_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1474</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_313</span>
  <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">add_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">perform_collapse</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">remove_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_314">
            
              <b>command_314</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_314" name="method-i-command_314" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>完全回复</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_314_source')" id="l_method-i-command_314_source">show</a>
                
              </p>
              <div id="method-i-command_314_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1489</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_314</span>
  <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">recover_all</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_315">
            
              <b>command_315</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_315" name="method-i-command_315" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减经验</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_315_source')" id="l_method-i-command_315_source">show</a>
                
              </p>
              <div id="method-i-command_315_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1499</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_315</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
  <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_exp</span>(<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">exp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_316">
            
              <b>command_316</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_316" name="method-i-command_316" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减等级</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_316_source')" id="l_method-i-command_316_source">show</a>
                
              </p>
              <div id="method-i-command_316_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1510</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_316</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
  <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_level</span>(<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">level</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_317">
            
              <b>command_317</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_317" name="method-i-command_317" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减能力值</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_317_source')" id="l_method-i-command_317_source">show</a>
                
              </p>
              <div id="method-i-command_317_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1521</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_317</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
  <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># MaxHP</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxhp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># MaxMP</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxmp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 攻击力</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">atk</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 防御力</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">def</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 精神力</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">spi</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敏捷性</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">agi</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_318">
            
              <b>command_318</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_318" name="method-i-command_318" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减特技</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_318_source')" id="l_method-i-command_318_source">show</a>
                
              </p>
              <div id="method-i-command_318_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1546</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_318</span>
  <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">learn_skill</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">forget_skill</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_319">
            
              <b>command_319</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_319" name="method-i-command_319" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>变更装备</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_319_source')" id="l_method-i-command_319_source">show</a>
                
              </p>
              <div id="method-i-command_319_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1561</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_319</span>
  <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_equip_by_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_320">
            
              <b>command_320</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_320" name="method-i-command_320" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改角色的名字</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_320_source')" id="l_method-i-command_320_source">show</a>
                
              </p>
              <div id="method-i-command_320_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1572</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_320</span>
  <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_321">
            
              <b>command_321</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_321" name="method-i-command_321" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改角色的职业</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_321_source')" id="l_method-i-command_321_source">show</a>
                
              </p>
              <div id="method-i-command_321_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1583</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_321</span>
  <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">$data_classes</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">class_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_322">
            
              <b>command_322</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_322" name="method-i-command_322" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改角色的图形</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_322_source')" id="l_method-i-command_322_source">show</a>
                
              </p>
              <div id="method-i-command_322_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1594</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_322</span>
  <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">refresh</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_323">
            
              <b>command_323</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_323" name="method-i-command_323" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改交通工具的图形</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_323_source')" id="l_method-i-command_323_source">show</a>
                
              </p>
              <div id="method-i-command_323_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1606</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_323</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 小型船</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">boat</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 大型船</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">ship</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
  <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 飞行船</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">airship</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_331">
            
              <b>command_331</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_331" name="method-i-command_331" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减敌人的 HP</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_331_source')" id="l_method-i-command_331_source">show</a>
                
              </p>
              <div id="method-i-command_331_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1620</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_331</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
  <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> = <span class="ruby-number">1</span>    <span class="ruby-comment"># 如果战斗不能没被准许为1</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">perform_collapse</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_332">
            
              <b>command_332</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_332" name="method-i-command_332" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>增减敌人的 MP</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_332_source')" id="l_method-i-command_332_source">show</a>
                
              </p>
              <div id="method-i-command_332_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1638</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_332</span>
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
  <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_333">
            
              <b>command_333</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_333" name="method-i-command_333" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>更改敌人的状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_333_source')" id="l_method-i-command_333_source">show</a>
                
              </p>
              <div id="method-i-command_333_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1649</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_333</span>
  <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                    <span class="ruby-comment"># 变更战斗不能</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">immortal</span> = <span class="ruby-keyword">false</span>              <span class="ruby-comment"># 清除不死身标志</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">add_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">perform_collapse</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">remove_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_334">
            
              <b>command_334</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_334" name="method-i-command_334" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>敌人的全回复</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_334_source')" id="l_method-i-command_334_source">show</a>
                
              </p>
              <div id="method-i-command_334_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1667</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_334</span>
  <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">recover_all</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_335">
            
              <b>command_335</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_335" name="method-i-command_335" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>敌人出现</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_335_source')" id="l_method-i-command_335_source">show</a>
                
              </p>
              <div id="method-i-command_335_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1677</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_335</span>
  <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hidden</span>
    <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hidden</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_unique_names</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_336">
            
              <b>command_336</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_336" name="method-i-command_336" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>敌人变身</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_336_source')" id="l_method-i-command_336_source">show</a>
                
              </p>
              <div id="method-i-command_336_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1689</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_336</span>
  <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">transform</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_unique_names</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_337">
            
              <b>command_337</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_337" name="method-i-command_337" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>显示战斗动画</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_337_source')" id="l_method-i-command_337_source">show</a>
                
              </p>
              <div id="method-i-command_337_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1701</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_337</span>
  <span class="ruby-identifier">iterate_battler</span>(<span class="ruby-number">0</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">battler</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">exist?</span>
    <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">animation_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_339">
            
              <b>command_339</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_339" name="method-i-command_339" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>强制战斗行动</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_339_source')" id="l_method-i-command_339_source">show</a>
                
              </p>
              <div id="method-i-command_339_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1712</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_339</span>
  <span class="ruby-identifier">iterate_battler</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">battler</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">exist?</span>
    <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">kind</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">kind</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">basic</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">skill_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-number">-2</span>                   <span class="ruby-comment"># 最后目标</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">decide_last_target</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-number">-1</span>                <span class="ruby-comment"># 随机目标</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">decide_random_target</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">&gt;=</span> <span class="ruby-number">0</span>                 <span class="ruby-comment"># 指定目标</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">target_index</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">forcing</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">forcing_battler</span> = <span class="ruby-identifier">battler</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_340">
            
              <b>command_340</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_340" name="method-i-command_340" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>战斗中断</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_340_source')" id="l_method-i-command_340_source">show</a>
                
              </p>
              <div id="method-i-command_340_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1739</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_340</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;map&quot;</span>
  <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_351">
            
              <b>command_351</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_351" name="method-i-command_351" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>调用菜单画面</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_351_source')" id="l_method-i-command_351_source">show</a>
                
              </p>
              <div id="method-i-command_351_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1748</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_351</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;menu&quot;</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">menu_beep</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_352">
            
              <b>command_352</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_352" name="method-i-command_352" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>调用存档画面</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_352_source')" id="l_method-i-command_352_source">show</a>
                
              </p>
              <div id="method-i-command_352_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1758</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_352</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;save&quot;</span>
  <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_353">
            
              <b>command_353</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_353" name="method-i-command_353" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>游戏结束</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_353_source')" id="l_method-i-command_353_source">show</a>
                
              </p>
              <div id="method-i-command_353_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1767</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_353</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;gameover&quot;</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_354">
            
              <b>command_354</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_354" name="method-i-command_354" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>返回标题画面</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_354_source')" id="l_method-i-command_354_source">show</a>
                
              </p>
              <div id="method-i-command_354_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1775</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_354</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;title&quot;</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_355">
            
              <b>command_355</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_355" name="method-i-command_355" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>脚本</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_355_source')" id="l_method-i-command_355_source">show</a>
                
              </p>
              <div id="method-i-command_355_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1783</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_355</span>
  <span class="ruby-identifier">script</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">655</span>        <span class="ruby-comment"># 脚本 2 行以上的情况下</span>
      <span class="ruby-identifier">script</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">break</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">script</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_402">
            
              <b>command_402</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_402" name="method-i-command_402" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <dl class="rdoc-list label-list"><dt>**
<dd>
<p>的情况下</p>
</dd></dl>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_402_source')" id="l_method-i-command_402_source">show</a>
                
              </p>
              <div id="method-i-command_402_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 523</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_402</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]       <span class="ruby-comment"># 如果符合的选择项被选择</span>
    <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)               <span class="ruby-comment"># 删除分支数据</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>                           <span class="ruby-comment"># 継続</span>
  <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 不符合条件的情况下</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>                   <span class="ruby-comment"># 指令跳转</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_403">
            
              <b>command_403</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_403" name="method-i-command_403" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>取消的情况下</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_403_source')" id="l_method-i-command_403_source">show</a>
                
              </p>
              <div id="method-i-command_403_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 535</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_403</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">4</span>                <span class="ruby-comment"># 如果选择了选择项取消</span>
    <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)               <span class="ruby-comment"># 删除分支数据</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>                           <span class="ruby-comment"># 继续</span>
  <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 不符合条件的情况下</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>                   <span class="ruby-comment"># 指令跳转</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_411">
            
              <b>command_411</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_411" name="method-i-command_411" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>这以外的情况</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_411_source')" id="l_method-i-command_411_source">show</a>
                
              </p>
              <div id="method-i-command_411_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 676</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_411</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_413">
            
              <b>command_413</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_413" name="method-i-command_413" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>重复上次</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_413_source')" id="l_method-i-command_413_source">show</a>
                
              </p>
              <div id="method-i-command_413_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 694</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_413</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">-=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">end</span> <span class="ruby-keyword">until</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@indent</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_601">
            
              <b>command_601</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_601" name="method-i-command_601" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>胜利的情况下</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_601_source')" id="l_method-i-command_601_source">show</a>
                
              </p>
              <div id="method-i-command_601_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1380</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_601</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
    <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_602">
            
              <b>command_602</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_602" name="method-i-command_602" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>逃跑的情况下</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_602_source')" id="l_method-i-command_602_source">show</a>
                
              </p>
              <div id="method-i-command_602_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1391</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_602</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>
    <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_603">
            
              <b>command_603</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_603" name="method-i-command_603" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>失败的情况下</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_603_source')" id="l_method-i-command_603_source">show</a>
                
              </p>
              <div id="method-i-command_603_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 1402</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_603</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">2</span>
    <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_end">
            
              <b>command_end</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_end" name="method-i-command_end" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>事件结束</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_end_source')" id="l_method-i-command_end_source">show</a>
                
              </p>
              <div id="method-i-command_end_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 410</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_end</span>
  <span class="ruby-ivar">@list</span> = <span class="ruby-keyword">nil</span>                             <span class="ruby-comment"># 清除执行内容列表</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@main</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>              <span class="ruby-comment"># 主地图事件与事件 ID 有效的情况下</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>].<span class="ruby-identifier">unlock</span>    <span class="ruby-comment"># 解除事件锁定</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-command_skip">
            
              <b>command_skip</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-command_skip" name="method-i-command_skip" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>指令跳转</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-command_skip_source')" id="l_method-i-command_skip_source">show</a>
                
              </p>
              <div id="method-i-command_skip_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 420</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_skip</span>
  <span class="ruby-keyword">while</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@indent</span>  <span class="ruby-comment"># 下一个事件命令是同等级的缩进的情况下</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>                           <span class="ruby-comment"># 推进索引</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-execute_command">
            
              <b>execute_command</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-execute_command" name="method-i-execute_command" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>执行事件指令</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-execute_command_source')" id="l_method-i-execute_command_source">show</a>
                
              </p>
              <div id="method-i-execute_command_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 213</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_command</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>
    <span class="ruby-identifier">command_end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@params</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>
    <span class="ruby-ivar">@indent</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">101</span>  <span class="ruby-comment"># 文章的显示</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_101</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">102</span>  <span class="ruby-comment"># 显示选择项</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_102</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">402</span>  <span class="ruby-comment"># [**] 的情况下</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_402</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">403</span>  <span class="ruby-comment"># 取消的情况下</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_403</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">103</span>  <span class="ruby-comment"># 处理数值输入</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_103</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">111</span>  <span class="ruby-comment"># 条件分支</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_111</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">411</span>  <span class="ruby-comment"># 这以外的情况</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_411</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">112</span>  <span class="ruby-comment"># 循环</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_112</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">413</span>  <span class="ruby-comment"># 重复上次</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_413</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">113</span>  <span class="ruby-comment"># 中断循环</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_113</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">115</span>  <span class="ruby-comment"># 中断事件处理</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_115</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">117</span>  <span class="ruby-comment"># 公共事件</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_117</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">118</span>  <span class="ruby-comment"># 标签</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_118</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">119</span>  <span class="ruby-comment"># 标签跳转</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_119</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">121</span>  <span class="ruby-comment"># 操作开关</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_121</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">122</span>  <span class="ruby-comment"># 操作变量</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_122</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">123</span>  <span class="ruby-comment"># 操作独立开关</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_123</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">124</span>  <span class="ruby-comment"># 操作计时器</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_124</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">125</span>  <span class="ruby-comment"># 增减金钱</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_125</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">126</span>  <span class="ruby-comment"># 增减物品</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_126</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">127</span>  <span class="ruby-comment"># 增减武器</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_127</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">128</span>  <span class="ruby-comment"># 增减防具</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_128</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">129</span>  <span class="ruby-comment"># 替换角色</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_129</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">132</span>  <span class="ruby-comment"># 更改战斗 BGM</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_132</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">133</span>  <span class="ruby-comment"># 更改结束 ME</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_133</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">134</span>  <span class="ruby-comment"># 更改禁止保存</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_134</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">135</span>  <span class="ruby-comment"># 更改禁止菜单</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_135</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">136</span>  <span class="ruby-comment"># 更改禁止遇敌</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_136</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">201</span>  <span class="ruby-comment"># 場所移動</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_201</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">202</span>  <span class="ruby-comment"># 设置交通工具位置</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_202</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">203</span>  <span class="ruby-comment"># 设置事件位置</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_203</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">204</span>  <span class="ruby-comment"># 地图滚动</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_204</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">205</span>  <span class="ruby-comment"># 设定移动路线</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_205</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">206</span>  <span class="ruby-comment"># 交通工具乘降</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_206</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">211</span>  <span class="ruby-comment"># 更改透明状态</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_211</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">212</span>  <span class="ruby-comment"># 显示动画</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_212</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">213</span>  <span class="ruby-comment"># 显示表情动画</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_213</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">214</span>  <span class="ruby-comment"># 暂时消除事件</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_214</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">221</span>  <span class="ruby-comment"># 淡出画面</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_221</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">222</span>  <span class="ruby-comment"># 淡入画面</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_222</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">223</span>  <span class="ruby-comment"># 更改画面色调</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_223</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">224</span>  <span class="ruby-comment"># 画面闪烁</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_224</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">225</span>  <span class="ruby-comment"># 画面震动</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_225</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">230</span>  <span class="ruby-comment"># 等待</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_230</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">231</span>  <span class="ruby-comment"># 显示图片</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_231</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">232</span>  <span class="ruby-comment"># 移动图片</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_232</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">233</span>  <span class="ruby-comment"># 旋转图片</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_233</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">234</span>  <span class="ruby-comment"># 更改图片色调</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_234</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">235</span>  <span class="ruby-comment"># 消失图片</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_235</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">236</span>  <span class="ruby-comment"># 设置天气</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_236</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">241</span>  <span class="ruby-comment"># 演奏BGM</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_241</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">242</span>  <span class="ruby-comment"># 淡出BGM</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_242</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">245</span>  <span class="ruby-comment"># 演奏BGS</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_245</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">246</span>  <span class="ruby-comment"># 淡出BGS</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_246</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">249</span>  <span class="ruby-comment"># 演奏ME</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_249</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">250</span>  <span class="ruby-comment"># 演奏SE</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_250</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">251</span>  <span class="ruby-comment"># 停止SE</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_251</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">301</span>  <span class="ruby-comment"># 战斗处理</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_301</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">601</span>  <span class="ruby-comment"># 胜利的情况</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_601</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">602</span>  <span class="ruby-comment"># 逃跑的情况</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_602</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">603</span>  <span class="ruby-comment"># 失败的情况</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_603</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">302</span>  <span class="ruby-comment"># 商店的处理</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_302</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">303</span>  <span class="ruby-comment"># 名称输入的处理</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_303</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">311</span>  <span class="ruby-comment"># 增减 HP</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_311</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">312</span>  <span class="ruby-comment"># 增减 MP</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_312</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">313</span>  <span class="ruby-comment"># 更改状态</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_313</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">314</span>  <span class="ruby-comment"># 全回复</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_314</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">315</span>  <span class="ruby-comment"># 增减 经验</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_315</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">316</span>  <span class="ruby-comment"># 増減 等级</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_316</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">317</span>  <span class="ruby-comment"># 増減 能力值</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_317</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">318</span>  <span class="ruby-comment"># 增减特技</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_318</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">319</span>  <span class="ruby-comment"># 变更装备</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_319</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">320</span>  <span class="ruby-comment"># 更改角色名字</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_320</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">321</span>  <span class="ruby-comment"># 更改角色职业</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_321</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">322</span>  <span class="ruby-comment"># 更改角色图形</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_322</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">323</span>  <span class="ruby-comment"># 更改交通工具图形</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_323</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">331</span>  <span class="ruby-comment"># 増減敌人的 HP</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_331</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">332</span>  <span class="ruby-comment"># 増減敌人的 MP</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_332</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">333</span>  <span class="ruby-comment"># 更改敌人的状态</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_333</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">334</span>  <span class="ruby-comment"># 敌人全回复</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_334</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">335</span>  <span class="ruby-comment"># 敌人出现</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_335</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">336</span>  <span class="ruby-comment"># 敌人变身</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_336</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">337</span>  <span class="ruby-comment"># 显示战斗动画</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_337</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">339</span>  <span class="ruby-comment"># 强制战斗行动</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_339</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">340</span>  <span class="ruby-comment"># 中断战斗</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_340</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">351</span>  <span class="ruby-comment"># 调用菜单画面</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_351</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">352</span>  <span class="ruby-comment"># 调用存档画面</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_352</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">353</span>  <span class="ruby-comment"># 游戏结束</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_353</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">354</span>  <span class="ruby-comment"># 返回标题画面</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_354</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">355</span>  <span class="ruby-comment"># 脚本</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_355</span>
    <span class="ruby-keyword">else</span>      <span class="ruby-comment"># 其它</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-get_character">
            
              <b>get_character</b>(param)
            
            <a href="../classes/Game_Interpreter.html#method-i-get_character" name="method-i-get_character" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>获取角色</p>

<p>param : -1 是角色、0 是本事件、除此以外是 事件 ID</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-get_character_source')" id="l_method-i-get_character_source">show</a>
                
              </p>
              <div id="method-i-get_character_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 430</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">get_character</span>(<span class="ruby-identifier">param</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">param</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">-1</span>   <span class="ruby-comment"># 角色</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_player</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 本事件</span>
    <span class="ruby-identifier">events</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">events</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>]
  <span class="ruby-keyword">else</span>      <span class="ruby-comment"># 特定的事件</span>
    <span class="ruby-identifier">events</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">events</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">events</span>[<span class="ruby-identifier">param</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-iterate_actor_id">
            
              <b>iterate_actor_id</b>(param)
            
            <a href="../classes/Game_Interpreter.html#method-i-iterate_actor_id" name="method-i-iterate_actor_id" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>角色用itereta(ID)</p>

<p>param : 1 以上是 ID、0 是全体</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-iterate_actor_id_source')" id="l_method-i-iterate_actor_id_source">show</a>
                
              </p>
              <div id="method-i-iterate_actor_id_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 149</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">iterate_actor_id</span>(<span class="ruby-identifier">param</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">param</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>       <span class="ruby-comment"># 全体</span>
      <span class="ruby-keyword">for</span> <span class="ruby-identifier">actor</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span> <span class="ruby-keyword">do</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">actor</span> <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>                <span class="ruby-comment"># 单体</span>
      <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-identifier">param</span>]
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">actor</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 角色用itereta (索引)</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># param : 0 以上是索引、-1 是全体</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">iterate_actor_index</span>(<span class="ruby-identifier">param</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">param</span> <span class="ruby-operator">==</span> <span class="ruby-number">-1</span>      <span class="ruby-comment"># 全体</span>
      <span class="ruby-keyword">for</span> <span class="ruby-identifier">actor</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span> <span class="ruby-keyword">do</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">actor</span> <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>                <span class="ruby-comment"># 单体</span>
      <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>[<span class="ruby-identifier">param</span>]
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">actor</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人用itereta (索引)</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># param : 0 以上是索引、-1 是全体</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">iterate_enemy_index</span>(<span class="ruby-identifier">param</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">param</span> <span class="ruby-operator">==</span> <span class="ruby-number">-1</span>      <span class="ruby-comment"># 全体</span>
      <span class="ruby-keyword">for</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span> <span class="ruby-keyword">do</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>                <span class="ruby-comment"># 单体</span>
      <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-identifier">param</span>]
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 战斗者用itereta (要考虑全体队伍、全体同伴)</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># param1 : 0 是敌人、1 是角色</span>
  <span class="ruby-comment"># param2 : 0 以上是索引、-1 是全体</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">iterate_battler</span>(<span class="ruby-identifier">param1</span>, <span class="ruby-identifier">param2</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">param1</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>      <span class="ruby-comment"># 敌人</span>
        <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-identifier">param2</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>                <span class="ruby-comment"># 角色</span>
        <span class="ruby-identifier">iterate_actor_index</span>(<span class="ruby-identifier">param2</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 获取画面指令对象</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">screen</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">screen</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">screen</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 执行事件指令</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_command</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>
      <span class="ruby-identifier">command_end</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@params</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>
      <span class="ruby-ivar">@indent</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">101</span>  <span class="ruby-comment"># 文章的显示</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_101</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">102</span>  <span class="ruby-comment"># 显示选择项</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_102</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">402</span>  <span class="ruby-comment"># [**] 的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_402</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">403</span>  <span class="ruby-comment"># 取消的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_403</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">103</span>  <span class="ruby-comment"># 处理数值输入</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_103</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">111</span>  <span class="ruby-comment"># 条件分支</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_111</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">411</span>  <span class="ruby-comment"># 这以外的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_411</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">112</span>  <span class="ruby-comment"># 循环</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_112</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">413</span>  <span class="ruby-comment"># 重复上次</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_413</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">113</span>  <span class="ruby-comment"># 中断循环</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_113</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">115</span>  <span class="ruby-comment"># 中断事件处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_115</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">117</span>  <span class="ruby-comment"># 公共事件</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_117</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">118</span>  <span class="ruby-comment"># 标签</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_118</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">119</span>  <span class="ruby-comment"># 标签跳转</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_119</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">121</span>  <span class="ruby-comment"># 操作开关</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_121</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">122</span>  <span class="ruby-comment"># 操作变量</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_122</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">123</span>  <span class="ruby-comment"># 操作独立开关</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_123</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">124</span>  <span class="ruby-comment"># 操作计时器</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_124</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">125</span>  <span class="ruby-comment"># 增减金钱</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_125</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">126</span>  <span class="ruby-comment"># 增减物品</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_126</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">127</span>  <span class="ruby-comment"># 增减武器</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_127</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">128</span>  <span class="ruby-comment"># 增减防具</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_128</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">129</span>  <span class="ruby-comment"># 替换角色</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_129</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">132</span>  <span class="ruby-comment"># 更改战斗 BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_132</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">133</span>  <span class="ruby-comment"># 更改结束 ME</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_133</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">134</span>  <span class="ruby-comment"># 更改禁止保存</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_134</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">135</span>  <span class="ruby-comment"># 更改禁止菜单</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_135</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">136</span>  <span class="ruby-comment"># 更改禁止遇敌</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_136</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">201</span>  <span class="ruby-comment"># 場所移動</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_201</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">202</span>  <span class="ruby-comment"># 设置交通工具位置</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_202</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">203</span>  <span class="ruby-comment"># 设置事件位置</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_203</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">204</span>  <span class="ruby-comment"># 地图滚动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_204</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">205</span>  <span class="ruby-comment"># 设定移动路线</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_205</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">206</span>  <span class="ruby-comment"># 交通工具乘降</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_206</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">211</span>  <span class="ruby-comment"># 更改透明状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_211</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">212</span>  <span class="ruby-comment"># 显示动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_212</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">213</span>  <span class="ruby-comment"># 显示表情动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_213</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">214</span>  <span class="ruby-comment"># 暂时消除事件</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_214</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">221</span>  <span class="ruby-comment"># 淡出画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_221</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">222</span>  <span class="ruby-comment"># 淡入画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_222</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">223</span>  <span class="ruby-comment"># 更改画面色调</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_223</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">224</span>  <span class="ruby-comment"># 画面闪烁</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_224</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">225</span>  <span class="ruby-comment"># 画面震动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_225</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">230</span>  <span class="ruby-comment"># 等待</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_230</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">231</span>  <span class="ruby-comment"># 显示图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_231</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">232</span>  <span class="ruby-comment"># 移动图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_232</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">233</span>  <span class="ruby-comment"># 旋转图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_233</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">234</span>  <span class="ruby-comment"># 更改图片色调</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_234</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">235</span>  <span class="ruby-comment"># 消失图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_235</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">236</span>  <span class="ruby-comment"># 设置天气</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_236</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">241</span>  <span class="ruby-comment"># 演奏BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_241</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">242</span>  <span class="ruby-comment"># 淡出BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_242</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">245</span>  <span class="ruby-comment"># 演奏BGS</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_245</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">246</span>  <span class="ruby-comment"># 淡出BGS</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_246</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">249</span>  <span class="ruby-comment"># 演奏ME</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_249</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">250</span>  <span class="ruby-comment"># 演奏SE</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_250</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">251</span>  <span class="ruby-comment"># 停止SE</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_251</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">301</span>  <span class="ruby-comment"># 战斗处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_301</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">601</span>  <span class="ruby-comment"># 胜利的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_601</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">602</span>  <span class="ruby-comment"># 逃跑的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_602</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">603</span>  <span class="ruby-comment"># 失败的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_603</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">302</span>  <span class="ruby-comment"># 商店的处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_302</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">303</span>  <span class="ruby-comment"># 名称输入的处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_303</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">311</span>  <span class="ruby-comment"># 增减 HP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_311</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">312</span>  <span class="ruby-comment"># 增减 MP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_312</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">313</span>  <span class="ruby-comment"># 更改状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_313</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">314</span>  <span class="ruby-comment"># 全回复</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_314</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">315</span>  <span class="ruby-comment"># 增减 经验</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_315</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">316</span>  <span class="ruby-comment"># 増減 等级</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_316</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">317</span>  <span class="ruby-comment"># 増減 能力值</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_317</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">318</span>  <span class="ruby-comment"># 增减特技</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_318</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">319</span>  <span class="ruby-comment"># 变更装备</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_319</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">320</span>  <span class="ruby-comment"># 更改角色名字</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_320</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">321</span>  <span class="ruby-comment"># 更改角色职业</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_321</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">322</span>  <span class="ruby-comment"># 更改角色图形</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_322</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">323</span>  <span class="ruby-comment"># 更改交通工具图形</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_323</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">331</span>  <span class="ruby-comment"># 増減敌人的 HP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_331</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">332</span>  <span class="ruby-comment"># 増減敌人的 MP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_332</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">333</span>  <span class="ruby-comment"># 更改敌人的状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_333</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">334</span>  <span class="ruby-comment"># 敌人全回复</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_334</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">335</span>  <span class="ruby-comment"># 敌人出现</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_335</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">336</span>  <span class="ruby-comment"># 敌人变身</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_336</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">337</span>  <span class="ruby-comment"># 显示战斗动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_337</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">339</span>  <span class="ruby-comment"># 强制战斗行动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_339</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">340</span>  <span class="ruby-comment"># 中断战斗</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_340</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">351</span>  <span class="ruby-comment"># 调用菜单画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_351</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">352</span>  <span class="ruby-comment"># 调用存档画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_352</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">353</span>  <span class="ruby-comment"># 游戏结束</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_353</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">354</span>  <span class="ruby-comment"># 返回标题画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_354</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">355</span>  <span class="ruby-comment"># 脚本</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_355</span>
      <span class="ruby-keyword">else</span>      <span class="ruby-comment"># 其它</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 事件结束</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_end</span>
    <span class="ruby-ivar">@list</span> = <span class="ruby-keyword">nil</span>                             <span class="ruby-comment"># 清除执行内容列表</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@main</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>              <span class="ruby-comment"># 主地图事件与事件 ID 有效的情况下</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>].<span class="ruby-identifier">unlock</span>    <span class="ruby-comment"># 解除事件锁定</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 指令跳转</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_skip</span>
    <span class="ruby-keyword">while</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@indent</span>  <span class="ruby-comment"># 下一个事件命令是同等级的缩进的情况下</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>                           <span class="ruby-comment"># 推进索引</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 获取角色</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># param : -1 是角色、0 是本事件、除此以外是 事件 ID</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">get_character</span>(<span class="ruby-identifier">param</span>)
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">param</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">-1</span>   <span class="ruby-comment"># 角色</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_player</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 本事件</span>
      <span class="ruby-identifier">events</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">events</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>]
    <span class="ruby-keyword">else</span>      <span class="ruby-comment"># 特定的事件</span>
      <span class="ruby-identifier">events</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">events</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">events</span>[<span class="ruby-identifier">param</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 计算操作的值</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># operation    : 操作</span>
  <span class="ruby-comment"># operand_type : 操作数类型 (0:恒量 1:变量)</span>
  <span class="ruby-comment"># operand      : 操作数 (数值是变量 ID)</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">operate_value</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">operand_type</span>, <span class="ruby-identifier">operand</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">operand_type</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operand</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">operand</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">operation</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-operator">-</span><span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示文章</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_101</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">face_name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">face_index</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">background</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">position</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">while</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">401</span>       <span class="ruby-comment"># 文章数据</span>
        <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>])
        <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">102</span>          <span class="ruby-comment"># 显示选择项</span>
        <span class="ruby-identifier">setup_choices</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">103</span>       <span class="ruby-comment"># 处理数值输入</span>
        <span class="ruby-identifier">setup_num_input</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置文章待机标记与call back</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">set_message_waiting</span>
    <span class="ruby-ivar">@message_waiting</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">main_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-ivar">@message_waiting</span> = <span class="ruby-keyword">false</span> }
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示选择项</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_102</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">setup_choices</span>(<span class="ruby-ivar">@params</span>)                <span class="ruby-comment"># 设置选择项</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置选择项</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_choices</span>(<span class="ruby-identifier">params</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">4</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">size</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_start</span> = <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_max</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">for</span> <span class="ruby-identifier">s</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>]
        <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">s</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_cancel_type</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">n</span> }
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># [**] 的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_402</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]       <span class="ruby-comment"># 如果符合的选择项被选择</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)               <span class="ruby-comment"># 删除分支数据</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>                           <span class="ruby-comment"># 継続</span>
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 不符合条件的情况下</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>                   <span class="ruby-comment"># 指令跳转</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 取消的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_403</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">4</span>                <span class="ruby-comment"># 如果选择了选择项取消</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)               <span class="ruby-comment"># 删除分支数据</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>                           <span class="ruby-comment"># 继续</span>
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 不符合条件的情况下</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>                   <span class="ruby-comment"># 指令跳转</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 处理数值输入</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_103</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">setup_num_input</span>(<span class="ruby-ivar">@params</span>)              <span class="ruby-comment"># 设置数值输入</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置数值输入</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_num_input</span>(<span class="ruby-identifier">params</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">4</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">num_input_variable_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">num_input_digits_max</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 条件分歧</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_111</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 开关</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_switches</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]] <span class="ruby-operator">==</span> (<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>))
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 变量</span>
      <span class="ruby-identifier">value1</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">value2</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">value2</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 等于</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 以上</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 以下</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 超过</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 未满</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 以外</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 独立开关</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@original_event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">key</span> = [<span class="ruby-ivar">@map_id</span>, <span class="ruby-ivar">@original_event_id</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">true</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 计时器</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span>
        <span class="ruby-identifier">sec</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">sec</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">sec</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 同伴</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">actor</span>))
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 名称</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 特技</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">skill_learn?</span>(<span class="ruby-identifier">$data_skills</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 武器</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">weapons</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 防具</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">armors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 状态</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">state?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]))
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敌人</span>
      <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 出现</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">exist?</span>)
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 状态</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">state?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]))
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">character</span>.<span class="ruby-identifier">direction</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 金钱</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 物品</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]])
    <span class="ruby-keyword">when</span> <span class="ruby-number">9</span>  <span class="ruby-comment"># 武器</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">10</span>  <span class="ruby-comment"># 防具</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">11</span>  <span class="ruby-comment"># 按钮</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-constant">Input</span>.<span class="ruby-identifier">press?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">12</span>  <span class="ruby-comment"># 活动块</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">13</span>  <span class="ruby-comment"># 交通工具</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">vehicle_type</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">result</span>     <span class="ruby-comment"># 判断结果保存在 hash 中</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 这以外的情况</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_411</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 循环</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_112</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 重复上次</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_413</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">-=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span> <span class="ruby-keyword">until</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@indent</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 中断循环</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_113</span>
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">413</span> <span class="ruby-keyword">and</span>    <span class="ruby-comment"># 本事件命令为 [重复上次]</span>
         <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@indent</span>   <span class="ruby-comment"># 缩进浅的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 中断事件处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_115</span>
    <span class="ruby-identifier">command_end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 公共事件</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_117</span>
    <span class="ruby-identifier">common_event</span> = <span class="ruby-identifier">$data_common_events</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">common_event</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-ivar">@child_interpreter</span> = <span class="ruby-constant">Game_Interpreter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@depth</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
      <span class="ruby-ivar">@child_interpreter</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-identifier">common_event</span>.<span class="ruby-identifier">list</span>, <span class="ruby-ivar">@event_id</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 标签</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_118</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 标签跳转</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_119</span>
    <span class="ruby-identifier">label_name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-number">0</span><span class="ruby-operator">...</span><span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">118</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@list</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">label_name</span>
        <span class="ruby-ivar">@index</span> = <span class="ruby-identifier">i</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 开关操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_121</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">..</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]   <span class="ruby-comment"># 循环全部操作</span>
      <span class="ruby-identifier">$game_switches</span>[<span class="ruby-identifier">i</span>] = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 变量操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_122</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-number">0</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]  <span class="ruby-comment"># 操作数</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 恒量</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 变量</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 随机数</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">rand</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>] <span class="ruby-operator">-</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 物品</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">item_number</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]])
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 等级</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">level</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 经验</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">exp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># HP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># MP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">mp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># MaxHP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxhp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># MaxMP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxmp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 攻击力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">atk</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 防御力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">def</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 精神力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">spi</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">9</span>  <span class="ruby-comment"># 敏捷性</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">agi</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敌人</span>
      <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># HP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># MP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">mp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># MaxHP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">maxhp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># MaxMP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">maxmp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 攻击力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">atk</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 防御力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">def</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 精神力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">spi</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 敏捷性</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">agi</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># X 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">x</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># Y 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">y</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 朝向</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">direction</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 画面 X 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">screen_x</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 画面 Y 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">screen_y</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 其它</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 地图 ID</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">map_id</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 同伴人数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 金钱</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 步数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">steps</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 游戏时间</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_count</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 计时器</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 存档次数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">save_count</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">..</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]   <span class="ruby-comment"># 循环全部操作</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]  <span class="ruby-comment"># 操作分支</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 代入</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 加法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 减法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">-=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 乘法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">*=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 除法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">/=</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 剰余</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-number">99999999</span>    <span class="ruby-comment"># 检查上限</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-number">99999999</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-number">-99999999</span>   <span class="ruby-comment"># 检查下限</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-number">-99999999</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 独立开关操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_123</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@original_event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">key</span> = [<span class="ruby-ivar">@map_id</span>, <span class="ruby-ivar">@original_event_id</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
      <span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 计时器操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_124</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 始動</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] * <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 停止</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减金钱</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_125</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_gold</span>(<span class="ruby-identifier">value</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减物品</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_126</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>)
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减武器</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_127</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减防具</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_128</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 角色的替换</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_129</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 加入</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 初始化</span>
          <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">setup</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">add_actor</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
      <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 离开</span>
        <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">remove_actor</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改战斗 BGM</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_132</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">battle_bgm</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改战斗结束的 ME</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_133</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">battle_end_me</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止存档</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_134</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">save_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止菜单</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_135</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">menu_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止遇敌</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_136</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">encounter_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">make_encounter_count</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 场所移动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_201</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">transfer?</span> <span class="ruby-keyword">or</span>            <span class="ruby-comment"># 场所移动中</span>
       <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>                <span class="ruby-comment"># 文章显示中</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">direction</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-identifier">direction</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">reserve_transfer</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-identifier">direction</span>)
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置交通工具位置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_202</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 小型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">boat</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 大型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">ship</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 飞行船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">airship</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置事件位置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_203</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 变量指定</span>
        <span class="ruby-identifier">new_x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
        <span class="ruby-identifier">new_y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">new_x</span>, <span class="ruby-identifier">new_y</span>)
      <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 与其它事件交换</span>
        <span class="ruby-identifier">old_x</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">x</span>
        <span class="ruby-identifier">old_y</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">y</span>
        <span class="ruby-identifier">character2</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">character2</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
          <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">character2</span>.<span class="ruby-identifier">x</span>, <span class="ruby-identifier">character2</span>.<span class="ruby-identifier">y</span>)
          <span class="ruby-identifier">character2</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">old_x</span>, <span class="ruby-identifier">old_y</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]   <span class="ruby-comment"># 设置角色朝向</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 上</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_up</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 右</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_right</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 下</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_down</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 左</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_left</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 地图的滚动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_204</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">scrolling?</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">start_scroll</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置移动路线</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_205</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">refresh</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">force_move_route</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-ivar">@moving_character</span> = <span class="ruby-identifier">character</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">wait</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 交通工具乘降</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_206</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">get_on_off_vehicle</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改透明状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_211</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">transparent</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_212</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">animation_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示表情动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_213</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">balloon_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 暂时消除事件</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_214</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>].<span class="ruby-identifier">erase</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_221</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_fadeout</span>(<span class="ruby-number">30</span>)
      <span class="ruby-ivar">@wait_count</span> = <span class="ruby-number">30</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡入画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_222</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_fadein</span>(<span class="ruby-number">30</span>)
      <span class="ruby-ivar">@wait_count</span> = <span class="ruby-number">30</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改画面色调</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_223</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_tone_change</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 画面闪烁</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_224</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_flash</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 画面震动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_225</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_shake</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 等待</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_230</span>
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_231</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
    <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">show</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>],
      <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">6</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">7</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">8</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">9</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 移动图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_232</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
    <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">move</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">6</span>],
      <span class="ruby-ivar">@params</span>[<span class="ruby-number">7</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">8</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">9</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">10</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">10</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">11</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 旋转图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_233</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">rotate</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改图片色调</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_234</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">start_tone_change</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 消失图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_235</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">erase</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 天气设置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_236</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">weather</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 BGM</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_241</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出 BGM </span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_242</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">BGM</span>.<span class="ruby-identifier">fade</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] * <span class="ruby-number">1000</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 BGS</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_245</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出 BGS</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_246</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">BGS</span>.<span class="ruby-identifier">fade</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] * <span class="ruby-number">1000</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 ME</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_249</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 SE</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_250</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 停止 SE</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_251</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">SE</span>.<span class="ruby-identifier">stop</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 战斗处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_301</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">troop_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">troop_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$data_troops</span>[<span class="ruby-identifier">troop_id</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-identifier">troop_id</span>)
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_escape</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_lose</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">battle_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">n</span> }
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;battle&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 胜利的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_601</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 逃跑的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_602</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 失败的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_603</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">2</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 商店的处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_302</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;shop&quot;</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_goods</span> = [<span class="ruby-ivar">@params</span>]
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_purchase_only</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">605</span>          <span class="ruby-comment"># 商店 2 行以下</span>
        <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_goods</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 名称输入处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_303</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$data_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;name&quot;</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">name_actor_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">name_max_char</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减 HP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_311</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">dead?</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> = <span class="ruby-number">1</span>    <span class="ruby-comment"># 如果战斗不能没被准许为1</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">perform_collapse</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">all_dead?</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;gameover&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减 MP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_312</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_313</span>
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">add_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">remove_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 完全回复</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_314</span>
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">recover_all</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减经验</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_315</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_exp</span>(<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">exp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减等级</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_316</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_level</span>(<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">level</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减能力值</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_317</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># MaxHP</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxhp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># MaxMP</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxmp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 攻击力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">atk</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 防御力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">def</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 精神力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">spi</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敏捷性</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">agi</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减特技</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_318</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">learn_skill</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">forget_skill</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 变更装备</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_319</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_equip_by_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的名字</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_320</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的职业</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_321</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">$data_classes</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">class_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的图形</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_322</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">refresh</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改交通工具的图形</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_323</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 小型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">boat</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 大型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">ship</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 飞行船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">airship</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减敌人的 HP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_331</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> = <span class="ruby-number">1</span>    <span class="ruby-comment"># 如果战斗不能没被准许为1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减敌人的 MP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_332</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改敌人的状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_333</span>
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                    <span class="ruby-comment"># 变更战斗不能</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">immortal</span> = <span class="ruby-keyword">false</span>              <span class="ruby-comment"># 清除不死身标志</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">add_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">remove_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人的全回复</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_334</span>
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">recover_all</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人出现</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_335</span>
    <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hidden</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hidden</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_unique_names</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人变身</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_336</span>
    <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">transform</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_unique_names</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示战斗动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_337</span>
    <span class="ruby-identifier">iterate_battler</span>(<span class="ruby-number">0</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">battler</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">exist?</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">animation_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 强制战斗行动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_339</span>
    <span class="ruby-identifier">iterate_battler</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">battler</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">exist?</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">kind</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">kind</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">basic</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">skill_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-number">-2</span>                   <span class="ruby-comment"># 最后目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">decide_last_target</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-number">-1</span>                <span class="ruby-comment"># 随机目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">decide_random_target</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">&gt;=</span> <span class="ruby-number">0</span>                 <span class="ruby-comment"># 指定目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">target_index</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">forcing</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">forcing_battler</span> = <span class="ruby-identifier">battler</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 战斗中断</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_340</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;map&quot;</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 调用菜单画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_351</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;menu&quot;</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">menu_beep</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 调用存档画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_352</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;save&quot;</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 游戏结束</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_353</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;gameover&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 返回标题画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_354</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;title&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 脚本</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_355</span>
    <span class="ruby-identifier">script</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">655</span>        <span class="ruby-comment"># 脚本 2 行以上的情况下</span>
        <span class="ruby-identifier">script</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">break</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">script</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-iterate_actor_index">
            
              <b>iterate_actor_index</b>(param)
            
            <a href="../classes/Game_Interpreter.html#method-i-iterate_actor_index" name="method-i-iterate_actor_index" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>角色用itereta (索引)</p>

<p>param : 0 以上是索引、-1 是全体</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-iterate_actor_index_source')" id="l_method-i-iterate_actor_index_source">show</a>
                
              </p>
              <div id="method-i-iterate_actor_index_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 162</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">iterate_actor_index</span>(<span class="ruby-identifier">param</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">param</span> <span class="ruby-operator">==</span> <span class="ruby-number">-1</span>      <span class="ruby-comment"># 全体</span>
      <span class="ruby-keyword">for</span> <span class="ruby-identifier">actor</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span> <span class="ruby-keyword">do</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">actor</span> <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>                <span class="ruby-comment"># 单体</span>
      <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>[<span class="ruby-identifier">param</span>]
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">actor</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人用itereta (索引)</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># param : 0 以上是索引、-1 是全体</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">iterate_enemy_index</span>(<span class="ruby-identifier">param</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">param</span> <span class="ruby-operator">==</span> <span class="ruby-number">-1</span>      <span class="ruby-comment"># 全体</span>
      <span class="ruby-keyword">for</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span> <span class="ruby-keyword">do</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>                <span class="ruby-comment"># 单体</span>
      <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-identifier">param</span>]
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 战斗者用itereta (要考虑全体队伍、全体同伴)</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># param1 : 0 是敌人、1 是角色</span>
  <span class="ruby-comment"># param2 : 0 以上是索引、-1 是全体</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">iterate_battler</span>(<span class="ruby-identifier">param1</span>, <span class="ruby-identifier">param2</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">param1</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>      <span class="ruby-comment"># 敌人</span>
        <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-identifier">param2</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>                <span class="ruby-comment"># 角色</span>
        <span class="ruby-identifier">iterate_actor_index</span>(<span class="ruby-identifier">param2</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 获取画面指令对象</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">screen</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">screen</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">screen</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 执行事件指令</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_command</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>
      <span class="ruby-identifier">command_end</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@params</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>
      <span class="ruby-ivar">@indent</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">101</span>  <span class="ruby-comment"># 文章的显示</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_101</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">102</span>  <span class="ruby-comment"># 显示选择项</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_102</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">402</span>  <span class="ruby-comment"># [**] 的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_402</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">403</span>  <span class="ruby-comment"># 取消的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_403</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">103</span>  <span class="ruby-comment"># 处理数值输入</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_103</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">111</span>  <span class="ruby-comment"># 条件分支</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_111</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">411</span>  <span class="ruby-comment"># 这以外的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_411</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">112</span>  <span class="ruby-comment"># 循环</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_112</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">413</span>  <span class="ruby-comment"># 重复上次</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_413</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">113</span>  <span class="ruby-comment"># 中断循环</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_113</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">115</span>  <span class="ruby-comment"># 中断事件处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_115</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">117</span>  <span class="ruby-comment"># 公共事件</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_117</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">118</span>  <span class="ruby-comment"># 标签</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_118</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">119</span>  <span class="ruby-comment"># 标签跳转</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_119</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">121</span>  <span class="ruby-comment"># 操作开关</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_121</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">122</span>  <span class="ruby-comment"># 操作变量</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_122</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">123</span>  <span class="ruby-comment"># 操作独立开关</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_123</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">124</span>  <span class="ruby-comment"># 操作计时器</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_124</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">125</span>  <span class="ruby-comment"># 增减金钱</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_125</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">126</span>  <span class="ruby-comment"># 增减物品</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_126</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">127</span>  <span class="ruby-comment"># 增减武器</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_127</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">128</span>  <span class="ruby-comment"># 增减防具</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_128</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">129</span>  <span class="ruby-comment"># 替换角色</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_129</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">132</span>  <span class="ruby-comment"># 更改战斗 BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_132</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">133</span>  <span class="ruby-comment"># 更改结束 ME</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_133</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">134</span>  <span class="ruby-comment"># 更改禁止保存</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_134</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">135</span>  <span class="ruby-comment"># 更改禁止菜单</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_135</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">136</span>  <span class="ruby-comment"># 更改禁止遇敌</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_136</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">201</span>  <span class="ruby-comment"># 場所移動</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_201</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">202</span>  <span class="ruby-comment"># 设置交通工具位置</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_202</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">203</span>  <span class="ruby-comment"># 设置事件位置</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_203</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">204</span>  <span class="ruby-comment"># 地图滚动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_204</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">205</span>  <span class="ruby-comment"># 设定移动路线</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_205</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">206</span>  <span class="ruby-comment"># 交通工具乘降</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_206</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">211</span>  <span class="ruby-comment"># 更改透明状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_211</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">212</span>  <span class="ruby-comment"># 显示动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_212</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">213</span>  <span class="ruby-comment"># 显示表情动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_213</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">214</span>  <span class="ruby-comment"># 暂时消除事件</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_214</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">221</span>  <span class="ruby-comment"># 淡出画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_221</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">222</span>  <span class="ruby-comment"># 淡入画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_222</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">223</span>  <span class="ruby-comment"># 更改画面色调</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_223</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">224</span>  <span class="ruby-comment"># 画面闪烁</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_224</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">225</span>  <span class="ruby-comment"># 画面震动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_225</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">230</span>  <span class="ruby-comment"># 等待</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_230</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">231</span>  <span class="ruby-comment"># 显示图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_231</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">232</span>  <span class="ruby-comment"># 移动图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_232</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">233</span>  <span class="ruby-comment"># 旋转图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_233</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">234</span>  <span class="ruby-comment"># 更改图片色调</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_234</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">235</span>  <span class="ruby-comment"># 消失图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_235</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">236</span>  <span class="ruby-comment"># 设置天气</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_236</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">241</span>  <span class="ruby-comment"># 演奏BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_241</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">242</span>  <span class="ruby-comment"># 淡出BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_242</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">245</span>  <span class="ruby-comment"># 演奏BGS</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_245</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">246</span>  <span class="ruby-comment"># 淡出BGS</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_246</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">249</span>  <span class="ruby-comment"># 演奏ME</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_249</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">250</span>  <span class="ruby-comment"># 演奏SE</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_250</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">251</span>  <span class="ruby-comment"># 停止SE</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_251</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">301</span>  <span class="ruby-comment"># 战斗处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_301</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">601</span>  <span class="ruby-comment"># 胜利的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_601</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">602</span>  <span class="ruby-comment"># 逃跑的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_602</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">603</span>  <span class="ruby-comment"># 失败的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_603</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">302</span>  <span class="ruby-comment"># 商店的处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_302</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">303</span>  <span class="ruby-comment"># 名称输入的处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_303</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">311</span>  <span class="ruby-comment"># 增减 HP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_311</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">312</span>  <span class="ruby-comment"># 增减 MP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_312</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">313</span>  <span class="ruby-comment"># 更改状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_313</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">314</span>  <span class="ruby-comment"># 全回复</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_314</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">315</span>  <span class="ruby-comment"># 增减 经验</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_315</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">316</span>  <span class="ruby-comment"># 増減 等级</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_316</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">317</span>  <span class="ruby-comment"># 増減 能力值</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_317</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">318</span>  <span class="ruby-comment"># 增减特技</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_318</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">319</span>  <span class="ruby-comment"># 变更装备</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_319</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">320</span>  <span class="ruby-comment"># 更改角色名字</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_320</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">321</span>  <span class="ruby-comment"># 更改角色职业</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_321</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">322</span>  <span class="ruby-comment"># 更改角色图形</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_322</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">323</span>  <span class="ruby-comment"># 更改交通工具图形</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_323</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">331</span>  <span class="ruby-comment"># 増減敌人的 HP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_331</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">332</span>  <span class="ruby-comment"># 増減敌人的 MP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_332</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">333</span>  <span class="ruby-comment"># 更改敌人的状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_333</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">334</span>  <span class="ruby-comment"># 敌人全回复</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_334</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">335</span>  <span class="ruby-comment"># 敌人出现</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_335</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">336</span>  <span class="ruby-comment"># 敌人变身</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_336</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">337</span>  <span class="ruby-comment"># 显示战斗动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_337</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">339</span>  <span class="ruby-comment"># 强制战斗行动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_339</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">340</span>  <span class="ruby-comment"># 中断战斗</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_340</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">351</span>  <span class="ruby-comment"># 调用菜单画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_351</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">352</span>  <span class="ruby-comment"># 调用存档画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_352</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">353</span>  <span class="ruby-comment"># 游戏结束</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_353</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">354</span>  <span class="ruby-comment"># 返回标题画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_354</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">355</span>  <span class="ruby-comment"># 脚本</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_355</span>
      <span class="ruby-keyword">else</span>      <span class="ruby-comment"># 其它</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 事件结束</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_end</span>
    <span class="ruby-ivar">@list</span> = <span class="ruby-keyword">nil</span>                             <span class="ruby-comment"># 清除执行内容列表</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@main</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>              <span class="ruby-comment"># 主地图事件与事件 ID 有效的情况下</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>].<span class="ruby-identifier">unlock</span>    <span class="ruby-comment"># 解除事件锁定</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 指令跳转</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_skip</span>
    <span class="ruby-keyword">while</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@indent</span>  <span class="ruby-comment"># 下一个事件命令是同等级的缩进的情况下</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>                           <span class="ruby-comment"># 推进索引</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 获取角色</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># param : -1 是角色、0 是本事件、除此以外是 事件 ID</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">get_character</span>(<span class="ruby-identifier">param</span>)
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">param</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">-1</span>   <span class="ruby-comment"># 角色</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_player</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 本事件</span>
      <span class="ruby-identifier">events</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">events</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>]
    <span class="ruby-keyword">else</span>      <span class="ruby-comment"># 特定的事件</span>
      <span class="ruby-identifier">events</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">events</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">events</span>[<span class="ruby-identifier">param</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 计算操作的值</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># operation    : 操作</span>
  <span class="ruby-comment"># operand_type : 操作数类型 (0:恒量 1:变量)</span>
  <span class="ruby-comment"># operand      : 操作数 (数值是变量 ID)</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">operate_value</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">operand_type</span>, <span class="ruby-identifier">operand</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">operand_type</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operand</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">operand</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">operation</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-operator">-</span><span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示文章</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_101</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">face_name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">face_index</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">background</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">position</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">while</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">401</span>       <span class="ruby-comment"># 文章数据</span>
        <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>])
        <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">102</span>          <span class="ruby-comment"># 显示选择项</span>
        <span class="ruby-identifier">setup_choices</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">103</span>       <span class="ruby-comment"># 处理数值输入</span>
        <span class="ruby-identifier">setup_num_input</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置文章待机标记与call back</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">set_message_waiting</span>
    <span class="ruby-ivar">@message_waiting</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">main_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-ivar">@message_waiting</span> = <span class="ruby-keyword">false</span> }
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示选择项</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_102</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">setup_choices</span>(<span class="ruby-ivar">@params</span>)                <span class="ruby-comment"># 设置选择项</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置选择项</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_choices</span>(<span class="ruby-identifier">params</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">4</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">size</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_start</span> = <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_max</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">for</span> <span class="ruby-identifier">s</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>]
        <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">s</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_cancel_type</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">n</span> }
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># [**] 的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_402</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]       <span class="ruby-comment"># 如果符合的选择项被选择</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)               <span class="ruby-comment"># 删除分支数据</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>                           <span class="ruby-comment"># 継続</span>
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 不符合条件的情况下</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>                   <span class="ruby-comment"># 指令跳转</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 取消的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_403</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">4</span>                <span class="ruby-comment"># 如果选择了选择项取消</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)               <span class="ruby-comment"># 删除分支数据</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>                           <span class="ruby-comment"># 继续</span>
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 不符合条件的情况下</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>                   <span class="ruby-comment"># 指令跳转</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 处理数值输入</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_103</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">setup_num_input</span>(<span class="ruby-ivar">@params</span>)              <span class="ruby-comment"># 设置数值输入</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置数值输入</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_num_input</span>(<span class="ruby-identifier">params</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">4</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">num_input_variable_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">num_input_digits_max</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 条件分歧</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_111</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 开关</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_switches</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]] <span class="ruby-operator">==</span> (<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>))
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 变量</span>
      <span class="ruby-identifier">value1</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">value2</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">value2</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 等于</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 以上</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 以下</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 超过</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 未满</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 以外</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 独立开关</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@original_event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">key</span> = [<span class="ruby-ivar">@map_id</span>, <span class="ruby-ivar">@original_event_id</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">true</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 计时器</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span>
        <span class="ruby-identifier">sec</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">sec</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">sec</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 同伴</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">actor</span>))
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 名称</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 特技</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">skill_learn?</span>(<span class="ruby-identifier">$data_skills</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 武器</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">weapons</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 防具</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">armors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 状态</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">state?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]))
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敌人</span>
      <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 出现</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">exist?</span>)
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 状态</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">state?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]))
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">character</span>.<span class="ruby-identifier">direction</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 金钱</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 物品</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]])
    <span class="ruby-keyword">when</span> <span class="ruby-number">9</span>  <span class="ruby-comment"># 武器</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">10</span>  <span class="ruby-comment"># 防具</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">11</span>  <span class="ruby-comment"># 按钮</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-constant">Input</span>.<span class="ruby-identifier">press?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">12</span>  <span class="ruby-comment"># 活动块</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">13</span>  <span class="ruby-comment"># 交通工具</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">vehicle_type</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">result</span>     <span class="ruby-comment"># 判断结果保存在 hash 中</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 这以外的情况</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_411</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 循环</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_112</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 重复上次</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_413</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">-=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span> <span class="ruby-keyword">until</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@indent</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 中断循环</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_113</span>
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">413</span> <span class="ruby-keyword">and</span>    <span class="ruby-comment"># 本事件命令为 [重复上次]</span>
         <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@indent</span>   <span class="ruby-comment"># 缩进浅的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 中断事件处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_115</span>
    <span class="ruby-identifier">command_end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 公共事件</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_117</span>
    <span class="ruby-identifier">common_event</span> = <span class="ruby-identifier">$data_common_events</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">common_event</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-ivar">@child_interpreter</span> = <span class="ruby-constant">Game_Interpreter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@depth</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
      <span class="ruby-ivar">@child_interpreter</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-identifier">common_event</span>.<span class="ruby-identifier">list</span>, <span class="ruby-ivar">@event_id</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 标签</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_118</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 标签跳转</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_119</span>
    <span class="ruby-identifier">label_name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-number">0</span><span class="ruby-operator">...</span><span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">118</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@list</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">label_name</span>
        <span class="ruby-ivar">@index</span> = <span class="ruby-identifier">i</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 开关操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_121</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">..</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]   <span class="ruby-comment"># 循环全部操作</span>
      <span class="ruby-identifier">$game_switches</span>[<span class="ruby-identifier">i</span>] = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 变量操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_122</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-number">0</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]  <span class="ruby-comment"># 操作数</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 恒量</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 变量</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 随机数</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">rand</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>] <span class="ruby-operator">-</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 物品</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">item_number</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]])
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 等级</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">level</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 经验</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">exp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># HP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># MP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">mp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># MaxHP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxhp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># MaxMP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxmp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 攻击力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">atk</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 防御力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">def</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 精神力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">spi</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">9</span>  <span class="ruby-comment"># 敏捷性</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">agi</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敌人</span>
      <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># HP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># MP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">mp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># MaxHP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">maxhp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># MaxMP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">maxmp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 攻击力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">atk</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 防御力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">def</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 精神力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">spi</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 敏捷性</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">agi</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># X 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">x</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># Y 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">y</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 朝向</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">direction</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 画面 X 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">screen_x</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 画面 Y 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">screen_y</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 其它</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 地图 ID</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">map_id</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 同伴人数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 金钱</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 步数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">steps</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 游戏时间</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_count</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 计时器</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 存档次数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">save_count</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">..</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]   <span class="ruby-comment"># 循环全部操作</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]  <span class="ruby-comment"># 操作分支</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 代入</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 加法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 减法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">-=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 乘法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">*=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 除法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">/=</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 剰余</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-number">99999999</span>    <span class="ruby-comment"># 检查上限</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-number">99999999</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-number">-99999999</span>   <span class="ruby-comment"># 检查下限</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-number">-99999999</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 独立开关操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_123</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@original_event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">key</span> = [<span class="ruby-ivar">@map_id</span>, <span class="ruby-ivar">@original_event_id</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
      <span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 计时器操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_124</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 始動</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] * <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 停止</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减金钱</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_125</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_gold</span>(<span class="ruby-identifier">value</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减物品</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_126</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>)
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减武器</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_127</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减防具</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_128</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 角色的替换</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_129</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 加入</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 初始化</span>
          <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">setup</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">add_actor</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
      <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 离开</span>
        <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">remove_actor</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改战斗 BGM</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_132</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">battle_bgm</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改战斗结束的 ME</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_133</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">battle_end_me</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止存档</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_134</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">save_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止菜单</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_135</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">menu_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止遇敌</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_136</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">encounter_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">make_encounter_count</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 场所移动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_201</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">transfer?</span> <span class="ruby-keyword">or</span>            <span class="ruby-comment"># 场所移动中</span>
       <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>                <span class="ruby-comment"># 文章显示中</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">direction</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-identifier">direction</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">reserve_transfer</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-identifier">direction</span>)
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置交通工具位置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_202</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 小型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">boat</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 大型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">ship</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 飞行船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">airship</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置事件位置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_203</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 变量指定</span>
        <span class="ruby-identifier">new_x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
        <span class="ruby-identifier">new_y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">new_x</span>, <span class="ruby-identifier">new_y</span>)
      <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 与其它事件交换</span>
        <span class="ruby-identifier">old_x</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">x</span>
        <span class="ruby-identifier">old_y</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">y</span>
        <span class="ruby-identifier">character2</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">character2</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
          <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">character2</span>.<span class="ruby-identifier">x</span>, <span class="ruby-identifier">character2</span>.<span class="ruby-identifier">y</span>)
          <span class="ruby-identifier">character2</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">old_x</span>, <span class="ruby-identifier">old_y</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]   <span class="ruby-comment"># 设置角色朝向</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 上</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_up</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 右</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_right</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 下</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_down</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 左</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_left</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 地图的滚动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_204</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">scrolling?</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">start_scroll</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置移动路线</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_205</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">refresh</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">force_move_route</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-ivar">@moving_character</span> = <span class="ruby-identifier">character</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">wait</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 交通工具乘降</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_206</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">get_on_off_vehicle</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改透明状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_211</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">transparent</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_212</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">animation_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示表情动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_213</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">balloon_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 暂时消除事件</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_214</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>].<span class="ruby-identifier">erase</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_221</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_fadeout</span>(<span class="ruby-number">30</span>)
      <span class="ruby-ivar">@wait_count</span> = <span class="ruby-number">30</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡入画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_222</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_fadein</span>(<span class="ruby-number">30</span>)
      <span class="ruby-ivar">@wait_count</span> = <span class="ruby-number">30</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改画面色调</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_223</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_tone_change</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 画面闪烁</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_224</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_flash</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 画面震动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_225</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_shake</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 等待</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_230</span>
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_231</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
    <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">show</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>],
      <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">6</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">7</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">8</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">9</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 移动图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_232</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
    <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">move</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">6</span>],
      <span class="ruby-ivar">@params</span>[<span class="ruby-number">7</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">8</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">9</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">10</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">10</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">11</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 旋转图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_233</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">rotate</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改图片色调</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_234</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">start_tone_change</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 消失图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_235</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">erase</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 天气设置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_236</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">weather</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 BGM</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_241</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出 BGM </span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_242</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">BGM</span>.<span class="ruby-identifier">fade</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] * <span class="ruby-number">1000</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 BGS</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_245</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出 BGS</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_246</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">BGS</span>.<span class="ruby-identifier">fade</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] * <span class="ruby-number">1000</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 ME</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_249</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 SE</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_250</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 停止 SE</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_251</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">SE</span>.<span class="ruby-identifier">stop</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 战斗处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_301</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">troop_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">troop_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$data_troops</span>[<span class="ruby-identifier">troop_id</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-identifier">troop_id</span>)
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_escape</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_lose</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">battle_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">n</span> }
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;battle&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 胜利的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_601</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 逃跑的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_602</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 失败的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_603</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">2</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 商店的处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_302</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;shop&quot;</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_goods</span> = [<span class="ruby-ivar">@params</span>]
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_purchase_only</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">605</span>          <span class="ruby-comment"># 商店 2 行以下</span>
        <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_goods</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 名称输入处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_303</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$data_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;name&quot;</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">name_actor_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">name_max_char</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减 HP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_311</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">dead?</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> = <span class="ruby-number">1</span>    <span class="ruby-comment"># 如果战斗不能没被准许为1</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">perform_collapse</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">all_dead?</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;gameover&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减 MP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_312</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_313</span>
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">add_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">remove_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 完全回复</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_314</span>
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">recover_all</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减经验</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_315</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_exp</span>(<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">exp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减等级</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_316</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_level</span>(<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">level</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减能力值</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_317</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># MaxHP</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxhp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># MaxMP</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxmp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 攻击力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">atk</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 防御力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">def</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 精神力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">spi</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敏捷性</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">agi</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减特技</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_318</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">learn_skill</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">forget_skill</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 变更装备</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_319</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_equip_by_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的名字</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_320</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的职业</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_321</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">$data_classes</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">class_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的图形</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_322</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">refresh</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改交通工具的图形</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_323</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 小型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">boat</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 大型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">ship</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 飞行船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">airship</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减敌人的 HP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_331</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> = <span class="ruby-number">1</span>    <span class="ruby-comment"># 如果战斗不能没被准许为1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减敌人的 MP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_332</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改敌人的状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_333</span>
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                    <span class="ruby-comment"># 变更战斗不能</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">immortal</span> = <span class="ruby-keyword">false</span>              <span class="ruby-comment"># 清除不死身标志</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">add_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">remove_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人的全回复</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_334</span>
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">recover_all</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人出现</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_335</span>
    <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hidden</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hidden</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_unique_names</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人变身</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_336</span>
    <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">transform</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_unique_names</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示战斗动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_337</span>
    <span class="ruby-identifier">iterate_battler</span>(<span class="ruby-number">0</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">battler</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">exist?</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">animation_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 强制战斗行动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_339</span>
    <span class="ruby-identifier">iterate_battler</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">battler</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">exist?</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">kind</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">kind</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">basic</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">skill_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-number">-2</span>                   <span class="ruby-comment"># 最后目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">decide_last_target</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-number">-1</span>                <span class="ruby-comment"># 随机目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">decide_random_target</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">&gt;=</span> <span class="ruby-number">0</span>                 <span class="ruby-comment"># 指定目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">target_index</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">forcing</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">forcing_battler</span> = <span class="ruby-identifier">battler</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 战斗中断</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_340</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;map&quot;</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 调用菜单画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_351</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;menu&quot;</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">menu_beep</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 调用存档画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_352</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;save&quot;</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 游戏结束</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_353</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;gameover&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 返回标题画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_354</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;title&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 脚本</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_355</span>
    <span class="ruby-identifier">script</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">655</span>        <span class="ruby-comment"># 脚本 2 行以上的情况下</span>
        <span class="ruby-identifier">script</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">break</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">script</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-iterate_battler">
            
              <b>iterate_battler</b>(param1, param2)
            
            <a href="../classes/Game_Interpreter.html#method-i-iterate_battler" name="method-i-iterate_battler" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>战斗者用itereta (要考虑全体队伍、全体同伴)</p>

<p>param1 : 0 是敌人、1 是角色 param2 : 0 以上是索引、-1
是全体</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-iterate_battler_source')" id="l_method-i-iterate_battler_source">show</a>
                
              </p>
              <div id="method-i-iterate_battler_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 189</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">iterate_battler</span>(<span class="ruby-identifier">param1</span>, <span class="ruby-identifier">param2</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">param1</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>      <span class="ruby-comment"># 敌人</span>
        <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-identifier">param2</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>                <span class="ruby-comment"># 角色</span>
        <span class="ruby-identifier">iterate_actor_index</span>(<span class="ruby-identifier">param2</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 获取画面指令对象</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">screen</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">screen</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">screen</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 执行事件指令</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_command</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>
      <span class="ruby-identifier">command_end</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@params</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>
      <span class="ruby-ivar">@indent</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">101</span>  <span class="ruby-comment"># 文章的显示</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_101</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">102</span>  <span class="ruby-comment"># 显示选择项</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_102</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">402</span>  <span class="ruby-comment"># [**] 的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_402</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">403</span>  <span class="ruby-comment"># 取消的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_403</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">103</span>  <span class="ruby-comment"># 处理数值输入</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_103</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">111</span>  <span class="ruby-comment"># 条件分支</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_111</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">411</span>  <span class="ruby-comment"># 这以外的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_411</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">112</span>  <span class="ruby-comment"># 循环</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_112</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">413</span>  <span class="ruby-comment"># 重复上次</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_413</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">113</span>  <span class="ruby-comment"># 中断循环</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_113</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">115</span>  <span class="ruby-comment"># 中断事件处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_115</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">117</span>  <span class="ruby-comment"># 公共事件</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_117</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">118</span>  <span class="ruby-comment"># 标签</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_118</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">119</span>  <span class="ruby-comment"># 标签跳转</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_119</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">121</span>  <span class="ruby-comment"># 操作开关</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_121</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">122</span>  <span class="ruby-comment"># 操作变量</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_122</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">123</span>  <span class="ruby-comment"># 操作独立开关</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_123</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">124</span>  <span class="ruby-comment"># 操作计时器</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_124</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">125</span>  <span class="ruby-comment"># 增减金钱</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_125</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">126</span>  <span class="ruby-comment"># 增减物品</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_126</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">127</span>  <span class="ruby-comment"># 增减武器</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_127</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">128</span>  <span class="ruby-comment"># 增减防具</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_128</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">129</span>  <span class="ruby-comment"># 替换角色</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_129</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">132</span>  <span class="ruby-comment"># 更改战斗 BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_132</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">133</span>  <span class="ruby-comment"># 更改结束 ME</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_133</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">134</span>  <span class="ruby-comment"># 更改禁止保存</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_134</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">135</span>  <span class="ruby-comment"># 更改禁止菜单</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_135</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">136</span>  <span class="ruby-comment"># 更改禁止遇敌</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_136</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">201</span>  <span class="ruby-comment"># 場所移動</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_201</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">202</span>  <span class="ruby-comment"># 设置交通工具位置</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_202</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">203</span>  <span class="ruby-comment"># 设置事件位置</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_203</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">204</span>  <span class="ruby-comment"># 地图滚动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_204</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">205</span>  <span class="ruby-comment"># 设定移动路线</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_205</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">206</span>  <span class="ruby-comment"># 交通工具乘降</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_206</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">211</span>  <span class="ruby-comment"># 更改透明状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_211</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">212</span>  <span class="ruby-comment"># 显示动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_212</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">213</span>  <span class="ruby-comment"># 显示表情动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_213</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">214</span>  <span class="ruby-comment"># 暂时消除事件</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_214</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">221</span>  <span class="ruby-comment"># 淡出画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_221</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">222</span>  <span class="ruby-comment"># 淡入画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_222</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">223</span>  <span class="ruby-comment"># 更改画面色调</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_223</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">224</span>  <span class="ruby-comment"># 画面闪烁</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_224</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">225</span>  <span class="ruby-comment"># 画面震动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_225</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">230</span>  <span class="ruby-comment"># 等待</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_230</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">231</span>  <span class="ruby-comment"># 显示图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_231</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">232</span>  <span class="ruby-comment"># 移动图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_232</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">233</span>  <span class="ruby-comment"># 旋转图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_233</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">234</span>  <span class="ruby-comment"># 更改图片色调</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_234</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">235</span>  <span class="ruby-comment"># 消失图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_235</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">236</span>  <span class="ruby-comment"># 设置天气</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_236</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">241</span>  <span class="ruby-comment"># 演奏BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_241</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">242</span>  <span class="ruby-comment"># 淡出BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_242</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">245</span>  <span class="ruby-comment"># 演奏BGS</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_245</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">246</span>  <span class="ruby-comment"># 淡出BGS</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_246</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">249</span>  <span class="ruby-comment"># 演奏ME</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_249</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">250</span>  <span class="ruby-comment"># 演奏SE</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_250</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">251</span>  <span class="ruby-comment"># 停止SE</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_251</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">301</span>  <span class="ruby-comment"># 战斗处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_301</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">601</span>  <span class="ruby-comment"># 胜利的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_601</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">602</span>  <span class="ruby-comment"># 逃跑的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_602</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">603</span>  <span class="ruby-comment"># 失败的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_603</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">302</span>  <span class="ruby-comment"># 商店的处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_302</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">303</span>  <span class="ruby-comment"># 名称输入的处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_303</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">311</span>  <span class="ruby-comment"># 增减 HP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_311</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">312</span>  <span class="ruby-comment"># 增减 MP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_312</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">313</span>  <span class="ruby-comment"># 更改状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_313</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">314</span>  <span class="ruby-comment"># 全回复</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_314</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">315</span>  <span class="ruby-comment"># 增减 经验</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_315</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">316</span>  <span class="ruby-comment"># 増減 等级</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_316</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">317</span>  <span class="ruby-comment"># 増減 能力值</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_317</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">318</span>  <span class="ruby-comment"># 增减特技</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_318</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">319</span>  <span class="ruby-comment"># 变更装备</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_319</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">320</span>  <span class="ruby-comment"># 更改角色名字</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_320</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">321</span>  <span class="ruby-comment"># 更改角色职业</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_321</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">322</span>  <span class="ruby-comment"># 更改角色图形</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_322</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">323</span>  <span class="ruby-comment"># 更改交通工具图形</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_323</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">331</span>  <span class="ruby-comment"># 増減敌人的 HP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_331</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">332</span>  <span class="ruby-comment"># 増減敌人的 MP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_332</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">333</span>  <span class="ruby-comment"># 更改敌人的状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_333</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">334</span>  <span class="ruby-comment"># 敌人全回复</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_334</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">335</span>  <span class="ruby-comment"># 敌人出现</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_335</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">336</span>  <span class="ruby-comment"># 敌人变身</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_336</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">337</span>  <span class="ruby-comment"># 显示战斗动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_337</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">339</span>  <span class="ruby-comment"># 强制战斗行动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_339</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">340</span>  <span class="ruby-comment"># 中断战斗</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_340</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">351</span>  <span class="ruby-comment"># 调用菜单画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_351</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">352</span>  <span class="ruby-comment"># 调用存档画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_352</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">353</span>  <span class="ruby-comment"># 游戏结束</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_353</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">354</span>  <span class="ruby-comment"># 返回标题画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_354</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">355</span>  <span class="ruby-comment"># 脚本</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_355</span>
      <span class="ruby-keyword">else</span>      <span class="ruby-comment"># 其它</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 事件结束</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_end</span>
    <span class="ruby-ivar">@list</span> = <span class="ruby-keyword">nil</span>                             <span class="ruby-comment"># 清除执行内容列表</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@main</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>              <span class="ruby-comment"># 主地图事件与事件 ID 有效的情况下</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>].<span class="ruby-identifier">unlock</span>    <span class="ruby-comment"># 解除事件锁定</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 指令跳转</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_skip</span>
    <span class="ruby-keyword">while</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@indent</span>  <span class="ruby-comment"># 下一个事件命令是同等级的缩进的情况下</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>                           <span class="ruby-comment"># 推进索引</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 获取角色</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># param : -1 是角色、0 是本事件、除此以外是 事件 ID</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">get_character</span>(<span class="ruby-identifier">param</span>)
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">param</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">-1</span>   <span class="ruby-comment"># 角色</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_player</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 本事件</span>
      <span class="ruby-identifier">events</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">events</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>]
    <span class="ruby-keyword">else</span>      <span class="ruby-comment"># 特定的事件</span>
      <span class="ruby-identifier">events</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">events</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">events</span>[<span class="ruby-identifier">param</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 计算操作的值</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># operation    : 操作</span>
  <span class="ruby-comment"># operand_type : 操作数类型 (0:恒量 1:变量)</span>
  <span class="ruby-comment"># operand      : 操作数 (数值是变量 ID)</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">operate_value</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">operand_type</span>, <span class="ruby-identifier">operand</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">operand_type</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operand</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">operand</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">operation</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-operator">-</span><span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示文章</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_101</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">face_name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">face_index</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">background</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">position</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">while</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">401</span>       <span class="ruby-comment"># 文章数据</span>
        <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>])
        <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">102</span>          <span class="ruby-comment"># 显示选择项</span>
        <span class="ruby-identifier">setup_choices</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">103</span>       <span class="ruby-comment"># 处理数值输入</span>
        <span class="ruby-identifier">setup_num_input</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置文章待机标记与call back</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">set_message_waiting</span>
    <span class="ruby-ivar">@message_waiting</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">main_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-ivar">@message_waiting</span> = <span class="ruby-keyword">false</span> }
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示选择项</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_102</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">setup_choices</span>(<span class="ruby-ivar">@params</span>)                <span class="ruby-comment"># 设置选择项</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置选择项</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_choices</span>(<span class="ruby-identifier">params</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">4</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">size</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_start</span> = <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_max</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">for</span> <span class="ruby-identifier">s</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>]
        <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">s</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_cancel_type</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">n</span> }
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># [**] 的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_402</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]       <span class="ruby-comment"># 如果符合的选择项被选择</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)               <span class="ruby-comment"># 删除分支数据</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>                           <span class="ruby-comment"># 継続</span>
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 不符合条件的情况下</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>                   <span class="ruby-comment"># 指令跳转</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 取消的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_403</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">4</span>                <span class="ruby-comment"># 如果选择了选择项取消</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)               <span class="ruby-comment"># 删除分支数据</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>                           <span class="ruby-comment"># 继续</span>
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 不符合条件的情况下</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>                   <span class="ruby-comment"># 指令跳转</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 处理数值输入</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_103</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">setup_num_input</span>(<span class="ruby-ivar">@params</span>)              <span class="ruby-comment"># 设置数值输入</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置数值输入</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_num_input</span>(<span class="ruby-identifier">params</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">4</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">num_input_variable_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">num_input_digits_max</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 条件分歧</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_111</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 开关</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_switches</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]] <span class="ruby-operator">==</span> (<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>))
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 变量</span>
      <span class="ruby-identifier">value1</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">value2</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">value2</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 等于</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 以上</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 以下</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 超过</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 未满</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 以外</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 独立开关</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@original_event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">key</span> = [<span class="ruby-ivar">@map_id</span>, <span class="ruby-ivar">@original_event_id</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">true</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 计时器</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span>
        <span class="ruby-identifier">sec</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">sec</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">sec</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 同伴</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">actor</span>))
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 名称</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 特技</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">skill_learn?</span>(<span class="ruby-identifier">$data_skills</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 武器</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">weapons</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 防具</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">armors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 状态</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">state?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]))
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敌人</span>
      <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 出现</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">exist?</span>)
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 状态</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">state?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]))
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">character</span>.<span class="ruby-identifier">direction</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 金钱</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 物品</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]])
    <span class="ruby-keyword">when</span> <span class="ruby-number">9</span>  <span class="ruby-comment"># 武器</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">10</span>  <span class="ruby-comment"># 防具</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">11</span>  <span class="ruby-comment"># 按钮</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-constant">Input</span>.<span class="ruby-identifier">press?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">12</span>  <span class="ruby-comment"># 活动块</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">13</span>  <span class="ruby-comment"># 交通工具</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">vehicle_type</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">result</span>     <span class="ruby-comment"># 判断结果保存在 hash 中</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 这以外的情况</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_411</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 循环</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_112</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 重复上次</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_413</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">-=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span> <span class="ruby-keyword">until</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@indent</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 中断循环</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_113</span>
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">413</span> <span class="ruby-keyword">and</span>    <span class="ruby-comment"># 本事件命令为 [重复上次]</span>
         <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@indent</span>   <span class="ruby-comment"># 缩进浅的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 中断事件处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_115</span>
    <span class="ruby-identifier">command_end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 公共事件</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_117</span>
    <span class="ruby-identifier">common_event</span> = <span class="ruby-identifier">$data_common_events</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">common_event</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-ivar">@child_interpreter</span> = <span class="ruby-constant">Game_Interpreter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@depth</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
      <span class="ruby-ivar">@child_interpreter</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-identifier">common_event</span>.<span class="ruby-identifier">list</span>, <span class="ruby-ivar">@event_id</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 标签</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_118</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 标签跳转</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_119</span>
    <span class="ruby-identifier">label_name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-number">0</span><span class="ruby-operator">...</span><span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">118</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@list</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">label_name</span>
        <span class="ruby-ivar">@index</span> = <span class="ruby-identifier">i</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 开关操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_121</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">..</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]   <span class="ruby-comment"># 循环全部操作</span>
      <span class="ruby-identifier">$game_switches</span>[<span class="ruby-identifier">i</span>] = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 变量操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_122</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-number">0</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]  <span class="ruby-comment"># 操作数</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 恒量</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 变量</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 随机数</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">rand</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>] <span class="ruby-operator">-</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 物品</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">item_number</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]])
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 等级</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">level</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 经验</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">exp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># HP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># MP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">mp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># MaxHP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxhp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># MaxMP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxmp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 攻击力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">atk</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 防御力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">def</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 精神力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">spi</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">9</span>  <span class="ruby-comment"># 敏捷性</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">agi</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敌人</span>
      <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># HP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># MP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">mp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># MaxHP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">maxhp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># MaxMP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">maxmp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 攻击力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">atk</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 防御力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">def</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 精神力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">spi</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 敏捷性</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">agi</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># X 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">x</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># Y 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">y</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 朝向</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">direction</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 画面 X 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">screen_x</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 画面 Y 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">screen_y</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 其它</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 地图 ID</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">map_id</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 同伴人数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 金钱</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 步数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">steps</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 游戏时间</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_count</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 计时器</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 存档次数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">save_count</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">..</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]   <span class="ruby-comment"># 循环全部操作</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]  <span class="ruby-comment"># 操作分支</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 代入</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 加法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 减法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">-=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 乘法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">*=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 除法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">/=</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 剰余</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-number">99999999</span>    <span class="ruby-comment"># 检查上限</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-number">99999999</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-number">-99999999</span>   <span class="ruby-comment"># 检查下限</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-number">-99999999</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 独立开关操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_123</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@original_event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">key</span> = [<span class="ruby-ivar">@map_id</span>, <span class="ruby-ivar">@original_event_id</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
      <span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 计时器操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_124</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 始動</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] * <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 停止</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减金钱</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_125</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_gold</span>(<span class="ruby-identifier">value</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减物品</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_126</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>)
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减武器</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_127</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减防具</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_128</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 角色的替换</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_129</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 加入</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 初始化</span>
          <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">setup</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">add_actor</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
      <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 离开</span>
        <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">remove_actor</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改战斗 BGM</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_132</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">battle_bgm</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改战斗结束的 ME</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_133</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">battle_end_me</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止存档</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_134</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">save_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止菜单</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_135</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">menu_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止遇敌</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_136</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">encounter_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">make_encounter_count</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 场所移动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_201</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">transfer?</span> <span class="ruby-keyword">or</span>            <span class="ruby-comment"># 场所移动中</span>
       <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>                <span class="ruby-comment"># 文章显示中</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">direction</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-identifier">direction</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">reserve_transfer</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-identifier">direction</span>)
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置交通工具位置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_202</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 小型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">boat</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 大型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">ship</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 飞行船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">airship</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置事件位置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_203</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 变量指定</span>
        <span class="ruby-identifier">new_x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
        <span class="ruby-identifier">new_y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">new_x</span>, <span class="ruby-identifier">new_y</span>)
      <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 与其它事件交换</span>
        <span class="ruby-identifier">old_x</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">x</span>
        <span class="ruby-identifier">old_y</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">y</span>
        <span class="ruby-identifier">character2</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">character2</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
          <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">character2</span>.<span class="ruby-identifier">x</span>, <span class="ruby-identifier">character2</span>.<span class="ruby-identifier">y</span>)
          <span class="ruby-identifier">character2</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">old_x</span>, <span class="ruby-identifier">old_y</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]   <span class="ruby-comment"># 设置角色朝向</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 上</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_up</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 右</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_right</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 下</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_down</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 左</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_left</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 地图的滚动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_204</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">scrolling?</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">start_scroll</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置移动路线</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_205</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">refresh</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">force_move_route</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-ivar">@moving_character</span> = <span class="ruby-identifier">character</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">wait</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 交通工具乘降</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_206</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">get_on_off_vehicle</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改透明状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_211</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">transparent</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_212</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">animation_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示表情动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_213</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">balloon_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 暂时消除事件</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_214</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>].<span class="ruby-identifier">erase</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_221</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_fadeout</span>(<span class="ruby-number">30</span>)
      <span class="ruby-ivar">@wait_count</span> = <span class="ruby-number">30</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡入画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_222</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_fadein</span>(<span class="ruby-number">30</span>)
      <span class="ruby-ivar">@wait_count</span> = <span class="ruby-number">30</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改画面色调</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_223</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_tone_change</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 画面闪烁</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_224</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_flash</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 画面震动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_225</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_shake</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 等待</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_230</span>
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_231</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
    <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">show</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>],
      <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">6</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">7</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">8</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">9</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 移动图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_232</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
    <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">move</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">6</span>],
      <span class="ruby-ivar">@params</span>[<span class="ruby-number">7</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">8</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">9</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">10</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">10</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">11</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 旋转图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_233</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">rotate</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改图片色调</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_234</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">start_tone_change</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 消失图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_235</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">erase</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 天气设置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_236</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">weather</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 BGM</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_241</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出 BGM </span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_242</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">BGM</span>.<span class="ruby-identifier">fade</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] * <span class="ruby-number">1000</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 BGS</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_245</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出 BGS</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_246</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">BGS</span>.<span class="ruby-identifier">fade</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] * <span class="ruby-number">1000</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 ME</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_249</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 SE</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_250</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 停止 SE</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_251</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">SE</span>.<span class="ruby-identifier">stop</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 战斗处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_301</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">troop_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">troop_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$data_troops</span>[<span class="ruby-identifier">troop_id</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-identifier">troop_id</span>)
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_escape</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_lose</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">battle_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">n</span> }
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;battle&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 胜利的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_601</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 逃跑的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_602</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 失败的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_603</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">2</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 商店的处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_302</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;shop&quot;</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_goods</span> = [<span class="ruby-ivar">@params</span>]
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_purchase_only</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">605</span>          <span class="ruby-comment"># 商店 2 行以下</span>
        <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_goods</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 名称输入处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_303</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$data_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;name&quot;</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">name_actor_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">name_max_char</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减 HP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_311</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">dead?</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> = <span class="ruby-number">1</span>    <span class="ruby-comment"># 如果战斗不能没被准许为1</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">perform_collapse</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">all_dead?</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;gameover&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减 MP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_312</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_313</span>
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">add_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">remove_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 完全回复</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_314</span>
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">recover_all</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减经验</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_315</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_exp</span>(<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">exp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减等级</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_316</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_level</span>(<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">level</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减能力值</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_317</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># MaxHP</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxhp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># MaxMP</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxmp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 攻击力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">atk</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 防御力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">def</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 精神力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">spi</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敏捷性</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">agi</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减特技</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_318</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">learn_skill</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">forget_skill</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 变更装备</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_319</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_equip_by_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的名字</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_320</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的职业</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_321</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">$data_classes</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">class_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的图形</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_322</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">refresh</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改交通工具的图形</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_323</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 小型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">boat</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 大型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">ship</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 飞行船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">airship</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减敌人的 HP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_331</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> = <span class="ruby-number">1</span>    <span class="ruby-comment"># 如果战斗不能没被准许为1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减敌人的 MP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_332</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改敌人的状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_333</span>
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                    <span class="ruby-comment"># 变更战斗不能</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">immortal</span> = <span class="ruby-keyword">false</span>              <span class="ruby-comment"># 清除不死身标志</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">add_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">remove_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人的全回复</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_334</span>
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">recover_all</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人出现</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_335</span>
    <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hidden</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hidden</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_unique_names</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人变身</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_336</span>
    <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">transform</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_unique_names</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示战斗动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_337</span>
    <span class="ruby-identifier">iterate_battler</span>(<span class="ruby-number">0</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">battler</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">exist?</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">animation_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 强制战斗行动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_339</span>
    <span class="ruby-identifier">iterate_battler</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">battler</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">exist?</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">kind</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">kind</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">basic</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">skill_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-number">-2</span>                   <span class="ruby-comment"># 最后目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">decide_last_target</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-number">-1</span>                <span class="ruby-comment"># 随机目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">decide_random_target</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">&gt;=</span> <span class="ruby-number">0</span>                 <span class="ruby-comment"># 指定目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">target_index</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">forcing</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">forcing_battler</span> = <span class="ruby-identifier">battler</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 战斗中断</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_340</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;map&quot;</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 调用菜单画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_351</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;menu&quot;</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">menu_beep</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 调用存档画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_352</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;save&quot;</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 游戏结束</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_353</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;gameover&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 返回标题画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_354</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;title&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 脚本</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_355</span>
    <span class="ruby-identifier">script</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">655</span>        <span class="ruby-comment"># 脚本 2 行以上的情况下</span>
        <span class="ruby-identifier">script</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">break</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">script</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-iterate_enemy_index">
            
              <b>iterate_enemy_index</b>(param)
            
            <a href="../classes/Game_Interpreter.html#method-i-iterate_enemy_index" name="method-i-iterate_enemy_index" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>敌人用itereta (索引)</p>

<p>param : 0 以上是索引、-1 是全体</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-iterate_enemy_index_source')" id="l_method-i-iterate_enemy_index_source">show</a>
                
              </p>
              <div id="method-i-iterate_enemy_index_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 175</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">iterate_enemy_index</span>(<span class="ruby-identifier">param</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">param</span> <span class="ruby-operator">==</span> <span class="ruby-number">-1</span>      <span class="ruby-comment"># 全体</span>
      <span class="ruby-keyword">for</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span> <span class="ruby-keyword">do</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>                <span class="ruby-comment"># 单体</span>
      <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-identifier">param</span>]
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 战斗者用itereta (要考虑全体队伍、全体同伴)</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># param1 : 0 是敌人、1 是角色</span>
  <span class="ruby-comment"># param2 : 0 以上是索引、-1 是全体</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">iterate_battler</span>(<span class="ruby-identifier">param1</span>, <span class="ruby-identifier">param2</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">param1</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>      <span class="ruby-comment"># 敌人</span>
        <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-identifier">param2</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>                <span class="ruby-comment"># 角色</span>
        <span class="ruby-identifier">iterate_actor_index</span>(<span class="ruby-identifier">param2</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-identifier">enemy</span> <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 获取画面指令对象</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">screen</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">screen</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">screen</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 执行事件指令</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_command</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>
      <span class="ruby-identifier">command_end</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@params</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>
      <span class="ruby-ivar">@indent</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">101</span>  <span class="ruby-comment"># 文章的显示</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_101</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">102</span>  <span class="ruby-comment"># 显示选择项</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_102</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">402</span>  <span class="ruby-comment"># [**] 的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_402</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">403</span>  <span class="ruby-comment"># 取消的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_403</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">103</span>  <span class="ruby-comment"># 处理数值输入</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_103</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">111</span>  <span class="ruby-comment"># 条件分支</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_111</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">411</span>  <span class="ruby-comment"># 这以外的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_411</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">112</span>  <span class="ruby-comment"># 循环</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_112</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">413</span>  <span class="ruby-comment"># 重复上次</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_413</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">113</span>  <span class="ruby-comment"># 中断循环</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_113</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">115</span>  <span class="ruby-comment"># 中断事件处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_115</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">117</span>  <span class="ruby-comment"># 公共事件</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_117</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">118</span>  <span class="ruby-comment"># 标签</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_118</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">119</span>  <span class="ruby-comment"># 标签跳转</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_119</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">121</span>  <span class="ruby-comment"># 操作开关</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_121</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">122</span>  <span class="ruby-comment"># 操作变量</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_122</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">123</span>  <span class="ruby-comment"># 操作独立开关</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_123</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">124</span>  <span class="ruby-comment"># 操作计时器</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_124</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">125</span>  <span class="ruby-comment"># 增减金钱</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_125</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">126</span>  <span class="ruby-comment"># 增减物品</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_126</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">127</span>  <span class="ruby-comment"># 增减武器</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_127</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">128</span>  <span class="ruby-comment"># 增减防具</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_128</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">129</span>  <span class="ruby-comment"># 替换角色</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_129</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">132</span>  <span class="ruby-comment"># 更改战斗 BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_132</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">133</span>  <span class="ruby-comment"># 更改结束 ME</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_133</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">134</span>  <span class="ruby-comment"># 更改禁止保存</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_134</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">135</span>  <span class="ruby-comment"># 更改禁止菜单</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_135</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">136</span>  <span class="ruby-comment"># 更改禁止遇敌</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_136</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">201</span>  <span class="ruby-comment"># 場所移動</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_201</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">202</span>  <span class="ruby-comment"># 设置交通工具位置</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_202</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">203</span>  <span class="ruby-comment"># 设置事件位置</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_203</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">204</span>  <span class="ruby-comment"># 地图滚动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_204</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">205</span>  <span class="ruby-comment"># 设定移动路线</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_205</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">206</span>  <span class="ruby-comment"># 交通工具乘降</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_206</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">211</span>  <span class="ruby-comment"># 更改透明状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_211</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">212</span>  <span class="ruby-comment"># 显示动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_212</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">213</span>  <span class="ruby-comment"># 显示表情动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_213</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">214</span>  <span class="ruby-comment"># 暂时消除事件</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_214</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">221</span>  <span class="ruby-comment"># 淡出画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_221</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">222</span>  <span class="ruby-comment"># 淡入画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_222</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">223</span>  <span class="ruby-comment"># 更改画面色调</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_223</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">224</span>  <span class="ruby-comment"># 画面闪烁</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_224</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">225</span>  <span class="ruby-comment"># 画面震动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_225</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">230</span>  <span class="ruby-comment"># 等待</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_230</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">231</span>  <span class="ruby-comment"># 显示图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_231</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">232</span>  <span class="ruby-comment"># 移动图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_232</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">233</span>  <span class="ruby-comment"># 旋转图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_233</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">234</span>  <span class="ruby-comment"># 更改图片色调</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_234</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">235</span>  <span class="ruby-comment"># 消失图片</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_235</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">236</span>  <span class="ruby-comment"># 设置天气</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_236</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">241</span>  <span class="ruby-comment"># 演奏BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_241</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">242</span>  <span class="ruby-comment"># 淡出BGM</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_242</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">245</span>  <span class="ruby-comment"># 演奏BGS</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_245</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">246</span>  <span class="ruby-comment"># 淡出BGS</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_246</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">249</span>  <span class="ruby-comment"># 演奏ME</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_249</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">250</span>  <span class="ruby-comment"># 演奏SE</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_250</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">251</span>  <span class="ruby-comment"># 停止SE</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_251</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">301</span>  <span class="ruby-comment"># 战斗处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_301</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">601</span>  <span class="ruby-comment"># 胜利的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_601</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">602</span>  <span class="ruby-comment"># 逃跑的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_602</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">603</span>  <span class="ruby-comment"># 失败的情况</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_603</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">302</span>  <span class="ruby-comment"># 商店的处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_302</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">303</span>  <span class="ruby-comment"># 名称输入的处理</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_303</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">311</span>  <span class="ruby-comment"># 增减 HP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_311</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">312</span>  <span class="ruby-comment"># 增减 MP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_312</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">313</span>  <span class="ruby-comment"># 更改状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_313</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">314</span>  <span class="ruby-comment"># 全回复</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_314</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">315</span>  <span class="ruby-comment"># 增减 经验</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_315</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">316</span>  <span class="ruby-comment"># 増減 等级</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_316</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">317</span>  <span class="ruby-comment"># 増減 能力值</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_317</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">318</span>  <span class="ruby-comment"># 增减特技</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_318</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">319</span>  <span class="ruby-comment"># 变更装备</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_319</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">320</span>  <span class="ruby-comment"># 更改角色名字</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_320</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">321</span>  <span class="ruby-comment"># 更改角色职业</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_321</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">322</span>  <span class="ruby-comment"># 更改角色图形</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_322</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">323</span>  <span class="ruby-comment"># 更改交通工具图形</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_323</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">331</span>  <span class="ruby-comment"># 増減敌人的 HP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_331</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">332</span>  <span class="ruby-comment"># 増減敌人的 MP</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_332</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">333</span>  <span class="ruby-comment"># 更改敌人的状态</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_333</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">334</span>  <span class="ruby-comment"># 敌人全回复</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_334</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">335</span>  <span class="ruby-comment"># 敌人出现</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_335</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">336</span>  <span class="ruby-comment"># 敌人变身</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_336</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">337</span>  <span class="ruby-comment"># 显示战斗动画</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_337</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">339</span>  <span class="ruby-comment"># 强制战斗行动</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_339</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">340</span>  <span class="ruby-comment"># 中断战斗</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_340</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">351</span>  <span class="ruby-comment"># 调用菜单画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_351</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">352</span>  <span class="ruby-comment"># 调用存档画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_352</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">353</span>  <span class="ruby-comment"># 游戏结束</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_353</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">354</span>  <span class="ruby-comment"># 返回标题画面</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_354</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">355</span>  <span class="ruby-comment"># 脚本</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_355</span>
      <span class="ruby-keyword">else</span>      <span class="ruby-comment"># 其它</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 事件结束</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_end</span>
    <span class="ruby-ivar">@list</span> = <span class="ruby-keyword">nil</span>                             <span class="ruby-comment"># 清除执行内容列表</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@main</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>              <span class="ruby-comment"># 主地图事件与事件 ID 有效的情况下</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>].<span class="ruby-identifier">unlock</span>    <span class="ruby-comment"># 解除事件锁定</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 指令跳转</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_skip</span>
    <span class="ruby-keyword">while</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@indent</span>  <span class="ruby-comment"># 下一个事件命令是同等级的缩进的情况下</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>                           <span class="ruby-comment"># 推进索引</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 获取角色</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># param : -1 是角色、0 是本事件、除此以外是 事件 ID</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">get_character</span>(<span class="ruby-identifier">param</span>)
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">param</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">-1</span>   <span class="ruby-comment"># 角色</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_player</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 本事件</span>
      <span class="ruby-identifier">events</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">events</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>]
    <span class="ruby-keyword">else</span>      <span class="ruby-comment"># 特定的事件</span>
      <span class="ruby-identifier">events</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">events</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">events</span>[<span class="ruby-identifier">param</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 计算操作的值</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># operation    : 操作</span>
  <span class="ruby-comment"># operand_type : 操作数类型 (0:恒量 1:变量)</span>
  <span class="ruby-comment"># operand      : 操作数 (数值是变量 ID)</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">operate_value</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">operand_type</span>, <span class="ruby-identifier">operand</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">operand_type</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operand</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">operand</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">operation</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-operator">-</span><span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示文章</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_101</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">face_name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">face_index</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">background</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">position</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">while</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">401</span>       <span class="ruby-comment"># 文章数据</span>
        <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>])
        <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">102</span>          <span class="ruby-comment"># 显示选择项</span>
        <span class="ruby-identifier">setup_choices</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">103</span>       <span class="ruby-comment"># 处理数值输入</span>
        <span class="ruby-identifier">setup_num_input</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置文章待机标记与call back</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">set_message_waiting</span>
    <span class="ruby-ivar">@message_waiting</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">main_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-ivar">@message_waiting</span> = <span class="ruby-keyword">false</span> }
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示选择项</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_102</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">setup_choices</span>(<span class="ruby-ivar">@params</span>)                <span class="ruby-comment"># 设置选择项</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置选择项</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_choices</span>(<span class="ruby-identifier">params</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">4</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">size</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_start</span> = <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_max</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">for</span> <span class="ruby-identifier">s</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>]
        <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">s</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_cancel_type</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">n</span> }
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># [**] 的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_402</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]       <span class="ruby-comment"># 如果符合的选择项被选择</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)               <span class="ruby-comment"># 删除分支数据</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>                           <span class="ruby-comment"># 継続</span>
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 不符合条件的情况下</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>                   <span class="ruby-comment"># 指令跳转</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 取消的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_403</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">4</span>                <span class="ruby-comment"># 如果选择了选择项取消</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)               <span class="ruby-comment"># 删除分支数据</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>                           <span class="ruby-comment"># 继续</span>
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 不符合条件的情况下</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>                   <span class="ruby-comment"># 指令跳转</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 处理数值输入</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_103</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">busy</span>
      <span class="ruby-identifier">setup_num_input</span>(<span class="ruby-ivar">@params</span>)              <span class="ruby-comment"># 设置数值输入</span>
      <span class="ruby-identifier">set_message_waiting</span>                   <span class="ruby-comment"># 文章待机状态</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置数值输入</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_num_input</span>(<span class="ruby-identifier">params</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">4</span>
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">num_input_variable_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">num_input_digits_max</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 条件分歧</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_111</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 开关</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_switches</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]] <span class="ruby-operator">==</span> (<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>))
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 变量</span>
      <span class="ruby-identifier">value1</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">value2</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">value2</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 等于</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 以上</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 以下</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 超过</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 未满</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 以外</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">value1</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">value2</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 独立开关</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@original_event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">key</span> = [<span class="ruby-ivar">@map_id</span>, <span class="ruby-ivar">@original_event_id</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">true</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 计时器</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span>
        <span class="ruby-identifier">sec</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">sec</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">sec</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 同伴</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">actor</span>))
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 名称</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 特技</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">skill_learn?</span>(<span class="ruby-identifier">$data_skills</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 武器</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">weapons</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 防具</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">armors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]))
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 状态</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">state?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]))
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敌人</span>
      <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 出现</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">exist?</span>)
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 状态</span>
          <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">state?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]))
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">character</span>.<span class="ruby-identifier">direction</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 金钱</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 物品</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]])
    <span class="ruby-keyword">when</span> <span class="ruby-number">9</span>  <span class="ruby-comment"># 武器</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">10</span>  <span class="ruby-comment"># 防具</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">has_item?</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">11</span>  <span class="ruby-comment"># 按钮</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-constant">Input</span>.<span class="ruby-identifier">press?</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">12</span>  <span class="ruby-comment"># 活动块</span>
      <span class="ruby-identifier">result</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">when</span> <span class="ruby-number">13</span>  <span class="ruby-comment"># 交通工具</span>
      <span class="ruby-identifier">result</span> = (<span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">vehicle_type</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">result</span>     <span class="ruby-comment"># 判断结果保存在 hash 中</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 这以外的情况</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_411</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 循环</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_112</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 重复上次</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_413</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">-=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span> <span class="ruby-keyword">until</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@indent</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 中断循环</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_113</span>
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">413</span> <span class="ruby-keyword">and</span>    <span class="ruby-comment"># 本事件命令为 [重复上次]</span>
         <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">indent</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@indent</span>   <span class="ruby-comment"># 缩进浅的情况下</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 中断事件处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_115</span>
    <span class="ruby-identifier">command_end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 公共事件</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_117</span>
    <span class="ruby-identifier">common_event</span> = <span class="ruby-identifier">$data_common_events</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">common_event</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-ivar">@child_interpreter</span> = <span class="ruby-constant">Game_Interpreter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@depth</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
      <span class="ruby-ivar">@child_interpreter</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-identifier">common_event</span>.<span class="ruby-identifier">list</span>, <span class="ruby-ivar">@event_id</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 标签</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_118</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 标签跳转</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_119</span>
    <span class="ruby-identifier">label_name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-number">0</span><span class="ruby-operator">...</span><span class="ruby-ivar">@list</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">118</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@list</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">label_name</span>
        <span class="ruby-ivar">@index</span> = <span class="ruby-identifier">i</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 开关操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_121</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">..</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]   <span class="ruby-comment"># 循环全部操作</span>
      <span class="ruby-identifier">$game_switches</span>[<span class="ruby-identifier">i</span>] = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 变量操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_122</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-number">0</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]  <span class="ruby-comment"># 操作数</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 恒量</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 变量</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 随机数</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">rand</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>] <span class="ruby-operator">-</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">+</span> <span class="ruby-number">1</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 物品</span>
      <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">item_number</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]])
    <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 等级</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">level</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 经验</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">exp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># HP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># MP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">mp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># MaxHP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxhp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># MaxMP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxmp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 攻击力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">atk</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 防御力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">def</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 精神力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">spi</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">9</span>  <span class="ruby-comment"># 敏捷性</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">agi</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敌人</span>
      <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># HP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># MP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">mp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># MaxHP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">maxhp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># MaxMP</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">maxmp</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 攻击力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">atk</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 防御力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">def</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 精神力</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">spi</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 敏捷性</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">agi</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 角色</span>
      <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># X 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">x</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># Y 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">y</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 朝向</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">direction</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 画面 X 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">screen_x</span>
        <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 画面 Y 坐标</span>
          <span class="ruby-identifier">value</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">screen_y</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">7</span>  <span class="ruby-comment"># 其它</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 地图 ID</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">map_id</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 同伴人数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">size</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 金钱</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gold</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 步数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">steps</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 游戏时间</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_count</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 计时器</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> <span class="ruby-operator">/</span> <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 存档次数</span>
        <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">save_count</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">..</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]   <span class="ruby-comment"># 循环全部操作</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]  <span class="ruby-comment"># 操作分支</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 代入</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 加法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 减法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">-=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 乘法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">*=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 除法</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">/=</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 剰余</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">=</span> <span class="ruby-identifier">value</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">!=</span> <span class="ruby-number">0</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-number">99999999</span>    <span class="ruby-comment"># 检查上限</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-number">99999999</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-number">-99999999</span>   <span class="ruby-comment"># 检查下限</span>
        <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-number">-99999999</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 独立开关操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_123</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@original_event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">key</span> = [<span class="ruby-ivar">@map_id</span>, <span class="ruby-ivar">@original_event_id</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
      <span class="ruby-identifier">$game_self_switches</span>[<span class="ruby-identifier">key</span>] = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 计时器操作</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_124</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 始動</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] * <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">frame_rate</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 停止</span>
      <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">timer_working</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减金钱</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_125</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_gold</span>(<span class="ruby-identifier">value</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减物品</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_126</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_items</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>)
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减武器</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_127</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_weapons</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减防具</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_128</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">$data_armors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]], <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 角色的替换</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_129</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 加入</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 初始化</span>
          <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">setup</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">add_actor</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
      <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 离开</span>
        <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">remove_actor</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改战斗 BGM</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_132</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">battle_bgm</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改战斗结束的 ME</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_133</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">battle_end_me</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止存档</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_134</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">save_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止菜单</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_135</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">menu_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改禁止遇敌</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_136</span>
    <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">encounter_disabled</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">make_encounter_count</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 场所移动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_201</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">transfer?</span> <span class="ruby-keyword">or</span>            <span class="ruby-comment"># 场所移动中</span>
       <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>                <span class="ruby-comment"># 文章显示中</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">direction</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-identifier">direction</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">reserve_transfer</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-identifier">direction</span>)
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置交通工具位置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_202</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">map_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 小型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">boat</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 大型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">ship</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 飞行船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">airship</span>.<span class="ruby-identifier">set_location</span>(<span class="ruby-identifier">map_id</span>, <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置事件位置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_203</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 变量指定</span>
        <span class="ruby-identifier">new_x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]]
        <span class="ruby-identifier">new_y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]]
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">new_x</span>, <span class="ruby-identifier">new_y</span>)
      <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 与其它事件交换</span>
        <span class="ruby-identifier">old_x</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">x</span>
        <span class="ruby-identifier">old_y</span> = <span class="ruby-identifier">character</span>.<span class="ruby-identifier">y</span>
        <span class="ruby-identifier">character2</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">character2</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
          <span class="ruby-identifier">character</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">character2</span>.<span class="ruby-identifier">x</span>, <span class="ruby-identifier">character2</span>.<span class="ruby-identifier">y</span>)
          <span class="ruby-identifier">character2</span>.<span class="ruby-identifier">moveto</span>(<span class="ruby-identifier">old_x</span>, <span class="ruby-identifier">old_y</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]   <span class="ruby-comment"># 设置角色朝向</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">8</span>  <span class="ruby-comment"># 上</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_up</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">6</span>  <span class="ruby-comment"># 右</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_right</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 下</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_down</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 左</span>
        <span class="ruby-identifier">character</span>.<span class="ruby-identifier">turn_left</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 地图的滚动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_204</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">scrolling?</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">start_scroll</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 设置移动路线</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_205</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">refresh</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">force_move_route</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-ivar">@moving_character</span> = <span class="ruby-identifier">character</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>].<span class="ruby-identifier">wait</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 交通工具乘降</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_206</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">get_on_off_vehicle</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改透明状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_211</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">transparent</span> = (<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_212</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">animation_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示表情动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_213</span>
    <span class="ruby-identifier">character</span> = <span class="ruby-identifier">get_character</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">character</span>.<span class="ruby-identifier">balloon_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 暂时消除事件</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_214</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>[<span class="ruby-ivar">@event_id</span>].<span class="ruby-identifier">erase</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_221</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_fadeout</span>(<span class="ruby-number">30</span>)
      <span class="ruby-ivar">@wait_count</span> = <span class="ruby-number">30</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡入画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_222</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_fadein</span>(<span class="ruby-number">30</span>)
      <span class="ruby-ivar">@wait_count</span> = <span class="ruby-number">30</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改画面色调</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_223</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_tone_change</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 画面闪烁</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_224</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_flash</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 画面震动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_225</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_shake</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 等待</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_230</span>
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_231</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
    <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">show</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>],
      <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">6</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">7</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">8</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">9</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 移动图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_232</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>    <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-identifier">y</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]
    <span class="ruby-keyword">else</span>                  <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">x</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]]
      <span class="ruby-identifier">y</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">5</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">move</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">6</span>],
      <span class="ruby-ivar">@params</span>[<span class="ruby-number">7</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">8</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">9</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">10</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">10</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">11</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 旋转图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_233</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">rotate</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改图片色调</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_234</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">start_tone_change</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 消失图片</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_235</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">pictures</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]].<span class="ruby-identifier">erase</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 天气设置</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_236</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-identifier">screen</span>.<span class="ruby-identifier">weather</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-ivar">@wait_count</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 BGM</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_241</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出 BGM </span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_242</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">BGM</span>.<span class="ruby-identifier">fade</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] * <span class="ruby-number">1000</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 BGS</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_245</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 淡出 BGS</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_246</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">BGS</span>.<span class="ruby-identifier">fade</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] * <span class="ruby-number">1000</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 ME</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_249</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 演奏 SE</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_250</span>
    <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 停止 SE</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_251</span>
    <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">SE</span>.<span class="ruby-identifier">stop</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 战斗处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_301</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 直接指定</span>
      <span class="ruby-identifier">troop_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 变量指定</span>
      <span class="ruby-identifier">troop_id</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$data_troops</span>[<span class="ruby-identifier">troop_id</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-identifier">troop_id</span>)
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_escape</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_lose</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">battle_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">n</span> }
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;battle&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 胜利的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_601</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 逃跑的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_602</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 失败的情况下</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_603</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] <span class="ruby-operator">==</span> <span class="ruby-number">2</span>
      <span class="ruby-ivar">@branch</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@indent</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">command_skip</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 商店的处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_302</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;shop&quot;</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_goods</span> = [<span class="ruby-ivar">@params</span>]
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_purchase_only</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">605</span>          <span class="ruby-comment"># 商店 2 行以下</span>
        <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">shop_goods</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 名称输入处理</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_303</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$data_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;name&quot;</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">name_actor_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">name_max_char</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减 HP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_311</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">dead?</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> = <span class="ruby-number">1</span>    <span class="ruby-comment"># 如果战斗不能没被准许为1</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">perform_collapse</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">all_dead?</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;gameover&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减 MP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_312</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_313</span>
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">add_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">remove_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 完全回复</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_314</span>
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">recover_all</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减经验</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_315</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_exp</span>(<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">exp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减等级</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_316</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_actor_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actor</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_level</span>(<span class="ruby-identifier">actor</span>.<span class="ruby-identifier">level</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减能力值</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_317</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">case</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
      <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># MaxHP</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxhp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># MaxMP</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">maxmp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 攻击力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">atk</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 防御力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">def</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">4</span>  <span class="ruby-comment"># 精神力</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">spi</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">when</span> <span class="ruby-number">5</span>  <span class="ruby-comment"># 敏捷性</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">agi</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减特技</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_318</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">learn_skill</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">forget_skill</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 变更装备</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_319</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">change_equip_by_id</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的名字</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_320</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">name</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的职业</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_321</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">$data_classes</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">class_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改角色的图形</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_322</span>
    <span class="ruby-identifier">actor</span> = <span class="ruby-identifier">$game_actors</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">actor</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_player</span>.<span class="ruby-identifier">refresh</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改交通工具的图形</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_323</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                      <span class="ruby-comment"># 小型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">boat</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                   <span class="ruby-comment"># 大型船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">ship</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 飞行船</span>
      <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">airship</span>.<span class="ruby-identifier">set_graphic</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减敌人的 HP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_331</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">value</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">0</span>
          <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> = <span class="ruby-number">1</span>    <span class="ruby-comment"># 如果战斗不能没被准许为1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 增减敌人的 MP</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_332</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operate_value</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>])
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 更改敌人的状态</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_333</span>
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>] <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                    <span class="ruby-comment"># 变更战斗不能</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">immortal</span> = <span class="ruby-keyword">false</span>              <span class="ruby-comment"># 清除不死身标志</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>] <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">add_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">perform_collapse</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">remove_state</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>])
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人的全回复</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_334</span>
    <span class="ruby-identifier">iterate_enemy_index</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enemy</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">recover_all</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人出现</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_335</span>
    <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hidden</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">hidden</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_unique_names</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 敌人变身</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_336</span>
    <span class="ruby-identifier">enemy</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">enemy</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">transform</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>])
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_unique_names</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 显示战斗动画</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_337</span>
    <span class="ruby-identifier">iterate_battler</span>(<span class="ruby-number">0</span>, <span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">battler</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">exist?</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">animation_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 强制战斗行动</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_339</span>
    <span class="ruby-identifier">iterate_battler</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-number">0</span>], <span class="ruby-ivar">@params</span>[<span class="ruby-number">1</span>]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">battler</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">exist?</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">kind</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">2</span>]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">kind</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">basic</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">skill_id</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">3</span>]
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-number">-2</span>                   <span class="ruby-comment"># 最后目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">decide_last_target</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">==</span> <span class="ruby-number">-1</span>                <span class="ruby-comment"># 随机目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">decide_random_target</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>] <span class="ruby-operator">&gt;=</span> <span class="ruby-number">0</span>                 <span class="ruby-comment"># 指定目标</span>
        <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">target_index</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-number">4</span>]
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">forcing</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">forcing_battler</span> = <span class="ruby-identifier">battler</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 战斗中断</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_340</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;map&quot;</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 调用菜单画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_351</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;menu&quot;</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">menu_beep</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 调用存档画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_352</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;save&quot;</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 游戏结束</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_353</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;gameover&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 返回标题画面</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_354</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-string">&quot;title&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># 脚本</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">command_355</span>
    <span class="ruby-identifier">script</span> = <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
    <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">code</span> <span class="ruby-operator">==</span> <span class="ruby-number">655</span>        <span class="ruby-comment"># 脚本 2 行以上的情况下</span>
        <span class="ruby-identifier">script</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@list</span>[<span class="ruby-ivar">@index</span><span class="ruby-operator">+</span><span class="ruby-number">1</span>].<span class="ruby-identifier">parameters</span>[<span class="ruby-number">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;\n&quot;</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">break</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">script</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-operate_value">
            
              <b>operate_value</b>(operation, operand_type, operand)
            
            <a href="../classes/Game_Interpreter.html#method-i-operate_value" name="method-i-operate_value" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>计算操作的值</p>

<p>operation    : 操作 operand_type : 操作数类型 (0:恒量 1:变量)
operand      : 操作数 (数值是变量 ID)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-operate_value_source')" id="l_method-i-operate_value_source">show</a>
                
              </p>
              <div id="method-i-operate_value_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 449</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">operate_value</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">operand_type</span>, <span class="ruby-identifier">operand</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">operand_type</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">operand</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-identifier">$game_variables</span>[<span class="ruby-identifier">operand</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">operation</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span>
    <span class="ruby-identifier">value</span> = <span class="ruby-operator">-</span><span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">value</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-running-3F">
            
              <b>running?</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-running-3F" name="method-i-running-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>执行中判定</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-running-3F_source')" id="l_method-i-running-3F_source">show</a>
                
              </p>
              <div id="method-i-running-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 69</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">running?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@list</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-screen">
            
              <b>screen</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-screen" name="method-i-screen" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>获取画面指令对象</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-screen_source')" id="l_method-i-screen_source">show</a>
                
              </p>
              <div id="method-i-screen_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 202</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">screen</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">screen</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">screen</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-set_message_waiting">
            
              <b>set_message_waiting</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-set_message_waiting" name="method-i-set_message_waiting" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>设置文章待机标记与call back</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-set_message_waiting_source')" id="l_method-i-set_message_waiting_source">show</a>
                
              </p>
              <div id="method-i-set_message_waiting_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 488</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">set_message_waiting</span>
  <span class="ruby-ivar">@message_waiting</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">main_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-ivar">@message_waiting</span> = <span class="ruby-keyword">false</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup">
            
              <b>setup</b>(list, event_id = 0)
            
            <a href="../classes/Game_Interpreter.html#method-i-setup" name="method-i-setup" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>设置事件</p>

<p>list     : 执行内容 event_id : 事件 ID</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_source')" id="l_method-i-setup_source">show</a>
                
              </p>
              <div id="method-i-setup_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">event_id</span> = <span class="ruby-number">0</span>)
  <span class="ruby-identifier">clear</span>                             <span class="ruby-comment"># 清除索引的内部状态</span>
  <span class="ruby-ivar">@map_id</span> = <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">map_id</span>        <span class="ruby-comment"># 记忆地图 ID</span>
  <span class="ruby-ivar">@original_event_id</span> = <span class="ruby-identifier">event_id</span>     <span class="ruby-comment"># 记忆事件 ID</span>
  <span class="ruby-ivar">@event_id</span> = <span class="ruby-identifier">event_id</span>              <span class="ruby-comment"># 记忆事件 ID</span>
  <span class="ruby-ivar">@list</span> = <span class="ruby-identifier">list</span>                      <span class="ruby-comment"># 记忆执行内容</span>
  <span class="ruby-ivar">@index</span> = <span class="ruby-number">0</span>                        <span class="ruby-comment"># 初始化索引</span>
  <span class="ruby-identifier">cancel_menu_call</span>                  <span class="ruby-comment"># 取消呼出菜单</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup_choices">
            
              <b>setup_choices</b>(params)
            
            <a href="../classes/Game_Interpreter.html#method-i-setup_choices" name="method-i-setup_choices" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>设置选择项</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_choices_source')" id="l_method-i-setup_choices_source">show</a>
                
              </p>
              <div id="method-i-setup_choices_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 507</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_choices</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-number">4</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">size</span>
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_start</span> = <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span>
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_max</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>].<span class="ruby-identifier">size</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">s</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>]
      <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">s</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_cancel_type</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">choice_proc</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@branch</span>[<span class="ruby-ivar">@indent</span>] = <span class="ruby-identifier">n</span> }
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup_num_input">
            
              <b>setup_num_input</b>(params)
            
            <a href="../classes/Game_Interpreter.html#method-i-setup_num_input" name="method-i-setup_num_input" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>设置数值输入</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_num_input_source')" id="l_method-i-setup_num_input_source">show</a>
                
              </p>
              <div id="method-i-setup_num_input_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 558</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_num_input</span>(<span class="ruby-identifier">params</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">4</span>
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">num_input_variable_id</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">0</span>]
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">num_input_digits_max</span> = <span class="ruby-identifier">params</span>[<span class="ruby-number">1</span>]
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-setup_starting_event">
            
              <b>setup_starting_event</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-setup_starting_event" name="method-i-setup_starting_event" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>设置启动中事件</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-setup_starting_event_source')" id="l_method-i-setup_starting_event_source">show</a>
                
              </p>
              <div id="method-i-setup_starting_event_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 76</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">setup_starting_event</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">need_refresh</span>             <span class="ruby-comment"># 刷新必要的地图</span>
    <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">refresh</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">common_event_id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>     <span class="ruby-comment"># 如果调用的公共事件被预约的情况下</span>
    <span class="ruby-identifier">setup</span>(<span class="ruby-identifier">$data_common_events</span>[<span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">common_event_id</span>].<span class="ruby-identifier">list</span>)
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">common_event_id</span> = <span class="ruby-number">0</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">event</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">events</span>.<span class="ruby-identifier">values</span>  <span class="ruby-comment"># 循环 (地图事件)</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">event</span>.<span class="ruby-identifier">starting</span>                   <span class="ruby-comment"># 如果找到了启动中的事件</span>
      <span class="ruby-identifier">event</span>.<span class="ruby-identifier">clear_starting</span>              <span class="ruby-comment"># 清除启动中标志</span>
      <span class="ruby-identifier">setup</span>(<span class="ruby-identifier">event</span>.<span class="ruby-identifier">list</span>, <span class="ruby-identifier">event</span>.<span class="ruby-identifier">id</span>)       <span class="ruby-comment"># 设置事件</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">event</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">$data_common_events</span>.<span class="ruby-identifier">compact</span>      <span class="ruby-comment"># 循环(公共事件)</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">event</span>.<span class="ruby-identifier">trigger</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span> <span class="ruby-keyword">and</span>           <span class="ruby-comment"># 目标的自动执行开关为 ON 的情况下</span>
       <span class="ruby-identifier">$game_switches</span>[<span class="ruby-identifier">event</span>.<span class="ruby-identifier">switch_id</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>  
      <span class="ruby-identifier">setup</span>(<span class="ruby-identifier">event</span>.<span class="ruby-identifier">list</span>)                 <span class="ruby-comment"># 设置事件</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update">
            
              <b>update</b>()
            
            <a href="../classes/Game_Interpreter.html#method-i-update" name="method-i-update" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>刷新画面</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_source')" id="l_method-i-update_source">show</a>
                
              </p>
              <div id="method-i-update_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Game_Interpreter.rb, line 104</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update</span>
  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_map</span>.<span class="ruby-identifier">map_id</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@map_id</span>        <span class="ruby-comment"># 如果地图与事件启动有差异</span>
      <span class="ruby-ivar">@event_id</span> = <span class="ruby-number">0</span>                       <span class="ruby-comment"># 事件 ID 设置为 0</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@child_interpreter</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>          <span class="ruby-comment"># 子注释器存在的情况下</span>
      <span class="ruby-ivar">@child_interpreter</span>.<span class="ruby-identifier">update</span>           <span class="ruby-comment"># 刷新子注释器</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@child_interpreter</span>.<span class="ruby-identifier">running?</span>      <span class="ruby-comment"># 子解释器执行中的情况下</span>
        <span class="ruby-keyword">return</span>                            <span class="ruby-comment"># 返回</span>
      <span class="ruby-keyword">else</span>                                <span class="ruby-comment"># 子解释器执行结束的情况下</span>
        <span class="ruby-ivar">@child_interpreter</span> = <span class="ruby-keyword">nil</span>          <span class="ruby-comment"># 删除字注释器</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@message_waiting</span>                   <span class="ruby-comment"># 信息结束待机的情况下</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@moving_character</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>           <span class="ruby-comment"># 移动结束待机的情况下</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@moving_character</span>.<span class="ruby-identifier">move_route_forcing</span>
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-ivar">@moving_character</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@wait_count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>                    <span class="ruby-comment"># 等待中</span>
      <span class="ruby-ivar">@wait_count</span> <span class="ruby-operator">-=</span> <span class="ruby-number">1</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">forcing_battler</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-comment"># 如果被强制行动的战斗者存在</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>       <span class="ruby-comment"># 各种画面打开的途中</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>                       <span class="ruby-comment"># 执行内容列表为空的情况下</span>
      <span class="ruby-identifier">setup_starting_event</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@main</span>       <span class="ruby-comment"># 设置启动中的事件</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@list</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>              <span class="ruby-comment"># 什么都没有设置的情况下</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">execute_command</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>    <span class="ruby-comment"># 尝试执行事件列表、返回值为 false 的情况下</span>
    <span class="ruby-ivar">@index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>                           <span class="ruby-comment"># 推进索引</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    