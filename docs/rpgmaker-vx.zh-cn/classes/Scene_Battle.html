<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Scene_Battle</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
        <h1>
            <span class="type">Class</span> 
            Scene_Battle 
            
                <span class="parent">&lt; 
                    
                    <a href="Scene_Base.html">Scene_Base</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../files/Scene_Battle_rb.html">Scene_Battle.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>处理战斗画面的类。</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-battle_end">battle_end</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-call_gameover">call_gameover</a>,
              </li>
            
              
              <li>
                <a href="#method-i-call_map">call_map</a>,
              </li>
            
              
              <li>
                <a href="#method-i-call_title">call_title</a>,
              </li>
            
              
              <li>
                <a href="#method-i-create_info_viewport">create_info_viewport</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-determine_item">determine_item</a>,
              </li>
            
              
              <li>
                <a href="#method-i-determine_skill">determine_skill</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_action_effects">display_action_effects</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_added_states">display_added_states</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_animation">display_animation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_attack_animation">display_attack_animation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_critical">display_critical</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_current_state">display_current_state</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_damage">display_damage</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_drop_items">display_drop_items</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_evasion">display_evasion</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_exp_and_gold">display_exp_and_gold</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_failure">display_failure</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_hp_damage">display_hp_damage</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_level_up">display_level_up</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_miss">display_miss</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_mp_damage">display_mp_damage</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_normal_animation">display_normal_animation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_remained_states">display_remained_states</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_removed_states">display_removed_states</a>,
              </li>
            
              
              <li>
                <a href="#method-i-display_state_changes">display_state_changes</a>,
              </li>
            
              
              <li>
                <a href="#method-i-dispose_info_viewport">dispose_info_viewport</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-end_item_selection">end_item_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-end_skill_selection">end_skill_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-end_target_actor_selection">end_target_actor_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-end_target_enemy_selection">end_target_enemy_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-execute_action">execute_action</a>,
              </li>
            
              
              <li>
                <a href="#method-i-execute_action_attack">execute_action_attack</a>,
              </li>
            
              
              <li>
                <a href="#method-i-execute_action_escape">execute_action_escape</a>,
              </li>
            
              
              <li>
                <a href="#method-i-execute_action_guard">execute_action_guard</a>,
              </li>
            
              
              <li>
                <a href="#method-i-execute_action_item">execute_action_item</a>,
              </li>
            
              
              <li>
                <a href="#method-i-execute_action_skill">execute_action_skill</a>,
              </li>
            
              
              <li>
                <a href="#method-i-execute_action_wait">execute_action_wait</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>J</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-judge_win_loss">judge_win_loss</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>M</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-make_action_orders">make_action_orders</a>,
              </li>
            
              
              <li>
                <a href="#method-i-make_escape_ratio">make_escape_ratio</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-next_actor">next_actor</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-post_start">post_start</a>,
              </li>
            
              
              <li>
                <a href="#method-i-prior_actor">prior_actor</a>,
              </li>
            
              
              <li>
                <a href="#method-i-process_action">process_action</a>,
              </li>
            
              
              <li>
                <a href="#method-i-process_battle_event">process_battle_event</a>,
              </li>
            
              
              <li>
                <a href="#method-i-process_battle_start">process_battle_start</a>,
              </li>
            
              
              <li>
                <a href="#method-i-process_defeat">process_defeat</a>,
              </li>
            
              
              <li>
                <a href="#method-i-process_escape">process_escape</a>,
              </li>
            
              
              <li>
                <a href="#method-i-process_victory">process_victory</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-remove_states_auto">remove_states_auto</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-set_next_active_battler">set_next_active_battler</a>,
              </li>
            
              
              <li>
                <a href="#method-i-show_fast-3F">show_fast?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-start">start</a>,
              </li>
            
              
              <li>
                <a href="#method-i-start_actor_command_selection">start_actor_command_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-start_item_selection">start_item_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-start_main">start_main</a>,
              </li>
            
              
              <li>
                <a href="#method-i-start_party_command_selection">start_party_command_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-start_skill_selection">start_skill_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-start_target_actor_selection">start_target_actor_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-start_target_enemy_selection">start_target_enemy_selection</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-terminate">terminate</a>,
              </li>
            
              
              <li>
                <a href="#method-i-turn_end">turn_end</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-update">update</a>,
              </li>
            
              
              <li>
                <a href="#method-i-update_actor_command_selection">update_actor_command_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-update_basic">update_basic</a>,
              </li>
            
              
              <li>
                <a href="#method-i-update_info_viewport">update_info_viewport</a>,
              </li>
            
              
              <li>
                <a href="#method-i-update_item_selection">update_item_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-update_party_command_selection">update_party_command_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-update_scene_change">update_scene_change</a>,
              </li>
            
              
              <li>
                <a href="#method-i-update_skill_selection">update_skill_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-update_target_actor_selection">update_target_actor_selection</a>,
              </li>
            
              
              <li>
                <a href="#method-i-update_target_enemy_selection">update_target_enemy_selection</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>W</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-wait">wait</a>,
              </li>
            
              
              <li>
                <a href="#method-i-wait_for_animation">wait_for_animation</a>,
              </li>
            
              
              <li>
                <a href="#method-i-wait_for_message">wait_for_message</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-battle_end">
            
              <b>battle_end</b>(result)
            
            <a href="../classes/Scene_Battle.html#method-i-battle_end" name="method-i-battle_end" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>战斗结束</p>

<p>result : 结果 (0:胜利 1:逃走 2:败北)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-battle_end_source')" id="l_method-i-battle_end_source">show</a>
                
              </p>
              <div id="method-i-battle_end_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 208</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">battle_end</span>(<span class="ruby-identifier">result</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span> <span class="ruby-operator">==</span> <span class="ruby-number">2</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_lose</span>
    <span class="ruby-identifier">call_gameover</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">clear_actions</span>
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">remove_states_battle</span>
    <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">clear</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">battle_proc</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">battle_proc</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">result</span>)
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">battle_proc</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$BTEST</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">map_bgm</span>.<span class="ruby-identifier">play</span>
      <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">map_bgs</span>.<span class="ruby-identifier">play</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">$scene</span> = <span class="ruby-constant">Scene_Map</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">clear</span>
    <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">fadeout</span>(<span class="ruby-number">30</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-call_gameover">
            
              <b>call_gameover</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-call_gameover" name="method-i-call_gameover" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>切换游戏结束画面</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-call_gameover_source')" id="l_method-i-call_gameover_source">show</a>
                
              </p>
              <div id="method-i-call_gameover_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 719</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">call_gameover</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">$scene</span> = <span class="ruby-constant">Scene_Gameover</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">clear</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-call_map">
            
              <b>call_map</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-call_map" name="method-i-call_map" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>切换地图画面</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-call_map_source')" id="l_method-i-call_map_source">show</a>
                
              </p>
              <div id="method-i-call_map_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 711</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">call_map</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">battle_end</span>(<span class="ruby-number">1</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-call_title">
            
              <b>call_title</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-call_title" name="method-i-call_title" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>切换标题画面</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-call_title_source')" id="l_method-i-call_title_source">show</a>
                
              </p>
              <div id="method-i-call_title_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 728</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">call_title</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">$scene</span> = <span class="ruby-constant">Scene_Title</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">fadeout</span>(<span class="ruby-number">60</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-create_info_viewport">
            
              <b>create_info_viewport</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-create_info_viewport" name="method-i-create_info_viewport" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>生成显示信息的视口</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-create_info_viewport_source')" id="l_method-i-create_info_viewport_source">show</a>
                
              </p>
              <div id="method-i-create_info_viewport_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 131</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">create_info_viewport</span>
  <span class="ruby-ivar">@info_viewport</span> = <span class="ruby-constant">Viewport</span>.<span class="ruby-identifier">new</span>(<span class="ruby-number">0</span>, <span class="ruby-number">288</span>, <span class="ruby-number">544</span>, <span class="ruby-number">128</span>)
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">z</span> = <span class="ruby-number">100</span>
  <span class="ruby-ivar">@status_window</span> = <span class="ruby-constant">Window_BattleStatus</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@party_command_window</span> = <span class="ruby-constant">Window_PartyCommand</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@actor_command_window</span> = <span class="ruby-constant">Window_ActorCommand</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@status_window</span>.<span class="ruby-identifier">viewport</span> = <span class="ruby-ivar">@info_viewport</span>
  <span class="ruby-ivar">@party_command_window</span>.<span class="ruby-identifier">viewport</span> = <span class="ruby-ivar">@info_viewport</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">viewport</span> = <span class="ruby-ivar">@info_viewport</span>
  <span class="ruby-ivar">@status_window</span>.<span class="ruby-identifier">x</span> = <span class="ruby-number">128</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">x</span> = <span class="ruby-number">544</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-determine_item">
            
              <b>determine_item</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-determine_item" name="method-i-determine_item" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>决定道具选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-determine_item_source')" id="l_method-i-determine_item_source">show</a>
                
              </p>
              <div id="method-i-determine_item_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 543</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">determine_item</span>
  <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">set_item</span>(<span class="ruby-ivar">@item</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-ivar">@item_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@item</span>.<span class="ruby-identifier">need_selection?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@item</span>.<span class="ruby-identifier">for_opponent?</span>
      <span class="ruby-identifier">start_target_enemy_selection</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">start_target_actor_selection</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">end_item_selection</span>
    <span class="ruby-identifier">next_actor</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-determine_skill">
            
              <b>determine_skill</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-determine_skill" name="method-i-determine_skill" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>决定技能选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-determine_skill_source')" id="l_method-i-determine_skill_source">show</a>
                
              </p>
              <div id="method-i-determine_skill_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 478</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">determine_skill</span>
  <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">set_skill</span>(<span class="ruby-ivar">@skill</span>.<span class="ruby-identifier">id</span>)
  <span class="ruby-ivar">@skill_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@skill</span>.<span class="ruby-identifier">need_selection?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@skill</span>.<span class="ruby-identifier">for_opponent?</span>
      <span class="ruby-identifier">start_target_enemy_selection</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">start_target_actor_selection</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">end_skill_selection</span>
    <span class="ruby-identifier">next_actor</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_action_effects">
            
              <b>display_action_effects</b>(target, obj = nil)
            
            <a href="../classes/Scene_Battle.html#method-i-display_action_effects" name="method-i-display_action_effects" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>行动结果的显示</p>

<p>target : 对象 obj    : 技能和道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_action_effects_source')" id="l_method-i-display_action_effects_source">show</a>
                
              </p>
              <div id="method-i-display_action_effects_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1029</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_action_effects</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">skipped</span>
    <span class="ruby-identifier">line_number</span> = <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">line_number</span>
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">5</span>)
    <span class="ruby-identifier">display_critical</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>)
    <span class="ruby-identifier">display_damage</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>)
    <span class="ruby-identifier">display_state_changes</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">line_number</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">line_number</span>
      <span class="ruby-identifier">display_failure</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">states_active?</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">line_number</span> <span class="ruby-operator">!=</span> <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">line_number</span>
      <span class="ruby-identifier">wait</span>(<span class="ruby-number">30</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">back_to</span>(<span class="ruby-identifier">line_number</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_added_states">
            
              <b>display_added_states</b>(target, obj = nil)
            
            <a href="../classes/Scene_Battle.html#method-i-display_added_states" name="method-i-display_added_states" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>附加状态的显示</p>

<p>target : 对象 obj    : 技能和道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_added_states_source')" id="l_method-i-display_added_states_source">show</a>
                
              </p>
              <div id="method-i-display_added_states_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1197</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_added_states</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">state</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">added_states</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">actor?</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">message1</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">text</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">message1</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">message2</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">text</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">message2</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-number">1</span>                      <span class="ruby-comment"># 战斗不能</span>
      <span class="ruby-identifier">target</span>.<span class="ruby-identifier">perform_collapse</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">replace_instant_text</span>(<span class="ruby-identifier">text</span>)
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">20</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_animation">
            
              <b>display_animation</b>(targets, animation_id)
            
            <a href="../classes/Scene_Battle.html#method-i-display_animation" name="method-i-display_animation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>显示动画</p>

<p>targets      : 对象的排列 animation_id : 动画 ID (-1:
等同一般攻击)</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_animation_source')" id="l_method-i-display_animation_source">show</a>
                
              </p>
              <div id="method-i-display_animation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 976</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_animation</span>(<span class="ruby-identifier">targets</span>, <span class="ruby-identifier">animation_id</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">animation_id</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">0</span>
    <span class="ruby-identifier">display_attack_animation</span>(<span class="ruby-identifier">targets</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">display_normal_animation</span>(<span class="ruby-identifier">targets</span>, <span class="ruby-identifier">animation_id</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">20</span>)
  <span class="ruby-identifier">wait_for_animation</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_attack_animation">
            
              <b>display_attack_animation</b>(targets)
            
            <a href="../classes/Scene_Battle.html#method-i-display_attack_animation" name="method-i-display_attack_animation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>攻击动画的显示</p>

<p>targets : 对象的排列 <a
href="http://敌人一般攻击">敌人的情况为</a>，效果音效演奏的时候一瞬间等待
角色方面考虑到二刀流（左手武器为翻转显示）</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_attack_animation_source')" id="l_method-i-display_attack_animation_source">show</a>
                
              </p>
              <div id="method-i-display_attack_animation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 992</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_attack_animation</span>(<span class="ruby-identifier">targets</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Game_Enemy</span>)
    <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_enemy_attack</span>
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">15</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">aid1</span> = <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">atk_animation_id</span>
    <span class="ruby-identifier">aid2</span> = <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">atk_animation_id2</span>
    <span class="ruby-identifier">display_normal_animation</span>(<span class="ruby-identifier">targets</span>, <span class="ruby-identifier">aid1</span>, <span class="ruby-keyword">false</span>)
    <span class="ruby-identifier">display_normal_animation</span>(<span class="ruby-identifier">targets</span>, <span class="ruby-identifier">aid2</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">wait_for_animation</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_critical">
            
              <b>display_critical</b>(target, obj = nil)
            
            <a href="../classes/Scene_Battle.html#method-i-display_critical" name="method-i-display_critical" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>会心一击的显示</p>

<p>target : 对象 obj    : 技能和道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_critical_source')" id="l_method-i-display_critical_source">show</a>
                
              </p>
              <div id="method-i-display_critical_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1051</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_critical</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">critical</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">actor?</span>
      <span class="ruby-identifier">text</span> = <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">CriticalToActor</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">text</span> = <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">CriticalToEnemy</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">20</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_current_state">
            
              <b>display_current_state</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-display_current_state" name="method-i-display_current_state" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>显示现在的状态</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_current_state_source')" id="l_method-i-display_current_state_source">show</a>
                
              </p>
              <div id="method-i-display_current_state_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 878</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_current_state</span>
  <span class="ruby-identifier">state_text</span> = <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">most_important_state_text</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">state_text</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">5</span>)
    <span class="ruby-identifier">text</span> = <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">state_text</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">45</span>)
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_damage">
            
              <b>display_damage</b>(target, obj = nil)
            
            <a href="../classes/Scene_Battle.html#method-i-display_damage" name="method-i-display_damage" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>伤害的显示</p>

<p>target : 对象 obj    : 技能和道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_damage_source')" id="l_method-i-display_damage_source">show</a>
                
              </p>
              <div id="method-i-display_damage_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1068</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_damage</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">missed</span>
    <span class="ruby-identifier">display_miss</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">evaded</span>
    <span class="ruby-identifier">display_evasion</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">display_hp_damage</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>)
    <span class="ruby-identifier">display_mp_damage</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_drop_items">
            
              <b>display_drop_items</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-display_drop_items" name="method-i-display_drop_items" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>显示获得的掉落道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_drop_items_source')" id="l_method-i-display_drop_items_source">show</a>
                
              </p>
              <div id="method-i-display_drop_items_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 657</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_drop_items</span>
  <span class="ruby-identifier">drop_items</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_drop_items</span>
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">item</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">drop_items</span>
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_item</span>(<span class="ruby-identifier">item</span>, <span class="ruby-number">1</span>)
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ObtainItem</span>, <span class="ruby-identifier">item</span>.<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">wait_for_message</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_evasion">
            
              <b>display_evasion</b>(target, obj = nil)
            
            <a href="../classes/Scene_Battle.html#method-i-display_evasion" name="method-i-display_evasion" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>回避的显示</p>

<p>target : 对象 obj    : 技能和道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_evasion_source')" id="l_method-i-display_evasion_source">show</a>
                
              </p>
              <div id="method-i-display_evasion_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1104</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_evasion</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">actor?</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ActorEvasion</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">EnemyEvasion</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_evasion</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">30</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_exp_and_gold">
            
              <b>display_exp_and_gold</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-display_exp_and_gold" name="method-i-display_exp_and_gold" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>显示获得的金币以及经验值</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_exp_and_gold_source')" id="l_method-i-display_exp_and_gold_source">show</a>
                
              </p>
              <div id="method-i-display_exp_and_gold_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 637</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_exp_and_gold</span>
  <span class="ruby-identifier">exp</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">exp_total</span>
  <span class="ruby-identifier">gold</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">gold_total</span>
  <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">gain_gold</span>(<span class="ruby-identifier">gold</span>)
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">Victory</span>, <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-string">'\|'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">exp</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ObtainExp</span>, <span class="ruby-identifier">exp</span>)
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-string">'\.'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">gold</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ObtainGold</span>, <span class="ruby-identifier">gold</span>, <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-identifier">gold</span>)
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-string">'\.'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">wait_for_message</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_failure">
            
              <b>display_failure</b>(target, obj)
            
            <a href="../classes/Scene_Battle.html#method-i-display_failure" name="method-i-display_failure" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>失败的显示</p>

<p>target : 对象 obj    : 技能和道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_failure_source')" id="l_method-i-display_failure_source">show</a>
                
              </p>
              <div id="method-i-display_failure_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1248</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_failure</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>)
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ActionFailure</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">20</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_hp_damage">
            
              <b>display_hp_damage</b>(target, obj = nil)
            
            <a href="../classes/Scene_Battle.html#method-i-display_hp_damage" name="method-i-display_hp_damage" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>HP 伤害的显示</p>

<p>target : 对象 obj    : 技能和道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_hp_damage_source')" id="l_method-i-display_hp_damage_source">show</a>
                
              </p>
              <div id="method-i-display_hp_damage_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1120</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_hp_damage</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">hp_damage</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>                <span class="ruby-comment"># 无伤</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">obj</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">damage_to_mp</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">obj</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">base_damage</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
    <span class="ruby-identifier">fmt</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">actor?</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ActorNoDamage</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">EnemyNoDamage</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">absorbed</span>                   <span class="ruby-comment"># 吸收</span>
    <span class="ruby-identifier">fmt</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">actor?</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ActorDrain</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">EnemyDrain</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>, <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-identifier">hp</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">hp_damage</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">hp_damage</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>              <span class="ruby-comment"># 伤害</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">actor?</span>
      <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ActorDamage</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">hp_damage</span>)
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_actor_damage</span>
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">screen</span>.<span class="ruby-identifier">start_shake</span>(<span class="ruby-number">5</span>, <span class="ruby-number">5</span>, <span class="ruby-number">10</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">EnemyDamage</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">hp_damage</span>)
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_enemy_damage</span>
      <span class="ruby-identifier">target</span>.<span class="ruby-identifier">blink</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 恢复</span>
    <span class="ruby-identifier">fmt</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">actor?</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ActorRecovery</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">EnemyRecovery</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>, <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-identifier">hp</span>, <span class="ruby-operator">-</span><span class="ruby-identifier">target</span>.<span class="ruby-identifier">hp_damage</span>)
    <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_recovery</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">30</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_level_up">
            
              <b>display_level_up</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-display_level_up" name="method-i-display_level_up" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>显示等级上升</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_level_up_source')" id="l_method-i-display_level_up_source">show</a>
                
              </p>
              <div id="method-i-display_level_up_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 670</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_level_up</span>
  <span class="ruby-identifier">exp</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">exp_total</span>
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">actor</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">existing_members</span>
    <span class="ruby-identifier">last_level</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">level</span>
    <span class="ruby-identifier">last_skills</span> = <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">skills</span>
    <span class="ruby-identifier">actor</span>.<span class="ruby-identifier">gain_exp</span>(<span class="ruby-identifier">exp</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">wait_for_message</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_miss">
            
              <b>display_miss</b>(target, obj = nil)
            
            <a href="../classes/Scene_Battle.html#method-i-display_miss" name="method-i-display_miss" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Miss的显示</p>

<p>target : 对象 obj    : 技能和道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_miss_source')" id="l_method-i-display_miss_source">show</a>
                
              </p>
              <div id="method-i-display_miss_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1084</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_miss</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">obj</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">physical_attack</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">actor?</span>
      <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ActorNoHit</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">EnemyNoHit</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_miss</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ActionFailure</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">30</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_mp_damage">
            
              <b>display_mp_damage</b>(target, obj = nil)
            
            <a href="../classes/Scene_Battle.html#method-i-display_mp_damage" name="method-i-display_mp_damage" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>MP 伤害的显示</p>

<p>target : 对象 obj    : 技能和道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_mp_damage_source')" id="l_method-i-display_mp_damage_source">show</a>
                
              </p>
              <div id="method-i-display_mp_damage_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1153</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_mp_damage</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">dead?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">mp_damage</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">absorbed</span>                      <span class="ruby-comment"># 吸收</span>
    <span class="ruby-identifier">fmt</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">actor?</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ActorDrain</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">EnemyDrain</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>, <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-identifier">mp</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">mp_damage</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">mp_damage</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>              <span class="ruby-comment"># 伤害</span>
    <span class="ruby-identifier">fmt</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">actor?</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ActorLoss</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">EnemyLoss</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>, <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-identifier">mp</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">mp_damage</span>)
  <span class="ruby-keyword">else</span>                                    <span class="ruby-comment"># 恢复</span>
    <span class="ruby-identifier">fmt</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">actor?</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">ActorRecovery</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">EnemyRecovery</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span>, <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-identifier">mp</span>, <span class="ruby-operator">-</span><span class="ruby-identifier">target</span>.<span class="ruby-identifier">mp_damage</span>)
    <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_recovery</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">30</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_normal_animation">
            
              <b>display_normal_animation</b>(targets, animation_id, mirror = false)
            
            <a href="../classes/Scene_Battle.html#method-i-display_normal_animation" name="method-i-display_normal_animation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>一般动画的显示</p>

<p>targets      : 对象的排列 animation_id : 动画 ID mirror       :
左右翻转</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_normal_animation_source')" id="l_method-i-display_normal_animation_source">show</a>
                
              </p>
              <div id="method-i-display_normal_animation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1011</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_normal_animation</span>(<span class="ruby-identifier">targets</span>, <span class="ruby-identifier">animation_id</span>, <span class="ruby-identifier">mirror</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">animation</span> = <span class="ruby-identifier">$data_animations</span>[<span class="ruby-identifier">animation_id</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">animation</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">to_screen</span> = (<span class="ruby-identifier">animation</span>.<span class="ruby-identifier">position</span> <span class="ruby-operator">==</span> <span class="ruby-number">3</span>)       <span class="ruby-comment"># 位置是「全画面」么？</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">target</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">targets</span>.<span class="ruby-identifier">uniq</span>
      <span class="ruby-identifier">target</span>.<span class="ruby-identifier">animation_id</span> = <span class="ruby-identifier">animation_id</span>
      <span class="ruby-identifier">target</span>.<span class="ruby-identifier">animation_mirror</span> = <span class="ruby-identifier">mirror</span>
      <span class="ruby-identifier">wait</span>(<span class="ruby-number">20</span>, <span class="ruby-keyword">true</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">to_screen</span>           <span class="ruby-comment"># 单体用的等待</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">20</span>, <span class="ruby-keyword">true</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">to_screen</span>                 <span class="ruby-comment"># 全体用的等待</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_remained_states">
            
              <b>display_remained_states</b>(target, obj = nil)
            
            <a href="../classes/Scene_Battle.html#method-i-display_remained_states" name="method-i-display_remained_states" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>叠加状态的显示</p>

<p>target : 对象 obj    : 技能和道具
比如在已经睡眠的角色上再附加睡眠状态的情况。</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_remained_states_source')" id="l_method-i-display_remained_states_source">show</a>
                
              </p>
              <div id="method-i-display_remained_states_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1234</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_remained_states</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">state</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">remained_states</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">message3</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">message3</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">replace_instant_text</span>(<span class="ruby-identifier">text</span>)
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">20</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_removed_states">
            
              <b>display_removed_states</b>(target, obj = nil)
            
            <a href="../classes/Scene_Battle.html#method-i-display_removed_states" name="method-i-display_removed_states" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>解除状态的显示</p>

<p>target : 对象 obj    : 技能和道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_removed_states_source')" id="l_method-i-display_removed_states_source">show</a>
                
              </p>
              <div id="method-i-display_removed_states_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1219</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_removed_states</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">state</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">removed_states</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">message4</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">target</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">state</span>.<span class="ruby-identifier">message4</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">replace_instant_text</span>(<span class="ruby-identifier">text</span>)
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">20</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-display_state_changes">
            
              <b>display_state_changes</b>(target, obj = nil)
            
            <a href="../classes/Scene_Battle.html#method-i-display_state_changes" name="method-i-display_state_changes" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>状态变化的显示</p>

<p>target : 对象 obj    : 技能和道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-display_state_changes_source')" id="l_method-i-display_state_changes_source">show</a>
                
              </p>
              <div id="method-i-display_state_changes_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 1176</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">display_state_changes</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">missed</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">evaded</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">states_active?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">line_number</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">4</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">display_added_states</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>)
  <span class="ruby-identifier">display_removed_states</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>)
  <span class="ruby-identifier">display_remained_states</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">obj</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">last_instant_text</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">back_one</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">10</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-dispose_info_viewport">
            
              <b>dispose_info_viewport</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-dispose_info_viewport" name="method-i-dispose_info_viewport" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>释放显示信息的视口</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-dispose_info_viewport_source')" id="l_method-i-dispose_info_viewport_source">show</a>
                
              </p>
              <div id="method-i-dispose_info_viewport_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">dispose_info_viewport</span>
  <span class="ruby-ivar">@status_window</span>.<span class="ruby-identifier">dispose</span>
  <span class="ruby-ivar">@party_command_window</span>.<span class="ruby-identifier">dispose</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">dispose</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">dispose</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-end_item_selection">
            
              <b>end_item_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-end_item_selection" name="method-i-end_item_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>结束道具选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-end_item_selection_source')" id="l_method-i-end_item_selection_source">show</a>
                
              </p>
              <div id="method-i-end_item_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 506</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">end_item_selection</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@item_window</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@item_window</span>.<span class="ruby-identifier">dispose</span>
    <span class="ruby-ivar">@item_window</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@help_window</span>.<span class="ruby-identifier">dispose</span>
    <span class="ruby-ivar">@help_window</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-end_skill_selection">
            
              <b>end_skill_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-end_skill_selection" name="method-i-end_skill_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>结束技能选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-end_skill_selection_source')" id="l_method-i-end_skill_selection_source">show</a>
                
              </p>
              <div id="method-i-end_skill_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 441</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">end_skill_selection</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@skill_window</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@skill_window</span>.<span class="ruby-identifier">dispose</span>
    <span class="ruby-ivar">@skill_window</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@help_window</span>.<span class="ruby-identifier">dispose</span>
    <span class="ruby-ivar">@help_window</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-end_target_actor_selection">
            
              <b>end_target_actor_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-end_target_actor_selection" name="method-i-end_target_actor_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>结束对象角色的选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-end_target_actor_selection_source')" id="l_method-i-end_target_actor_selection_source">show</a>
                
              </p>
              <div id="method-i-end_target_actor_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 403</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">end_target_actor_selection</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">rect</span>.<span class="ruby-identifier">x</span> <span class="ruby-operator">-=</span> <span class="ruby-ivar">@target_actor_window</span>.<span class="ruby-identifier">width</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">ox</span> <span class="ruby-operator">-=</span> <span class="ruby-ivar">@target_actor_window</span>.<span class="ruby-identifier">width</span>
  <span class="ruby-ivar">@target_actor_window</span>.<span class="ruby-identifier">dispose</span>
  <span class="ruby-ivar">@target_actor_window</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-end_target_enemy_selection">
            
              <b>end_target_enemy_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-end_target_enemy_selection" name="method-i-end_target_enemy_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>结束对象敌人的选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-end_target_enemy_selection_source')" id="l_method-i-end_target_enemy_selection_source">show</a>
                
              </p>
              <div id="method-i-end_target_enemy_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 359</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">end_target_enemy_selection</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">rect</span>.<span class="ruby-identifier">x</span> <span class="ruby-operator">-=</span> <span class="ruby-ivar">@target_enemy_window</span>.<span class="ruby-identifier">width</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">ox</span> <span class="ruby-operator">-=</span> <span class="ruby-ivar">@target_enemy_window</span>.<span class="ruby-identifier">width</span>
  <span class="ruby-ivar">@target_enemy_window</span>.<span class="ruby-identifier">dispose</span>
  <span class="ruby-ivar">@target_enemy_window</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">index</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
    <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-execute_action">
            
              <b>execute_action</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-execute_action" name="method-i-execute_action" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>执行战斗行动</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-execute_action_source')" id="l_method-i-execute_action_source">show</a>
                
              </p>
              <div id="method-i-execute_action_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 805</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_action</span>
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">kind</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 基本</span>
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">basic</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 攻击</span>
      <span class="ruby-identifier">execute_action_attack</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 防御</span>
      <span class="ruby-identifier">execute_action_guard</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 逃走</span>
      <span class="ruby-identifier">execute_action_escape</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 待机</span>
      <span class="ruby-identifier">execute_action_wait</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 技能</span>
    <span class="ruby-identifier">execute_action_skill</span>
  <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 道具</span>
    <span class="ruby-identifier">execute_action_item</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-execute_action_attack">
            
              <b>execute_action_attack</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-execute_action_attack" name="method-i-execute_action_attack" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>执行战斗行动 : 攻击</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-execute_action_attack_source')" id="l_method-i-execute_action_attack_source">show</a>
                
              </p>
              <div id="method-i-execute_action_attack_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 892</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_action_attack</span>
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">DoAttack</span>, <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">targets</span> = <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">make_targets</span>
  <span class="ruby-identifier">display_attack_animation</span>(<span class="ruby-identifier">targets</span>)
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">20</span>)
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">target</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">targets</span>
    <span class="ruby-identifier">target</span>.<span class="ruby-identifier">attack_effect</span>(<span class="ruby-ivar">@active_battler</span>)
    <span class="ruby-identifier">display_action_effects</span>(<span class="ruby-identifier">target</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-execute_action_escape">
            
              <b>execute_action_escape</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-execute_action_escape" name="method-i-execute_action_escape" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>执行战斗行动 : 逃走</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-execute_action_escape_source')" id="l_method-i-execute_action_escape_source">show</a>
                
              </p>
              <div id="method-i-execute_action_escape_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 916</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_action_escape</span>
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">DoEscape</span>, <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">escape</span>
  <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_escape</span>
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">45</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-execute_action_guard">
            
              <b>execute_action_guard</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-execute_action_guard" name="method-i-execute_action_guard" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>执行战斗行动 : 防御</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-execute_action_guard_source')" id="l_method-i-execute_action_guard_source">show</a>
                
              </p>
              <div id="method-i-execute_action_guard_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 907</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_action_guard</span>
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">DoGuard</span>, <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">45</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-execute_action_item">
            
              <b>execute_action_item</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-execute_action_item" name="method-i-execute_action_item" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>执行战斗行动 : 道具</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-execute_action_item_source')" id="l_method-i-execute_action_item_source">show</a>
                
              </p>
              <div id="method-i-execute_action_item_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 957</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_action_item</span>
  <span class="ruby-identifier">item</span> = <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">item</span>
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">UseItem</span>, <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">item</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">targets</span> = <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">make_targets</span>
  <span class="ruby-identifier">display_animation</span>(<span class="ruby-identifier">targets</span>, <span class="ruby-identifier">item</span>.<span class="ruby-identifier">animation_id</span>)
  <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">consume_item</span>(<span class="ruby-identifier">item</span>)
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">common_event_id</span> = <span class="ruby-identifier">item</span>.<span class="ruby-identifier">common_event_id</span>
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">target</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">targets</span>
    <span class="ruby-identifier">target</span>.<span class="ruby-identifier">item_effect</span>(<span class="ruby-ivar">@active_battler</span>, <span class="ruby-identifier">item</span>)
    <span class="ruby-identifier">display_action_effects</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">item</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-execute_action_skill">
            
              <b>execute_action_skill</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-execute_action_skill" name="method-i-execute_action_skill" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>执行战斗行动 : 技能</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-execute_action_skill_source')" id="l_method-i-execute_action_skill_source">show</a>
                
              </p>
              <div id="method-i-execute_action_skill_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 936</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_action_skill</span>
  <span class="ruby-identifier">skill</span> = <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">skill</span>
  <span class="ruby-identifier">text</span> = <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">skill</span>.<span class="ruby-identifier">message1</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">skill</span>.<span class="ruby-identifier">message2</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">10</span>)
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">skill</span>.<span class="ruby-identifier">message2</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">targets</span> = <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">make_targets</span>
  <span class="ruby-identifier">display_animation</span>(<span class="ruby-identifier">targets</span>, <span class="ruby-identifier">skill</span>.<span class="ruby-identifier">animation_id</span>)
  <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">mp</span> <span class="ruby-operator">-=</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">calc_mp_cost</span>(<span class="ruby-identifier">skill</span>)
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">common_event_id</span> = <span class="ruby-identifier">skill</span>.<span class="ruby-identifier">common_event_id</span>
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">target</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">targets</span>
    <span class="ruby-identifier">target</span>.<span class="ruby-identifier">skill_effect</span>(<span class="ruby-ivar">@active_battler</span>, <span class="ruby-identifier">skill</span>)
    <span class="ruby-identifier">display_action_effects</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">skill</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-execute_action_wait">
            
              <b>execute_action_wait</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-execute_action_wait" name="method-i-execute_action_wait" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>执行战斗行动 : 待机</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-execute_action_wait_source')" id="l_method-i-execute_action_wait_source">show</a>
                
              </p>
              <div id="method-i-execute_action_wait_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 927</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">execute_action_wait</span>
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">DoWait</span>, <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">add_instant_text</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">45</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-judge_win_loss">
            
              <b>judge_win_loss</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-judge_win_loss" name="method-i-judge_win_loss" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>胜败判定</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-judge_win_loss_source')" id="l_method-i-judge_win_loss_source">show</a>
                
              </p>
              <div id="method-i-judge_win_loss_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 188</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">judge_win_loss</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">all_dead?</span>
      <span class="ruby-identifier">process_defeat</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">all_dead?</span>
      <span class="ruby-identifier">process_victory</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-make_action_orders">
            
              <b>make_action_orders</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-make_action_orders" name="method-i-make_action_orders" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>生成行动顺序</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-make_action_orders_source')" id="l_method-i-make_action_orders_source">show</a>
                
              </p>
              <div id="method-i-make_action_orders_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 756</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">make_action_orders</span>
  <span class="ruby-ivar">@action_battlers</span> = []
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">surprise</span>
    <span class="ruby-ivar">@action_battlers</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">preemptive</span>
    <span class="ruby-ivar">@action_battlers</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">members</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">battler</span> <span class="ruby-keyword">in</span> <span class="ruby-ivar">@action_battlers</span>
    <span class="ruby-identifier">battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">make_speed</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@action_battlers</span>.<span class="ruby-identifier">sort!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">b</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">speed</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">speed</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-make_escape_ratio">
            
              <b>make_escape_ratio</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-make_escape_ratio" name="method-i-make_escape_ratio" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>●生成逃走成功率</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-make_escape_ratio_source')" id="l_method-i-make_escape_ratio_source">show</a>
                
              </p>
              <div id="method-i-make_escape_ratio_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 584</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">make_escape_ratio</span>
  <span class="ruby-identifier">actors_agi</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">average_agi</span>
  <span class="ruby-identifier">enemies_agi</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">average_agi</span>
  <span class="ruby-ivar">@escape_ratio</span> = <span class="ruby-number">150</span> <span class="ruby-operator">-</span> <span class="ruby-number">100</span> * <span class="ruby-identifier">enemies_agi</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">actors_agi</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-next_actor">
            
              <b>next_actor</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-next_actor" name="method-i-next_actor" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>转到输入下一个角色的命令</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-next_actor_source')" id="l_method-i-next_actor_source">show</a>
                
              </p>
              <div id="method-i-next_actor_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 233</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">next_actor</span>
  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@actor_index</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">-</span><span class="ruby-number">1</span>
      <span class="ruby-identifier">start_main</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@status_window</span>.<span class="ruby-identifier">index</span> = <span class="ruby-ivar">@actor_index</span> <span class="ruby-operator">+=</span> <span class="ruby-number">1</span>
    <span class="ruby-ivar">@active_battler</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@actor_index</span>]
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">auto_battle</span>
      <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">make_action</span>
      <span class="ruby-keyword">next</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">inputable?</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">start_actor_command_selection</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-post_start">
            
              <b>post_start</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-post_start" name="method-i-post_start" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>开始后处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-post_start_source')" id="l_method-i-post_start_source">show</a>
                
              </p>
              <div id="method-i-post_start_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 22</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">post_start</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-identifier">process_battle_start</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-prior_actor">
            
              <b>prior_actor</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-prior_actor" name="method-i-prior_actor" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>转向前一个角色的命令输入</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-prior_actor_source')" id="l_method-i-prior_actor_source">show</a>
                
              </p>
              <div id="method-i-prior_actor_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 253</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">prior_actor</span>
  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@actor_index</span> <span class="ruby-operator">==</span> <span class="ruby-number">0</span>
      <span class="ruby-identifier">start_party_command_selection</span>
      <span class="ruby-keyword">return</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@status_window</span>.<span class="ruby-identifier">index</span> = <span class="ruby-ivar">@actor_index</span> <span class="ruby-operator">-=</span> <span class="ruby-number">1</span>
    <span class="ruby-ivar">@active_battler</span> = <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">members</span>[<span class="ruby-ivar">@actor_index</span>]
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">auto_battle</span>
    <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">inputable?</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">start_actor_command_selection</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-process_action">
            
              <b>process_action</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-process_action" name="method-i-process_action" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>处理战斗行动</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-process_action_source')" id="l_method-i-process_action_source">show</a>
                
              </p>
              <div id="method-i-process_action_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 775</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">process_action</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">judge_win_loss</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">set_next_active_battler</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">turn_end</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">dead?</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">5</span>)
  <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">white_flash</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">forcing</span>
    <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">prepare</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">valid?</span>
    <span class="ruby-identifier">execute_action</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">forcing</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">clear</span>
    <span class="ruby-identifier">remove_states_auto</span>
    <span class="ruby-identifier">display_current_state</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">white_flash</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">clear</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-process_battle_event">
            
              <b>process_battle_event</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-process_battle_event" name="method-i-process_battle_event" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>处理战斗事件</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-process_battle_event_source')" id="l_method-i-process_battle_event_source">show</a>
                
              </p>
              <div id="method-i-process_battle_event_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 172</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">process_battle_event</span>
  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">judge_win_loss</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">interpreter</span>.<span class="ruby-identifier">update</span>
    <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">setup_battle_event</span>
    <span class="ruby-identifier">wait_for_message</span>
    <span class="ruby-identifier">process_action</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">forcing_battler</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">interpreter</span>.<span class="ruby-identifier">running?</span>
    <span class="ruby-identifier">update_basic</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-process_battle_start">
            
              <b>process_battle_start</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-process_battle_start" name="method-i-process_battle_start" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>战斗开始的处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-process_battle_start_source')" id="l_method-i-process_battle_start_source">show</a>
                
              </p>
              <div id="method-i-process_battle_start_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 561</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">process_battle_start</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">10</span>)
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword">in</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">enemy_names</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">Emerge</span>, <span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">preemptive</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">Preemptive</span>, <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">surprise</span>
    <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">Surprise</span>, <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">name</span>)
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">wait_for_message</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">make_escape_ratio</span>
  <span class="ruby-identifier">process_battle_event</span>
  <span class="ruby-identifier">start_party_command_selection</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-process_defeat">
            
              <b>process_defeat</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-process_defeat" name="method-i-process_defeat" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>败北处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-process_defeat_source')" id="l_method-i-process_defeat_source">show</a>
                
              </p>
              <div id="method-i-process_defeat_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 683</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">process_defeat</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">Defeat</span>, <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-identifier">wait_for_message</span>
  <span class="ruby-identifier">battle_end</span>(<span class="ruby-number">2</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-process_escape">
            
              <b>process_escape</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-process_escape" name="method-i-process_escape" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>逃走处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-process_escape_source')" id="l_method-i-process_escape_source">show</a>
                
              </p>
              <div id="method-i-process_escape_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 593</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">process_escape</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">text</span> = <span class="ruby-identifier">sprintf</span>(<span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">EscapeStart</span>, <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">text</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">preemptive</span>
    <span class="ruby-identifier">success</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">success</span> = (<span class="ruby-identifier">rand</span>(<span class="ruby-number">100</span>) <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@escape_ratio</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_escape</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">success</span>
    <span class="ruby-identifier">wait_for_message</span>
    <span class="ruby-identifier">battle_end</span>(<span class="ruby-number">1</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@escape_ratio</span> <span class="ruby-operator">+=</span> <span class="ruby-number">10</span>
    <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">texts</span>.<span class="ruby-identifier">push</span>(<span class="ruby-string">'\.'</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Vocab</span><span class="ruby-operator">::</span><span class="ruby-constant">EscapeFailure</span>)
    <span class="ruby-identifier">wait_for_message</span>
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">clear_actions</span>
    <span class="ruby-identifier">start_main</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-process_victory">
            
              <b>process_victory</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-process_victory" name="method-i-process_victory" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>胜利处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-process_victory_source')" id="l_method-i-process_victory_source">show</a>
                
              </p>
              <div id="method-i-process_victory_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 619</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">process_victory</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-constant">RPG</span><span class="ruby-operator">::</span><span class="ruby-constant">BGM</span>.<span class="ruby-identifier">stop</span>
  <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">battle_end_me</span>.<span class="ruby-identifier">play</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$BTEST</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">map_bgm</span>.<span class="ruby-identifier">play</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">map_bgs</span>.<span class="ruby-identifier">play</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">display_exp_and_gold</span>
  <span class="ruby-identifier">display_drop_items</span>
  <span class="ruby-identifier">display_level_up</span>
  <span class="ruby-identifier">battle_end</span>(<span class="ruby-number">0</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remove_states_auto">
            
              <b>remove_states_auto</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-remove_states_auto" name="method-i-remove_states_auto" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>状态自然解除</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-remove_states_auto_source')" id="l_method-i-remove_states_auto_source">show</a>
                
              </p>
              <div id="method-i-remove_states_auto_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 864</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remove_states_auto</span>
  <span class="ruby-identifier">last_st</span> = <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">states</span>
  <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">remove_states_auto</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">states</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">last_st</span>
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">5</span>)
    <span class="ruby-identifier">display_state_changes</span>(<span class="ruby-ivar">@active_battler</span>)
    <span class="ruby-identifier">wait</span>(<span class="ruby-number">30</span>)
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-set_next_active_battler">
            
              <b>set_next_active_battler</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-set_next_active_battler" name="method-i-set_next_active_battler" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>其次应该行动的战斗角色的设定</p>

<p><a
href="http://强制战斗行动">由于事件指令中</a>是进行的时候设定战斗角色而现在删除了
所以在此之外的名单的开始取得。
如果取得了不在队伍的角色（Index 为
nil，战斗事件完成之后接着发生） 则直接跳过</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-set_next_active_battler_source')" id="l_method-i-set_next_active_battler_source">show</a>
                
              </p>
              <div id="method-i-set_next_active_battler_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 847</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">set_next_active_battler</span>
  <span class="ruby-identifier">loop</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">forcing_battler</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-ivar">@active_battler</span> = <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">forcing_battler</span>
      <span class="ruby-ivar">@action_battlers</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@active_battler</span>)
      <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">forcing_battler</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@active_battler</span> = <span class="ruby-ivar">@action_battlers</span>.<span class="ruby-identifier">shift</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">index</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-show_fast-3F">
            
              <b>show_fast?</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-show_fast-3F" name="method-i-show_fast-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>发动判定</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-show_fast-3F_source')" id="l_method-i-show_fast-3F_source">show</a>
                
              </p>
              <div id="method-i-show_fast-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">show_fast?</span>
  <span class="ruby-keyword">return</span> (<span class="ruby-constant">Input</span>.<span class="ruby-identifier">press?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">A</span>) <span class="ruby-keyword">or</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">press?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-start">
            
              <b>start</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-start" name="method-i-start" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>开始处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-start_source')" id="l_method-i-start_source">show</a>
                
              </p>
              <div id="method-i-start_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 10</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">start</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@spriteset</span> = <span class="ruby-constant">Spriteset_Battle</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@message_window</span> = <span class="ruby-constant">Window_BattleMessage</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@action_battlers</span> = []
  <span class="ruby-identifier">create_info_viewport</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-start_actor_command_selection">
            
              <b>start_actor_command_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-start_actor_command_selection" name="method-i-start_actor_command_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>开始角色指令的选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-start_actor_command_selection_source')" id="l_method-i-start_actor_command_selection_source">show</a>
                
              </p>
              <div id="method-i-start_actor_command_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 311</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">start_actor_command_selection</span>
  <span class="ruby-ivar">@party_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">setup</span>(<span class="ruby-ivar">@active_battler</span>)
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">index</span> = <span class="ruby-number">0</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-start_item_selection">
            
              <b>start_item_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-start_item_selection" name="method-i-start_item_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>开始道具选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-start_item_selection_source')" id="l_method-i-start_item_selection_source">show</a>
                
              </p>
              <div id="method-i-start_item_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 496</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">start_item_selection</span>
  <span class="ruby-ivar">@help_window</span> = <span class="ruby-constant">Window_Help</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@item_window</span> = <span class="ruby-constant">Window_Item</span>.<span class="ruby-identifier">new</span>(<span class="ruby-number">0</span>, <span class="ruby-number">56</span>, <span class="ruby-number">544</span>, <span class="ruby-number">232</span>)
  <span class="ruby-ivar">@item_window</span>.<span class="ruby-identifier">help_window</span> = <span class="ruby-ivar">@help_window</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-start_main">
            
              <b>start_main</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-start_main" name="method-i-start_main" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>开始执行战斗处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-start_main_source')" id="l_method-i-start_main_source">show</a>
                
              </p>
              <div id="method-i-start_main_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 738</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">start_main</span>
  <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">increase_turn</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">ox</span> = <span class="ruby-number">0</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@party_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@status_window</span>.<span class="ruby-identifier">index</span> = <span class="ruby-ivar">@actor_index</span> = <span class="ruby-number">-1</span>
  <span class="ruby-ivar">@active_battler</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">make_actions</span>
  <span class="ruby-identifier">make_action_orders</span>
  <span class="ruby-identifier">wait</span>(<span class="ruby-number">20</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-start_party_command_selection">
            
              <b>start_party_command_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-start_party_command_selection" name="method-i-start_party_command_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>开始队伍指令的选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-start_party_command_selection_source')" id="l_method-i-start_party_command_selection_source">show</a>
                
              </p>
              <div id="method-i-start_party_command_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 270</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">start_party_command_selection</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">in_battle</span>
    <span class="ruby-ivar">@status_window</span>.<span class="ruby-identifier">refresh</span>
    <span class="ruby-ivar">@status_window</span>.<span class="ruby-identifier">index</span> = <span class="ruby-ivar">@actor_index</span> = <span class="ruby-number">-1</span>
    <span class="ruby-ivar">@active_battler</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@party_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-ivar">@party_command_window</span>.<span class="ruby-identifier">index</span> = <span class="ruby-number">0</span>
    <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">clear_actions</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">surprise</span> <span class="ruby-keyword">or</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">inputable?</span>
      <span class="ruby-identifier">start_main</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-start_skill_selection">
            
              <b>start_skill_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-start_skill_selection" name="method-i-start_skill_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>开始技能选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-start_skill_selection_source')" id="l_method-i-start_skill_selection_source">show</a>
                
              </p>
              <div id="method-i-start_skill_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 431</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">start_skill_selection</span>
  <span class="ruby-ivar">@help_window</span> = <span class="ruby-constant">Window_Help</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@skill_window</span> = <span class="ruby-constant">Window_Skill</span>.<span class="ruby-identifier">new</span>(<span class="ruby-number">0</span>, <span class="ruby-number">56</span>, <span class="ruby-number">544</span>, <span class="ruby-number">232</span>, <span class="ruby-ivar">@active_battler</span>)
  <span class="ruby-ivar">@skill_window</span>.<span class="ruby-identifier">help_window</span> = <span class="ruby-ivar">@help_window</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-start_target_actor_selection">
            
              <b>start_target_actor_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-start_target_actor_selection" name="method-i-start_target_actor_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>开始对象角色对象的选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-start_target_actor_selection_source')" id="l_method-i-start_target_actor_selection_source">show</a>
                
              </p>
              <div id="method-i-start_target_actor_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 390</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">start_target_actor_selection</span>
  <span class="ruby-ivar">@target_actor_window</span> = <span class="ruby-constant">Window_BattleStatus</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@target_actor_window</span>.<span class="ruby-identifier">index</span> = <span class="ruby-number">0</span>
  <span class="ruby-ivar">@target_actor_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@target_actor_window</span>.<span class="ruby-identifier">y</span> = <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">rect</span>.<span class="ruby-identifier">y</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">rect</span>.<span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@target_actor_window</span>.<span class="ruby-identifier">width</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">ox</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@target_actor_window</span>.<span class="ruby-identifier">width</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-start_target_enemy_selection">
            
              <b>start_target_enemy_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-start_target_enemy_selection" name="method-i-start_target_enemy_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>开始对象敌人的选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-start_target_enemy_selection_source')" id="l_method-i-start_target_enemy_selection_source">show</a>
                
              </p>
              <div id="method-i-start_target_enemy_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 348</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">start_target_enemy_selection</span>
  <span class="ruby-ivar">@target_enemy_window</span> = <span class="ruby-constant">Window_TargetEnemy</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@target_enemy_window</span>.<span class="ruby-identifier">y</span> = <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">rect</span>.<span class="ruby-identifier">y</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">rect</span>.<span class="ruby-identifier">x</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@target_enemy_window</span>.<span class="ruby-identifier">width</span>
  <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">ox</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@target_enemy_window</span>.<span class="ruby-identifier">width</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-terminate">
            
              <b>terminate</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-terminate" name="method-i-terminate" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>结束处理</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-terminate_source')" id="l_method-i-terminate_source">show</a>
                
              </p>
              <div id="method-i-terminate_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 30</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">terminate</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-identifier">dispose_info_viewport</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">dispose</span>
  <span class="ruby-ivar">@spriteset</span>.<span class="ruby-identifier">dispose</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$scene</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Scene_Gameover</span>)
    <span class="ruby-identifier">$scene</span> = <span class="ruby-keyword">nil</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">$BTEST</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-turn_end">
            
              <b>turn_end</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-turn_end" name="method-i-turn_end" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>回合结束</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-turn_end_source')" id="l_method-i-turn_end_source">show</a>
                
              </p>
              <div id="method-i-turn_end_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 828</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">turn_end</span>
  <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">turn_ending</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">slip_damage_effect</span>
  <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">slip_damage_effect</span>
  <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">do_auto_recovery</span>
  <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">preemptive</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">surprise</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">process_battle_event</span>
  <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">turn_ending</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">start_party_command_selection</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update">
            
              <b>update</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-update" name="method-i-update" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>刷新画面</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_source')" id="l_method-i-update_source">show</a>
                
              </p>
              <div id="method-i-update_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update</span>
  <span class="ruby-keyword">super</span>
  <span class="ruby-identifier">update_basic</span>(<span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">update_info_viewport</span>                  <span class="ruby-comment"># 显示刷新信息的视口</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
    <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">visible</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>          <span class="ruby-comment"># 显示信息中以外的情况下</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">judge_win_loss</span>            <span class="ruby-comment"># 胜败判定</span>
    <span class="ruby-identifier">update_scene_change</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@target_enemy_window</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">update_target_enemy_selection</span>     <span class="ruby-comment"># 对象敌人选择</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@target_actor_window</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">update_target_actor_selection</span>     <span class="ruby-comment"># 对象角色选择</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@skill_window</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">update_skill_selection</span>            <span class="ruby-comment"># 技能选择</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@item_window</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">update_item_selection</span>             <span class="ruby-comment"># 道具选择</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@party_command_window</span>.<span class="ruby-identifier">active</span>
      <span class="ruby-identifier">update_party_command_selection</span>    <span class="ruby-comment"># 队伍指令选择</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span>
      <span class="ruby-identifier">update_actor_command_selection</span>    <span class="ruby-comment"># 角色指令选择</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">process_battle_event</span>              <span class="ruby-comment"># 战斗事件处理</span>
      <span class="ruby-identifier">process_action</span>                    <span class="ruby-comment"># 战斗行动</span>
      <span class="ruby-identifier">process_battle_event</span>              <span class="ruby-comment"># 战斗事件处理</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_actor_command_selection">
            
              <b>update_actor_command_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-update_actor_command_selection" name="method-i-update_actor_command_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>刷新角色指令的选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_actor_command_selection_source')" id="l_method-i-update_actor_command_selection_source">show</a>
                
              </p>
              <div id="method-i-update_actor_command_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 321</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_actor_command_selection</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">trigger?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span>)
    <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_cancel</span>
    <span class="ruby-identifier">prior_actor</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">trigger?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span>)
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">index</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 攻击</span>
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_decision</span>
      <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">set_attack</span>
      <span class="ruby-identifier">start_target_enemy_selection</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 技能</span>
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_decision</span>
      <span class="ruby-identifier">start_skill_selection</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">2</span>  <span class="ruby-comment"># 防御</span>
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_decision</span>
      <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">set_guard</span>
      <span class="ruby-identifier">next_actor</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">3</span>  <span class="ruby-comment"># 道具</span>
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_decision</span>
      <span class="ruby-identifier">start_item_selection</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_basic">
            
              <b>update_basic</b>(main = false)
            
            <a href="../classes/Scene_Battle.html#method-i-update_basic" name="method-i-update_basic" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>处理基本更新</p>

<p>main : 呼叫主处理的update方法</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_basic_source')" id="l_method-i-update_basic_source">show</a>
                
              </p>
              <div id="method-i-update_basic_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_basic</span>(<span class="ruby-identifier">main</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Graphics</span>.<span class="ruby-identifier">update</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">main</span>     <span class="ruby-comment"># 刷新游戏画面</span>
  <span class="ruby-constant">Input</span>.<span class="ruby-identifier">update</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">main</span>        <span class="ruby-comment"># 刷新输入信息</span>
  <span class="ruby-identifier">$game_system</span>.<span class="ruby-identifier">update</span>             <span class="ruby-comment"># 刷新计时器</span>
  <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">update</span>              <span class="ruby-comment"># 刷新敌人队伍</span>
  <span class="ruby-ivar">@spriteset</span>.<span class="ruby-identifier">update</span>               <span class="ruby-comment"># 刷新spriteset</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">update</span>          <span class="ruby-comment"># 刷新信息窗口</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_info_viewport">
            
              <b>update_info_viewport</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-update_info_viewport" name="method-i-update_info_viewport" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>刷新显示信息的视口</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_info_viewport_source')" id="l_method-i-update_info_viewport_source">show</a>
                
              </p>
              <div id="method-i-update_info_viewport_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 158</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_info_viewport</span>
  <span class="ruby-ivar">@party_command_window</span>.<span class="ruby-identifier">update</span>
  <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">update</span>
  <span class="ruby-ivar">@status_window</span>.<span class="ruby-identifier">update</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@party_command_window</span>.<span class="ruby-identifier">active</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">ox</span> <span class="ruby-operator">&gt;</span> <span class="ruby-number">0</span>
    <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">ox</span> <span class="ruby-operator">-=</span> <span class="ruby-number">16</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@actor_command_window</span>.<span class="ruby-identifier">active</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">ox</span> <span class="ruby-operator">&lt;</span> <span class="ruby-number">128</span>
    <span class="ruby-ivar">@info_viewport</span>.<span class="ruby-identifier">ox</span> <span class="ruby-operator">+=</span> <span class="ruby-number">16</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_item_selection">
            
              <b>update_item_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-update_item_selection" name="method-i-update_item_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>刷新道具选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_item_selection_source')" id="l_method-i-update_item_selection_source">show</a>
                
              </p>
              <div id="method-i-update_item_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 519</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_item_selection</span>
  <span class="ruby-ivar">@item_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@item_window</span>.<span class="ruby-identifier">update</span>
  <span class="ruby-ivar">@help_window</span>.<span class="ruby-identifier">update</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">trigger?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span>)
    <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_cancel</span>
    <span class="ruby-identifier">end_item_selection</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">trigger?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span>)
    <span class="ruby-ivar">@item</span> = <span class="ruby-ivar">@item_window</span>.<span class="ruby-identifier">item</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@item</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">last_item_id</span> = <span class="ruby-ivar">@item</span>.<span class="ruby-identifier">id</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_party</span>.<span class="ruby-identifier">item_can_use?</span>(<span class="ruby-ivar">@item</span>)
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_decision</span>
      <span class="ruby-identifier">determine_item</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_buzzer</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_party_command_selection">
            
              <b>update_party_command_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-update_party_command_selection" name="method-i-update_party_command_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>刷新队伍指令的选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_party_command_selection_source')" id="l_method-i-update_party_command_selection_source">show</a>
                
              </p>
              <div id="method-i-update_party_command_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 290</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_party_command_selection</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">trigger?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span>)
    <span class="ruby-keyword">case</span> <span class="ruby-ivar">@party_command_window</span>.<span class="ruby-identifier">index</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">0</span>  <span class="ruby-comment"># 战斗</span>
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_decision</span>
      <span class="ruby-ivar">@status_window</span>.<span class="ruby-identifier">index</span> = <span class="ruby-ivar">@actor_index</span> = <span class="ruby-number">-1</span>
      <span class="ruby-identifier">next_actor</span>
    <span class="ruby-keyword">when</span> <span class="ruby-number">1</span>  <span class="ruby-comment"># 逃跑</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">$game_troop</span>.<span class="ruby-identifier">can_escape</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">false</span>
        <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_buzzer</span>
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_decision</span>
      <span class="ruby-identifier">process_escape</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_scene_change">
            
              <b>update_scene_change</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-update_scene_change" name="method-i-update_scene_change" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>执行画面切换</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_scene_change_source')" id="l_method-i-update_scene_change_source">show</a>
                
              </p>
              <div id="method-i-update_scene_change_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 695</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_scene_change</span>
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;map&quot;</span>
    <span class="ruby-identifier">call_map</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;gameover&quot;</span>
    <span class="ruby-identifier">call_gameover</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;title&quot;</span>
    <span class="ruby-identifier">call_title</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">$game_temp</span>.<span class="ruby-identifier">next_scene</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_skill_selection">
            
              <b>update_skill_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-update_skill_selection" name="method-i-update_skill_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>刷新技能选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_skill_selection_source')" id="l_method-i-update_skill_selection_source">show</a>
                
              </p>
              <div id="method-i-update_skill_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 454</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_skill_selection</span>
  <span class="ruby-ivar">@skill_window</span>.<span class="ruby-identifier">active</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@skill_window</span>.<span class="ruby-identifier">update</span>
  <span class="ruby-ivar">@help_window</span>.<span class="ruby-identifier">update</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">trigger?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span>)
    <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_cancel</span>
    <span class="ruby-identifier">end_skill_selection</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">trigger?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span>)
    <span class="ruby-ivar">@skill</span> = <span class="ruby-ivar">@skill_window</span>.<span class="ruby-identifier">skill</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@skill</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
      <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">last_skill_id</span> = <span class="ruby-ivar">@skill</span>.<span class="ruby-identifier">id</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">skill_can_use?</span>(<span class="ruby-ivar">@skill</span>)
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_decision</span>
      <span class="ruby-identifier">determine_skill</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_buzzer</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_target_actor_selection">
            
              <b>update_target_actor_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-update_target_actor_selection" name="method-i-update_target_actor_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>刷新对象角色的选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_target_actor_selection_source')" id="l_method-i-update_target_actor_selection_source">show</a>
                
              </p>
              <div id="method-i-update_target_actor_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 413</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_target_actor_selection</span>
  <span class="ruby-ivar">@target_actor_window</span>.<span class="ruby-identifier">update</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">trigger?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span>)
    <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_cancel</span>
    <span class="ruby-identifier">end_target_actor_selection</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">trigger?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span>)
    <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_decision</span>
    <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">target_index</span> = <span class="ruby-ivar">@target_actor_window</span>.<span class="ruby-identifier">index</span>
    <span class="ruby-identifier">end_target_actor_selection</span>
    <span class="ruby-identifier">end_skill_selection</span>
    <span class="ruby-identifier">end_item_selection</span>
    <span class="ruby-identifier">next_actor</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-update_target_enemy_selection">
            
              <b>update_target_enemy_selection</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-update_target_enemy_selection" name="method-i-update_target_enemy_selection" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>刷新对象敌人的选择</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-update_target_enemy_selection_source')" id="l_method-i-update_target_enemy_selection_source">show</a>
                
              </p>
              <div id="method-i-update_target_enemy_selection_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 372</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">update_target_enemy_selection</span>
  <span class="ruby-ivar">@target_enemy_window</span>.<span class="ruby-identifier">update</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">trigger?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span>)
    <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_cancel</span>
    <span class="ruby-identifier">end_target_enemy_selection</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-constant">Input</span>.<span class="ruby-identifier">trigger?</span>(<span class="ruby-constant">Input</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span>)
    <span class="ruby-constant">Sound</span>.<span class="ruby-identifier">play_decision</span>
    <span class="ruby-ivar">@active_battler</span>.<span class="ruby-identifier">action</span>.<span class="ruby-identifier">target_index</span> = <span class="ruby-ivar">@target_enemy_window</span>.<span class="ruby-identifier">enemy</span>.<span class="ruby-identifier">index</span>
    <span class="ruby-identifier">end_target_enemy_selection</span>
    <span class="ruby-identifier">end_skill_selection</span>
    <span class="ruby-identifier">end_item_selection</span>
    <span class="ruby-identifier">next_actor</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-wait">
            
              <b>wait</b>(duration, no_fast = false)
            
            <a href="../classes/Scene_Battle.html#method-i-wait" name="method-i-wait" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>一定时间内等待</p>

<p>duration : 等待时间 (帧数) no_fast  : 发送无效
这是为了在Scene类的 update 处理中加入『Wait』的模块
原则上 update 是1 帧 执行一次的
不过为了把握战斗中处理的流畅，可以例外使用这个模块。</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-wait_source')" id="l_method-i-wait_source">show</a>
                
              </p>
              <div id="method-i-wait_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">wait</span>(<span class="ruby-identifier">duration</span>, <span class="ruby-identifier">no_fast</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword">in</span> <span class="ruby-number">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">duration</span>
    <span class="ruby-identifier">update_basic</span>
    <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">no_fast</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">duration</span> <span class="ruby-operator">/</span> <span class="ruby-number">2</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">show_fast?</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-wait_for_animation">
            
              <b>wait_for_animation</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-wait_for_animation" name="method-i-wait_for_animation" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>动画显示结束以后的等待</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-wait_for_animation_source')" id="l_method-i-wait_for_animation_source">show</a>
                
              </p>
              <div id="method-i-wait_for_animation_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 81</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">wait_for_animation</span>
  <span class="ruby-keyword">while</span> <span class="ruby-ivar">@spriteset</span>.<span class="ruby-identifier">animation?</span>
    <span class="ruby-identifier">update_basic</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-wait_for_message">
            
              <b>wait_for_message</b>()
            
            <a href="../classes/Scene_Battle.html#method-i-wait_for_message" name="method-i-wait_for_message" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>信息显示结束以后的等待</p>
            </div>
          
          
          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-wait_for_message_source')" id="l_method-i-wait_for_message_source">show</a>
                
              </p>
              <div id="method-i-wait_for_message_source" class="dyn-source">
                <pre><span class="ruby-comment"># File Scene_Battle.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">wait_for_message</span>
  <span class="ruby-ivar">@message_window</span>.<span class="ruby-identifier">update</span>
  <span class="ruby-keyword">while</span> <span class="ruby-identifier">$game_message</span>.<span class="ruby-identifier">visible</span>
    <span class="ruby-identifier">update_basic</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    